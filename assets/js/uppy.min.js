!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Uppy=t()}}(function(){function t(){}function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}function r(t){return t===mr||t===gr}function n(t){return wr.test(t)}function o(t,e){Er[t][0]&&0===Er[t][2]&&(Er[t][0](e),Er[t][2]=1)}function i(t,e){Er[t][1]&&1===Er[t][2]&&(Er[t][1](e),Er[t][2]=0)}function s(t,e,r){var n=t.target.getAttribute(Pr);a(t.oldValue,n)?Er[n]=Er[t.oldValue]:(Er[t.oldValue]&&r(t.oldValue,t.target),Er[n]&&e(n,t.target))}function a(t,e){return!(!t||!e)&&Er[t][3]===Er[e][3]}function c(t,e){for(var r=Object.keys(Er),n=0;n<t.length;n++){if(t[n]&&t[n].getAttribute&&t[n].getAttribute(Pr)){var o=t[n].getAttribute(Pr);r.forEach(function(r){o===r&&e(r,t[n])})}t[n].childNodes.length>0&&c(t[n].childNodes,e)}}function l(t,e,r){function n(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var r=t[e];if(Array.isArray(r))n(r);else{if(("number"==typeof r||"boolean"==typeof r||"function"==typeof r||r instanceof Date||r instanceof RegExp)&&(r=r.toString()),"string"==typeof r){if(o.lastChild&&"#text"===o.lastChild.nodeName){o.lastChild.nodeValue+=r;continue}r=or.createTextNode(r)}r&&r.nodeType&&o.appendChild(r)}}}var o;-1!==Or.indexOf(t)&&(e.namespace=Ur);var i=!1;if(e.namespace&&(i=e.namespace,delete e.namespace),i)o=or.createElementNS(i,t);else{if(t===Dr)return or.createComment(e.comment);o=or.createElement(t)}if(e.onload||e.onunload){var s=e.onload||function(){},a=e.onunload||function(){};Sr(o,function(){s(o)},function(){a(o)},l.caller.caller.caller),delete e.onload,delete e.onunload}for(var c in e)if(e.hasOwnProperty(c)){var u=c.toLowerCase(),p=e[c];if("classname"===u&&(u="class",c="class"),"htmlFor"===c&&(c="for"),Cr[u])if("true"===p)p=u;else if("false"===p)continue;"on"===u.slice(0,2)?o[c]=p:i?"xlink:href"===c?o.setAttributeNS(Tr,c,p):/^xmlns($|:)/i.test(c)||o.setAttributeNS(null,c,p):o.setAttribute(c,p)}return n(r),o}function u(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function d(t){if(Ir===setTimeout)return setTimeout(t,0);if((Ir===u||!Ir)&&setTimeout)return Ir=setTimeout,setTimeout(t,0);try{return Ir(t,0)}catch(e){try{return Ir.call(null,t,0)}catch(e){return Ir.call(this,t,0)}}}function h(t){if(Fr===clearTimeout)return clearTimeout(t);if((Fr===p||!Fr)&&clearTimeout)return Fr=clearTimeout,clearTimeout(t);try{return Fr(t)}catch(e){try{return Fr.call(null,t)}catch(e){return Fr.call(this,t)}}}function f(){Mr&&Rr&&(Mr=!1,Rr.length?Br=Rr.concat(Br):Lr=-1,Br.length&&m())}function m(){if(!Mr){var t=d(f);Mr=!0;for(var e=Br.length;e;){for(Rr=Br,Br=[];++Lr<e;)Rr&&Rr[Lr].run();Lr=-1,e=Br.length}Rr=null,Mr=!1,h(t)}}function g(t,e){this.fun=t,this.array=e}function y(){}function b(t){if(t)return v(t)}function v(t){for(var e in b.prototype)t[e]=b.prototype[e];return t}function w(t){if(!((t=String(t)).length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*Yr;case"days":case"day":case"d":return r*$r;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Jr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Gr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Xr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function A(t){return t>=$r?Math.round(t/$r)+"d":t>=Jr?Math.round(t/Jr)+"h":t>=Gr?Math.round(t/Gr)+"m":t>=Xr?Math.round(t/Xr)+"s":t+"ms"}function S(t){return E(t,$r,"day")||E(t,Jr,"hour")||E(t,Gr,"minute")||E(t,Xr,"second")||t+" ms"}function E(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}function P(t){var e,r=0;for(e in t)r=(r<<5)-r+t.charCodeAt(e),r|=0;return Kr.colors[Math.abs(r)%Kr.colors.length]}function x(t){function e(){if(e.enabled){var t=e,r=+new Date,n=r-(Zr||r);t.diff=n,t.prev=Zr,t.curr=r,Zr=r;for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];o[0]=Kr.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;s++;var n=Kr.formatters[r];if("function"==typeof n){var i=o[s];e=n.call(t,i),o.splice(s,1),s--}return e}),Kr.formatArgs.call(t,o),(e.log||Kr.log||console.log.bind(console)).apply(t,o)}}return e.namespace=t,e.enabled=Kr.enabled(t),e.useColors=Kr.useColors(),e.color=P(t),"function"==typeof Kr.init&&Kr.init(e),e}function k(t,e){function r(){i.readEntries(function(t){t.length>0?(o=o.concat(U(t)),r()):n()})}function n(){en(o.map(function(t){return function(e){k(t,e)}}),e)}var o=[];if(t.isFile)t.file(function(r){r.fullPath=t.fullPath,e(null,r)},function(t){e(t)});else if(t.isDirectory){var i=t.createReader();r()}}function U(t){return Array.prototype.slice.call(t||[],0)}function T(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}function C(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*yn;case"days":case"day":case"d":return r*gn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*mn;case"minutes":case"minute":case"mins":case"min":case"m":return r*fn;case"seconds":case"second":case"secs":case"sec":case"s":return r*hn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function D(t){return t>=gn?Math.round(t/gn)+"d":t>=mn?Math.round(t/mn)+"h":t>=fn?Math.round(t/fn)+"m":t>=hn?Math.round(t/hn)+"s":t+"ms"}function O(t){return _(t,gn,"day")||_(t,mn,"hour")||_(t,fn,"minute")||_(t,hn,"second")||t+" ms"}function _(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}function I(t){var e,r=0;for(e in t)r=(r<<5)-r+t.charCodeAt(e),r|=0;return bn.colors[Math.abs(r)%bn.colors.length]}function F(t){function e(){if(e.enabled){var t=e,r=+new Date,n=r-(vn||r);t.diff=n,t.prev=vn,t.curr=r,vn=r;for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];o[0]=bn.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;s++;var n=bn.formatters[r];if("function"==typeof n){var i=o[s];e=n.call(t,i),o.splice(s,1),s--}return e}),bn.formatArgs.call(t,o),(e.log||bn.log||console.log.bind(console)).apply(t,o)}}return e.namespace=t,e.enabled=bn.enabled(t),e.useColors=bn.useColors(),e.color=I(t),"function"==typeof bn.init&&bn.init(e),e}function j(t){var e="";do{e=Pn[t%xn]+e,t=Math.floor(t/xn)}while(t>0);return e}function N(){var t=j(+new Date);return t!==Sn?(Un=0,Sn=t):t+"."+j(Un++)}function R(t){var e=t&&t.forceBase64;On&&!e||(this.supportsBinary=!1),un.call(this,t)}function B(t){var e=arguments.length<=1||void 0===arguments[1]?{trim:!1}:arguments[1];if(!t)throw new Error("A form is required by getFormData, was given form="+t);for(var r={},n=void 0,o=[],i={},s=0,a=t.elements.length;s<a;s++){var c=t.elements[s];Yn[c.type]||c.disabled||(n=c.name||c.id)&&!i[n]&&(o.push(n),i[n]=!0)}for(var s=0,a=o.length;s<a;s++){var l=M(t,n=o[s],e);null!=l&&(r[n]=l)}return r}function M(t,e){var r=arguments.length<=2||void 0===arguments[2]?{trim:!1}:arguments[2];if(!t)throw new Error("A form is required by getNamedFormElementData, was given form="+t);if(!e&&"[object String]"!==to.call(e))throw new Error("A form element name is required by getNamedFormElementData, was given elementName="+e);var n=t.elements[e];if(!n||n.disabled)return null;if(!$n[to.call(n)])return L(n,r.trim);for(var o=[],i=!0,s=0,a=n.length;s<a;s++)if(!n[s].disabled){i&&"radio"!==n[s].type&&(i=!1);var c=L(n[s],r.trim);null!=c&&(o=o.concat(c))}return i&&1===o.length?o[0]:o.length>0?o:null}function L(t,e){var r=null,n=t.type;if("select-one"===n)return t.options.length&&(r=t.options[t.selectedIndex].value),r;if("select-multiple"===n){r=[];for(var o=0,i=t.options.length;o<i;o++)t.options[o].selected&&r.push(t.options[o].value);return 0===r.length&&(r=null),r}return"file"===n&&"files"in t?(t.multiple?0===(r=Qn.call(t.files)).length&&(r=null):r=t.files[0],r):(Kn[n]?t.checked&&(r=t.value):r=e?t.value.replace(Zn,""):t.value,r)}function z(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}function q(t){!no&&co.createRange&&(no=co.createRange()).selectNode(co.body);var e;return no&&no.createContextualFragment?e=no.createContextualFragment(t):(e=co.createElement("body")).innerHTML=t,e.childNodes[0]}function H(t,e){var r=t.nodeName,n=e.nodeName;return r===n||!!(e.actualize&&r.charCodeAt(0)<91&&n.charCodeAt(0)>90)&&r===n.toUpperCase()}function W(t,e){return e&&e!==ao?co.createElementNS(e,t):co.createElement(t)}function V(t,e){for(var r=t.firstChild;r;){var n=r.nextSibling;e.appendChild(r),r=n}return e}function X(t,e,r){t[r]!==e[r]&&(t[r]=e[r],t[r]?t.setAttribute(r,""):t.removeAttribute(r,""))}function G(){}function J(t){return t.id}function $(t){return decodeURIComponent(t.replace(/\+/g," "))}function Y(){}function K(t){var e=""+t.type;return Uo.BINARY_EVENT!==t.type&&Uo.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),To("encoded %j as %s",t,e),e}function Z(t,e){ko.removeBlobs(t,function(t){var r=ko.deconstructPacket(t),n=K(r.packet),o=r.buffers;o.unshift(n),e(o)})}function Q(){this.reconstructor=null}function tt(t){var e=0,r={type:Number(t.charAt(0))};if(null==Uo.types[r.type])return nt();if(Uo.BINARY_EVENT===r.type||Uo.BINARY_ACK===r.type){for(var n="";"-"!==t.charAt(++e)&&(n+=t.charAt(e),e!=t.length););if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(n)}if("/"===t.charAt(e+1))for(r.nsp="";++e&&","!==(i=t.charAt(e))&&(r.nsp+=i,e!==t.length););else r.nsp="/";var o=t.charAt(e+1);if(""!==o&&Number(o)==o){for(r.id="";++e;){var i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(r.id+=t.charAt(e),e===t.length)break}r.id=Number(r.id)}return t.charAt(++e)&&(r=et(r,t.substr(e))),To("decoded %s as %j",t,r),r}function et(t,e){try{t.data=JSON.parse(e)}catch(t){return nt()}return t}function rt(t){this.reconPack=t,this.buffers=[]}function nt(){return{type:Uo.ERROR,data:"parser error"}}function ot(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}function it(t,e){if(!(this instanceof it))return new it(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new er({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=e.parser||Uo;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}function st(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,n=Ro(t),o=n.source,i=n.id,s=n.path,a=Lo[i]&&s in Lo[i].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?(Mo("ignoring socket cache for %s",o),r=Fo(o,e)):(Lo[i]||(Mo("new io instance for %s",o),Lo[i]=Fo(o,e)),r=Lo[i]),n.query&&!e.query?e.query=n.query:e&&"object"==typeof e.query&&(e.query=at(e.query)),r.socket(n.path,e)}function at(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function pt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function dt(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function ht(t){return t&&t.__esModule?t:{default:t}}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t){if(!ii.isSupported)return"";var e=[];for(var r in t)e.push(r+" "+ii.encode(t[r]));return e.join(",")}function gt(t,e){return t>=e&&t<e+100}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t){return{hours:Math.floor(t/3600)%24,minutes:Math.floor(t/60)%60,seconds:Math.floor(t%60)}}function At(t){return 2!==t.length?0+t:t}function St(t){return new Di(function(e,r){var n=new FileReader;n.addEventListener("load",function(t){e(t.target.result)}),n.addEventListener("error",function(t){console.error("FileReader error"+t),r(t)}),n.readAsArrayBuffer(t)})}function Et(t){var e=/(?:\.([^.]+))?$/.exec(t)[1];return{name:t.replace("."+e,""),extension:e}}function Pt(t,e){var r=t.width/t.height;return Math.round(e/r)}function xt(t,e,r){var n=t.width,o=t.height;if(r<t.height/2){var i=kt(t,Math.floor(Math.log(t.width/e)/Math.log(2)));t=i.image,n=i.sourceWidth,o=i.sourceHeight}var s=document.createElement("canvas");return s.width=e,s.height=r,s.getContext("2d").drawImage(t,0,0,n,o,0,0,e,r),s}function kt(t,e){for(var r=t,n=r.width,o=r.height,i=0;i<e;i+=1){var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n/2,s.height=o/2,a.drawImage(r,0,0,n,o,0,0,n/2,o/2),n/=2,o/=2,r=s}return{image:r,sourceWidth:n,sourceHeight:o}}function Ut(t,e,r){return t.toBlob?new Di(function(n){t.toBlob(n,e,r)}):Promise.resolve().then(function(){return Tt(t.toDataURL(e,r),{})})}function Tt(t,e,r){var n=t.split(",")[1],o=e.mimeType||t.split(",")[0].split(":")[1].split(";")[0];null==o&&(o="plain/text");for(var i=atob(n),s=[],a=0;a<i.length;a++)s.push(i.charCodeAt(a));return r?new File([new Uint8Array(s)],e.name||"",{type:o}):new hi([new Uint8Array(s)],{type:o})}function Ct(t){if(!t.bytesUploaded)return 0;var e=new Date-t.uploadStarted;return t.bytesUploaded/(e/1e3)}function Dt(t){return t.bytesTotal-t.bytesUploaded}function Ot(t){return t&&"object"===(void 0===t?"undefined":Ci(t))&&t.nodeType===Node.ELEMENT_NODE}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Nt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function qt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ht(t,e){if(t.isAllErrored)return Hs;if(t.isAllComplete)return Js;for(var r=Ws,n=Object.keys(e),o=0;o<n.length;o++){var i=e[n[o]].progress;if(i.uploadStarted&&!i.uploadComplete)return Xs;i.preprocess&&r!==Xs&&(r=Vs),i.postprocess&&r!==Xs&&r!==Vs&&(r=Gs)}return r}function Wt(t){var e=[];Object.keys(t).forEach(function(r){var n=t[r].progress;n.preprocess&&e.push(n.preprocess),n.postprocess&&e.push(n.postprocess)});var r=e[0];return{mode:r.mode,message:r.message,value:e.filter(function(t){return"determinate"===t.mode}).reduce(function(t,e,r,n){return t+e.value/n.length},0)}}function Vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Gt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Qt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function re(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ie(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ce(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t){t.openCursor().onsuccess=function(t){var e=t.target.result;if(e){var r=e.value;r.expires=Date.now()+_a,e.update(r)}}}function pe(t){var e=Ta.open(t,Ia);return new Ua(function(t,r){e.onupgradeneeded=function(e){var r=e.target.result,n=e.currentTarget.transaction;if(e.oldVersion<2&&r.createObjectStore(Oa,{keyPath:"id"}).createIndex("store","store",{unique:!1}),e.oldVersion<3){var o=n.objectStore(Oa);o.createIndex("expires","expires",{unique:!1}),ue(o)}n.oncomplete=function(){t(r)}},e.onsuccess=function(e){t(e.target.result)},e.onerror=r})}function de(t){return new Ua(function(e,r){t.onsuccess=function(t){e(t.target.result)},t.onerror=r})}function he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fe(){for(var t=[],e=0;e<localStorage.length;e++){var r=localStorage.key(e);/^uppyState:/.test(r)&&t.push(r.slice("uppyState:".length))}return t}function me(t){try{return JSON.parse(t)}catch(t){return null}}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ye(){return new La(function(t,e){za?navigator.serviceWorker.controller?t():navigator.serviceWorker.addEventListener("controllerchange",function(){t()}):e(new Error("Unsupported"))})}function be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function we(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ee(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ke(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Te(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ce(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function De(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function je(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Be(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function He(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function We(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ve(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Xe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ge(t){var e=[];return{on:function(r,n){return e.push([r,n]),t.on(r,n)},remove:function(){e.forEach(function(e){var r=e[0],n=e[1];t.off(r,n)})}}}function Je(t,e){return-1!==t.indexOf(e)}function $e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ye(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ke(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ze(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var t=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return t?{getUserMedia:function(e){return new Tc(function(r,n){t.call(navigator,e,r,n)})}}:null}var Qe=function(e,r,n){function o(t,e){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,r(t),r=n):0!==o.count||i||r(null,e)}var i=!1;return n=n||t,o.count=e,0===e?r():o},tr=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),s=e,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer},er={};er=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t};var rr={};!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;rr.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i="";for(r=0;r<o;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},rr.decode=function(t){var r,n,o,i,s,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),p=new Uint8Array(u);for(r=0;r<c;r+=4)n=e[t.charCodeAt(r)],o=e[t.charCodeAt(r+1)],i=e[t.charCodeAt(r+2)],s=e[t.charCodeAt(r+3)],p[l++]=n<<2|o>>4,p[l++]=(15&o)<<4|i>>2,p[l++]=(3&i)<<6|63&s;return u}}();var nr={},or={};(function(t){var e,r=void 0!==t?t:"undefined"!=typeof window?window:{},n=nr;"undefined"!=typeof document?e=document:(e=r["__GLOBAL_DOCUMENT_CACHE@4"])||(e=r["__GLOBAL_DOCUMENT_CACHE@4"]=n),or=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ir=function(t){return function(e,r,n){for(var o in r)o in sr&&(r[sr[o]]=r[o],delete r[o]);return t(e,r,n)}},sr={class:"className",for:"htmlFor","http-equiv":"httpEquiv"},ar=1,cr=2,lr=3,ur=4,pr=5,dr=6,hr=7,fr=8,mr=9,gr=10,yr=11,br=12,vr=13;Object.prototype.hasOwnProperty;var wr=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-￿_:-]+)*$"),Ar={};(function(t){var e;e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Ar=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Sr={},Er=Object.create(null),Pr="data-onloadid"+(new Date%9e6).toString(36),xr=0;Ar&&Ar.MutationObserver&&new MutationObserver(function(t){if(!(Object.keys(Er).length<1))for(var e=0;e<t.length;e++)t[e].attributeName!==Pr?(c(t[e].removedNodes,i),c(t[e].addedNodes,o)):s(t[e],o,i)}).observe(or.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[Pr]}),Sr=function t(e,r,n,o){return r=r||function(){},n=n||function(){},e.setAttribute(Pr,"o"+xr),Er["o"+xr]=[r,n,0,o||t.caller],xr+=1,e};var kr={},Ur="http://www.w3.org/2000/svg",Tr="http://www.w3.org/1999/xlink",Cr={autofocus:1,checked:1,defaultchecked:1,disabled:1,formnovalidate:1,indeterminate:1,readonly:1,required:1,selected:1,willvalidate:1},Dr="!--",Or=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"];(kr=function(t,e){function o(t){return"function"==typeof t?t:"string"==typeof t?t:t&&"object"==typeof t?t:i("",t)}e||(e={});var i=e.concat||function(t,e){return String(t)+String(e)};return!1!==e.attrToProp&&(t=ir(t)),function(s){function a(t){var n=[];c===hr&&(c=ur);for(var o=0;o<t.length;o++){var i=t.charAt(o);c===ar&&"<"===i?(l.length&&n.push([ar,l]),l="",c=cr):">"!==i||r(c)||c===vr?c===vr&&/-$/.test(l)&&"-"===i?(e.comments&&n.push([fr,l.substr(0,l.length-1)],[lr]),l="",c=ar):c===cr&&/^!--$/.test(l)?(e.comments&&n.push([cr,l],[pr,"comment"],[yr]),l=i,c=vr):c===ar||c===vr?l+=i:c===cr&&/\s/.test(i)?(n.push([cr,l]),l="",c=ur):c===cr?l+=i:c===ur&&/[^\s"'=/]/.test(i)?(c=pr,l=i):c===ur&&/\s/.test(i)?(l.length&&n.push([pr,l]),n.push([br])):c===pr&&/\s/.test(i)?(n.push([pr,l]),l="",c=dr):c===pr&&"="===i?(n.push([pr,l],[yr]),l="",c=hr):c===pr?l+=i:c!==dr&&c!==ur||"="!==i?c!==dr&&c!==ur||/\s/.test(i)?c===hr&&'"'===i?c=gr:c===hr&&"'"===i?c=mr:c===gr&&'"'===i?(n.push([fr,l],[br]),l="",c=ur):c===mr&&"'"===i?(n.push([fr,l],[br]),l="",c=ur):c!==hr||/\s/.test(i)?c===fr&&/\s/.test(i)?(n.push([fr,l],[br]),l="",c=ur):c!==fr&&c!==mr&&c!==gr||(l+=i):(c=fr,o--):(n.push([br]),/[\w-]/.test(i)?(l+=i,c=pr):c=ur):(n.push([yr]),c=hr):(c===cr?n.push([cr,l]):c===pr?n.push([pr,l]):c===fr&&l.length&&n.push([fr,l]),n.push([lr]),l="",c=ar)}return c===ar&&l.length?(n.push([ar,l]),l=""):c===fr&&l.length?(n.push([fr,l]),l=""):c===gr&&l.length?(n.push([fr,l]),l=""):c===mr&&l.length?(n.push([fr,l]),l=""):c===pr&&(n.push([pr,l]),l=""),n}for(var c=ar,l="",u=arguments.length,p=[],d=0;d<s.length;d++)if(d<u-1){var h=arguments[d+1],f=a(s[d]),m=c;m===gr&&(m=fr),m===mr&&(m=fr),m===hr&&(m=fr),m===ur&&(m=pr),f.push([0,m,h]),p.push.apply(p,f)}else p.push.apply(p,a(s[d]));for(var g=[null,{},[]],y=[[g,-1]],d=0;d<p.length;d++){var b=y[y.length-1][0],v=(f=p[d])[0];if(v===cr&&/^\//.test(f[1]))P=y[y.length-1][1],y.length>1&&(y.pop(),y[y.length-1][0][2][P]=t(b[0],b[1],b[2].length?b[2]:void 0));else if(v===cr){var w=[f[1],{},[]];b[2].push(w),y.push([w,b[2].length-1])}else if(v===pr||0===v&&f[1]===pr){for(var A,S="";d<p.length;d++)if(p[d][0]===pr)S=i(S,p[d][1]);else{if(0!==p[d][0]||p[d][1]!==pr)break;if("object"!=typeof p[d][2]||S)S=i(S,p[d][2]);else for(A in p[d][2])p[d][2].hasOwnProperty(A)&&!b[1][A]&&(b[1][A]=p[d][2][A])}p[d][0]===yr&&d++;for(var E=d;d<p.length;d++)if(p[d][0]===fr||p[d][0]===pr)b[1][S]?b[1][S]=i(b[1][S],p[d][1]):b[1][S]=o(p[d][1]);else{if(0!==p[d][0]||p[d][1]!==fr&&p[d][1]!==pr){!S.length||b[1][S]||d!==E||p[d][0]!==lr&&p[d][0]!==br||(b[1][S]=S.toLowerCase()),p[d][0]===lr&&d--;break}b[1][S]?b[1][S]=i(b[1][S],p[d][2]):b[1][S]=o(p[d][2])}}else if(v===pr)b[1][f[1]]=!0;else if(0===v&&f[1]===pr)b[1][f[2]]=!0;else if(v===lr){if(n(b[0])&&y.length){var P=y[y.length-1][1];y.pop(),y[y.length-1][0][2][P]=t(b[0],b[1],b[2].length?b[2]:void 0)}}else if(0===v&&f[1]===ar)void 0===f[2]||null===f[2]?f[2]="":f[2]||(f[2]=i("",f[2])),Array.isArray(f[2][0])?b[2].push.apply(b[2],f[2]):b[2].push(f[2]);else if(v===ar)b[2].push(f[1]);else if(v!==yr&&v!==br)throw new Error("unhandled: "+v)}if(g[2].length>1&&/^\s*$/.test(g[2][0])&&g[2].shift(),g[2].length>2||2===g[2].length&&/\S/.test(g[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(g[2][0])&&"string"==typeof g[2][0][0]&&Array.isArray(g[2][0][2])&&(g[2][0]=t(g[2][0][0],g[2][0][1],g[2][0][2])),g[2][0]}}(l,{comments:!0})).default=kr,kr.createElement=l;var _r={};(function(t){function e(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}t[e]=n}}}var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,n=function(){try{return 2===new hi(["hi"]).size}catch(t){return!1}}(),o=n&&function(){try{return 2===new hi([new Uint8Array([1,2])]).size}catch(t){return!1}}(),i=r&&r.prototype.append&&r.prototype.getBlob;_r=n?o?t.Blob:function(t,r){return e(t),new hi(t,r||{})}:i?function(t,n){n=n||{};var o=new r;e(t);for(var i=0;i<t.length;i++)o.append(t[i]);return n.type?o.getBlob(n.type):o.getBlob()}:void 0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ir,Fr,jr={},Nr=jr={};!function(){try{Ir="function"==typeof setTimeout?setTimeout:u}catch(t){Ir=u}try{Fr="function"==typeof clearTimeout?clearTimeout:p}catch(t){Fr=p}}();var Rr,Br=[],Mr=!1,Lr=-1;Nr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Br.push(new g(t,e)),1!==Br.length||Mr||d(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},Nr.title="browser",Nr.browser=!0,Nr.env={},Nr.argv=[],Nr.version="",Nr.versions={},Nr.on=y,Nr.addListener=y,Nr.once=y,Nr.off=y,Nr.removeListener=y,Nr.removeAllListeners=y,Nr.emit=y,Nr.prependListener=y,Nr.prependOnceListener=y,Nr.listeners=function(t){return[]},Nr.binding=function(t){throw new Error("process.binding is not supported")},Nr.cwd=function(){return"/"},Nr.chdir=function(t){throw new Error("process.chdir is not supported")},Nr.umask=function(){return 0};var zr=[].slice,qr=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=zr.call(arguments,2);return function(){return e.apply(t,r.concat(zr.call(arguments)))}},Hr={exports:{}};Hr.exports=b,b.prototype.on=b.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},b.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=b.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return this},b.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,e);return this},b.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},b.prototype.hasListeners=function(t){return!!this.listeners(t).length},Hr=Hr.exports;var Wr=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t},Vr={exports:{}};!function(t){"use strict";var e=0,r=Math.pow(36,4),n=function(t,e){var r="000000000"+t;return r.substr(r.length-e)},o=function(){return n((Math.random()*r<<0).toString(36),4)},i=function(){return e=e<r?e:0,++e-1},s=function(){var t,e=(new Date).getTime().toString(36),r=s.fingerprint(),a=o()+o();return t=n(i().toString(36),4),"c"+e+t+r+a};s.slug=function(){var t,e=(new Date).getTime().toString(36),r=s.fingerprint().slice(0,1)+s.fingerprint().slice(-1),n=o().slice(-2);return t=i().toString(36).slice(-4),e.slice(-2)+t+r+n},s.globalCount=function(){var t=function(){var t,e=0;for(t in window)e++;return e}();return s.globalCount=function(){return t},t},s.fingerprint=function(){return n((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+s.globalCount().toString(36),4)},t.register?t.register("cuid",s):Vr.exports=s}(this.applitude||this),Vr=Vr.exports;var Xr=1e3,Gr=60*Xr,Jr=60*Gr,$r=24*Jr,Yr=365.25*$r,Kr={};(Kr=Kr=x.debug=x.default=x).coerce=function(t){return t instanceof Error?t.stack||t.message:t},Kr.disable=function(){Kr.enable("")},Kr.enable=function(t){Kr.save(t),Kr.names=[],Kr.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),r=e.length,n=0;n<r;n++)e[n]&&("-"===(t=e[n].replace(/\*/g,".*?"))[0]?Kr.skips.push(new RegExp("^"+t.substr(1)+"$")):Kr.names.push(new RegExp("^"+t+"$")))},Kr.enabled=function(t){var e,r;for(e=0,r=Kr.skips.length;e<r;e++)if(Kr.skips[e].test(t))return!1;for(e=0,r=Kr.names.length;e<r;e++)if(Kr.names[e].test(t))return!0;return!1},Kr.humanize=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return w(t);if("number"===r&&!1===isNaN(t))return e.long?S(t):A(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))},Kr.names=[],Kr.skips=[],Kr.formatters={};var Zr,Qr={};(function(t){function e(){var e;try{e=Qr.storage.debug}catch(t){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(Qr=Qr=Kr).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},Qr.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+Qr.humanize(this.diff),e){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(n++,"%c"===t&&(o=n))}),t.splice(o,0,r)}},Qr.save=function(t){try{null==t?Qr.storage.removeItem("debug"):Qr.storage.debug=t}catch(t){}},Qr.load=e,Qr.useColors=function(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},Qr.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),Qr.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],Qr.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},Qr.enable(e())}).call(this,jr);var tn=function(t,e){function r(t,n){return t.reduce(function(t,o){return Array.isArray(o)&&n<e?t.concat(r(o,n+1)):t.concat(o)},[])}return(e="number"==typeof e?e:1/0)?r(t,1):Array.isArray(t)?t.map(function(t){return t}):t},en={};(function(t){en=function(e,r){function n(e){function n(){r&&r(e,i),r=null}c?t.nextTick(n):n()}function o(t,e,r){i[t]=r,(0==--s||e)&&n(e)}var i,s,a,c=!0;Array.isArray(e)?(i=[],s=e.length):(a=Object.keys(e),i={},s=a.length),s?a?a.forEach(function(t){e[t](function(e,r){o(t,e,r)})}):e.forEach(function(t,e){t(function(t,r){o(e,t,r)})}):n(null),c=!1}}).call(this,jr);var rn=function(t,e){function r(t){return e.onDragEnter&&e.onDragEnter(t),t.stopPropagation(),t.preventDefault(),!1}function n(r){if(r.stopPropagation(),r.preventDefault(),r.dataTransfer.items){var n=U(r.dataTransfer.items),o=n.filter(function(t){return"file"===t.kind}),i=n.filter(function(t){return"string"===t.kind});if(0===o.length&&!e.onDropText)return;if(0===i.length&&!e.onDrop)return;if(0===o.length&&0===i.length)return}return t.classList.add("drag"),clearTimeout(c),e.onDragOver&&e.onDragOver(r),r.dataTransfer.dropEffect="copy",!1}function o(t){return t.stopPropagation(),t.preventDefault(),e.onDragLeave&&e.onDragLeave(t),clearTimeout(c),c=setTimeout(s,50),!1}function i(t){t.stopPropagation(),t.preventDefault(),e.onDragLeave&&e.onDragLeave(t),clearTimeout(c),s();var r={x:t.clientX,y:t.clientY},n=t.dataTransfer.getData("text");if(n&&e.onDropText&&e.onDropText(n,r),t.dataTransfer.items){var o=U(t.dataTransfer.items).filter(function(t){return"file"===t.kind});if(0===o.length)return;en(o.map(function(t){return function(e){k(t.webkitGetAsEntry(),e)}}),function(t,n){if(t)throw t;e.onDrop&&e.onDrop(tn(n),r)})}else{var i=U(t.dataTransfer.files);if(0===i.length)return;i.forEach(function(t){t.fullPath="/"+t.name}),e.onDrop&&e.onDrop(i,r)}return!1}function s(){t.classList.remove("drag")}if("string"==typeof t){var a=t;if(!(t=window.document.querySelector(t)))throw new Error('"'+a+'" does not match any HTML elements')}if(!t)throw new Error('"'+t+'" is not a valid HTML element');"function"==typeof e&&(e={onDrop:e});var c;return t.addEventListener("dragenter",r,!1),t.addEventListener("dragover",n,!1),t.addEventListener("dragleave",o,!1),t.addEventListener("drop",i,!1),function(){s(),t.removeEventListener("dragenter",r,!1),t.removeEventListener("dragover",n,!1),t.removeEventListener("dragleave",o,!1),t.removeEventListener("drop",i,!1)}},nn=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e},on={exports:{}};(function(t){!function(e){function r(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function n(t){for(var e,r=t.length,n=-1,o="";++n<r;)(e=t[n])>65535&&(o+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=m(e);return o}function o(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function i(t,e){return m(t>>e&63|128)}function s(t,e){if(0==(4294967168&t))return m(t);var r="";return 0==(4294965248&t)?r=m(t>>6&31|192):0==(4294901760&t)?(o(t,e)||(t=65533),r=m(t>>12&15|224),r+=i(t,6)):0==(4292870144&t)&&(r=m(t>>18&7|240),r+=i(t,12),r+=i(t,6)),r+=m(63&t|128)}function a(){if(f>=h)throw Error("Invalid byte index");var t=255&d[f];if(f++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function c(t){var e,r,n,i,s;if(f>h)throw Error("Invalid byte index");if(f==h)return!1;if(e=255&d[f],f++,0==(128&e))return e;if(192==(224&e)){if(r=a(),(s=(31&e)<<6|r)>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&e)){if(r=a(),n=a(),(s=(15&e)<<12|r<<6|n)>=2048)return o(s,t)?s:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=a(),n=a(),i=a(),(s=(7&e)<<18|r<<12|n<<6|i)>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}var l="object"==typeof on.exports&&on.exports,u=on&&on.exports==l&&on,p="object"==typeof t&&t;p.global!==p&&p.window!==p||(e=p);var d,h,f,m=String.fromCharCode,g={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,o=r(t),i=o.length,a=-1,c="";++a<i;)c+=s(o[a],n);return c},decode:function(t,e){var o=!1!==(e=e||{}).strict;d=r(t),h=d.length,f=0;for(var i,s=[];!1!==(i=c(o));)s.push(i);return n(s)}};if(l&&!l.nodeType)if(u)u.exports=g;else{var y={}.hasOwnProperty;for(var b in g)y.call(g,b)&&(l[b]=g[b])}else e.utf8=g}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),on=on.exports;var sn={}.toString,an=Array.isArray||function(t){return"[object Array]"==sn.call(t)},cn={};(function(t){function e(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var s=0,a=n.length;s<a;s++)if(e(n[s]))return!0;return!1}if("function"==typeof t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(n)||"function"==typeof t.ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof hi||i&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&e(n[c]))return!0;return!1}var r=an,n=Object.prototype.toString,o="function"==typeof t.Blob||"[object BlobConstructor]"===n.call(t.Blob),i="function"==typeof t.File||"[object FileConstructor]"===n.call(t.File);cn=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ln={};(function(t){function e(t,e){return e("b"+ln.packets[t.type]+t.data.data)}function r(t,e,r){if(!e)return ln.encodeBase64Packet(t,r);var n=t.data,o=new Uint8Array(n),i=new Uint8Array(1+n.byteLength);i[0]=g[t.type];for(var s=0;s<o.length;s++)i[s+1]=o[s];return r(i.buffer)}function n(t,e,r){if(!e)return ln.encodeBase64Packet(t,r);var n=new FileReader;return n.onload=function(){t.data=n.result,ln.encodePacket(t,e,!0,r)},n.readAsArrayBuffer(t.data)}function o(t,e,r){if(!e)return ln.encodeBase64Packet(t,r);if(m)return n(t,e,r);var o=new Uint8Array(1);return o[0]=g[t.type],r(new v([o.buffer,t.data]))}function i(t){try{t=d.decode(t,{strict:!1})}catch(t){return!1}return t}function s(t,e,r){for(var n=new Array(t.length),o=p(t.length,r),i=0;i<t.length;i++)!function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})}(i,t[i],o)}var a,c=nn,l=cn,u=tr,p=Qe,d=on;t&&t.ArrayBuffer&&(a=rr);var h="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),f="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=h||f;ln.protocol=3;var g=ln.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=c(g),b={type:"error",data:"parser error"},v=_r;ln.encodePacket=function(n,i,s,a){"function"==typeof i&&(a=i,i=!1),"function"==typeof s&&(a=s,s=null);var c=void 0===n.data?void 0:n.data.buffer||n.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return r(n,i,a);if(v&&c instanceof t.Blob)return o(n,i,a);if(c&&c.base64)return e(n,a);var l=g[n.type];return void 0!==n.data&&(l+=s?d.encode(String(n.data),{strict:!1}):String(n.data)),a(""+l)},ln.encodeBase64Packet=function(e,r){var n="b"+ln.packets[e.type];if(v&&e.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(n+t)},o.readAsDataURL(e.data)}var i;try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];i=String.fromCharCode.apply(null,a)}return n+=t.btoa(i),r(n)},ln.decodePacket=function(t,e,r){if(void 0===t)return b;if("string"==typeof t)return"b"===t.charAt(0)?ln.decodeBase64Packet(t.substr(1),e):r&&!1===(t=i(t))?b:(n=t.charAt(0),Number(n)==n&&y[n]?t.length>1?{type:y[n],data:t.substring(1)}:{type:y[n]}:b);var n=new Uint8Array(t)[0],o=u(t,1);return v&&"blob"===e&&(o=new v([o])),{type:y[n],data:o}},ln.decodeBase64Packet=function(t,e){var r=y[t.charAt(0)];if(!a)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=a.decode(t.substr(1));return"blob"===e&&v&&(n=new v([n])),{type:r,data:n}},ln.encodePayload=function(t,e,r){function n(t){return t.length+":"+t}"function"==typeof e&&(r=e,e=null);var o=l(t);return e&&o?v&&!m?ln.encodePayloadAsBlob(t,r):ln.encodePayloadAsArrayBuffer(t,r):t.length?void s(t,function(t,r){ln.encodePacket(t,!!o&&e,!1,function(t){r(null,n(t))})},function(t,e){return r(e.join(""))}):r("0:")},ln.decodePayload=function(t,e,r){if("string"!=typeof t)return ln.decodePayloadAsBinary(t,e,r);"function"==typeof e&&(r=e,e=null);var n;if(""===t)return r(b,0,1);for(var o,i,s="",a=0,c=t.length;a<c;a++){var l=t.charAt(a);if(":"===l){if(""===s||s!=(o=Number(s)))return r(b,0,1);if(i=t.substr(a+1,o),s!=i.length)return r(b,0,1);if(i.length){if(n=ln.decodePacket(i,e,!1),b.type===n.type&&b.data===n.data)return r(b,0,1);if(!1===r(n,a+o,c))return}a+=o,s=""}else s+=l}return""!==s?r(b,0,1):void 0},ln.encodePayloadAsArrayBuffer=function(t,e){if(!t.length)return e(new ArrayBuffer(0));s(t,function(t,e){ln.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,r){var n=r.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return r.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}o[i++]=e?0:1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),e(o.buffer)})},ln.encodePayloadAsBlob=function(t,e){s(t,function(t,e){ln.encodePacket(t,!0,!0,function(t){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,r[0]=0}for(var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(i.length+1),o=0;o<i.length;o++)s[o]=parseInt(i[o]);if(s[i.length]=255,v){var a=new v([r.buffer,s.buffer,t]);e(null,a)}})},function(t,r){return e(new v(r))})},ln.decodePayloadAsBinary=function(t,e,r){"function"==typeof e&&(r=e,e=null);for(var n=t,o=[];n.byteLength>0;){for(var i=new Uint8Array(n),s=0===i[0],a="",c=1;255!==i[c];c++){if(a.length>310)return r(b,0,1);a+=i[c]}n=u(n,2+a.length),a=parseInt(a);var l=u(n,0,a);if(s)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(t){var p=new Uint8Array(l);for(l="",c=0;c<p.length;c++)l+=String.fromCharCode(p[c])}o.push(l),n=u(n,a)}var d=o.length;o.forEach(function(t,n){r(ln.decodePacket(t,e,!0),n,d)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var un={};un=T,Hr(T.prototype),T.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},T.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},T.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},T.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},T.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},T.prototype.onData=function(t){var e=ln.decodePacket(t,this.socket.binaryType);this.onPacket(e)},T.prototype.onPacket=function(t){this.emit("packet",t)},T.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var pn={};try{pn=void 0!==di&&"withCredentials"in new di}catch(t){pn=!1}var dn={};(function(t){var e=pn;dn=function(r){var n=r.xdomain,o=r.xscheme,i=r.enablesXDR;try{if(void 0!==di&&(!n||e))return new di}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(t){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var hn=1e3,fn=60*hn,mn=60*fn,gn=24*mn,yn=365.25*gn,bn={};(bn=bn=F.debug=F.default=F).coerce=function(t){return t instanceof Error?t.stack||t.message:t},bn.disable=function(){bn.enable("")},bn.enable=function(t){bn.save(t),bn.names=[],bn.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),r=e.length,n=0;n<r;n++)e[n]&&("-"===(t=e[n].replace(/\*/g,".*?"))[0]?bn.skips.push(new RegExp("^"+t.substr(1)+"$")):bn.names.push(new RegExp("^"+t+"$")))},bn.enabled=function(t){var e,r;for(e=0,r=bn.skips.length;e<r;e++)if(bn.skips[e].test(t))return!1;for(e=0,r=bn.names.length;e<r;e++)if(bn.names[e].test(t))return!0;return!1},bn.humanize=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return C(t);if("number"===r&&!1===isNaN(t))return e.long?O(t):D(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))},bn.names=[],bn.skips=[],bn.formatters={};var vn,wn={};(function(t){function e(){var e;try{e=wn.storage.debug}catch(t){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(wn=wn=bn).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},wn.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+wn.humanize(this.diff),e){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(n++,"%c"===t&&(o=n))}),t.splice(o,0,r)}},wn.save=function(t){try{null==t?wn.storage.removeItem("debug"):wn.storage.debug=t}catch(t){}},wn.load=e,wn.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},wn.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),wn.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],wn.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},wn.enable(e())}).call(this,jr);var An={};An.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},An.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e};for(var Sn,En={},Pn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),xn=64,kn={},Un=0,Tn=0;Tn<xn;Tn++)kn[Pn[Tn]]=Tn;N.encode=j,N.decode=function(t){var e=0;for(Tn=0;Tn<t.length;Tn++)e=e*xn+kn[t.charAt(Tn)];return e},En=N;var Cn=wn("engine.io-client:polling"),Dn=R,On=null!=new dn({xdomain:!1}).responseType;Wr(R,un),R.prototype.name="polling",R.prototype.doOpen=function(){this.poll()},R.prototype.pause=function(t){function e(){Cn("paused"),r.readyState="paused",t()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(Cn("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){Cn("pre-pause polling complete"),--n||e()})),this.writable||(Cn("we are currently writing - waiting to pause"),n++,this.once("drain",function(){Cn("pre-pause writing complete"),--n||e()}))}else e()},R.prototype.poll=function(){Cn("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},R.prototype.onData=function(t){var e=this;Cn("polling got data %s",t),ln.decodePayload(t,this.socket.binaryType,function(t,r,n){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():Cn('ignoring poll - transport state "%s"',this.readyState))},R.prototype.doClose=function(){function t(){Cn("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(Cn("transport open - closing"),t()):(Cn("transport not open - deferring close"),this.once("open",t))},R.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")};ln.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},R.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(t[this.timestampParam]=En()),this.supportsBinary||t.sid||(t.b64=1),t=An.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(r=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+t};var _n={};(function(t){function e(){}function r(r){n.call(this,r),this.query=this.query||{},o||(t.___eio||(t.___eio=[]),o=t.___eio),this.index=o.length;var i=this;o.push(function(t){i.onData(t)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){i.script&&(i.script.onerror=e)},!1)}var n=Dn;_n=r;var o,i=/\n/g,s=/\\n/g;Wr(r,n),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},r.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},r.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';a=document.createElement(t)}catch(t){(a=document.createElement("iframe")).name=o.iframeId,a.src="javascript:0"}a.id=o.iframeId,o.form.appendChild(a),o.iframe=a}var o=this;if(!this.form){var a,c=document.createElement("form"),l=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;c.className="socketio",c.style.position="absolute",c.style.top="-1000px",c.style.left="-1000px",c.target=u,c.method="POST",c.setAttribute("accept-charset","utf-8"),l.name="d",c.appendChild(l),document.body.appendChild(c),this.form=c,this.area=l}this.form.action=this.uri(),n(),t=t.replace(s,"\\\n"),this.area.value=t.replace(i,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var In={};(function(t){function e(){}function r(e){if(s.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,t.location){var r="https:"===location.protocol,n=location.port;n||(n=r?443:80),this.xd=e.hostname!==t.location.hostname||n!==e.port,this.xs=e.secure!==r}}function n(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function o(){for(var t in n.requests)n.requests.hasOwnProperty(t)&&n.requests[t].abort()}var i=dn,s=Dn,a=Hr,c=Wr,l=wn("engine.io-client:polling-xhr");(In=r).Request=n,c(r,s),r.prototype.supportsBinary=!0,r.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new n(t)},r.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},r.prototype.doPoll=function(){l("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},a(n.prototype),n.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new i(e),o=this;try{l("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(var s in this.extraHeaders)this.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this.extraHeaders[s])}}catch(t){}if("POST"===this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{r.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){o.onLoad()},r.onerror=function(){o.onError(r.responseText)}):r.onreadystatechange=function(){if(2===r.readyState){var t;try{t=r.getResponseHeader("Content-Type")}catch(t){}"application/octet-stream"===t&&(r.responseType="arraybuffer")}4===r.readyState&&(200===r.status||1223===r.status?o.onLoad():setTimeout(function(){o.onError(r.status)},0))},l("xhr data %s",this.data),r.send(this.data)}catch(t){return void setTimeout(function(){o.onError(t)},0)}t.document&&(this.index=n.requestsCount++,n.requests[this.index]=this)},n.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},n.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},n.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},n.prototype.cleanup=function(r){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e,r)try{this.xhr.abort()}catch(t){}t.document&&delete n.requests[this.index],this.xhr=null}},n.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},n.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},n.prototype.abort=function(){this.cleanup()},n.requestsCount=0,n.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",o):t.addEventListener&&t.addEventListener("beforeunload",o,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Fn={};(function(t){function e(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=l&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(u=r),n.call(this,t)}var r,n=un,o=ln,i=An,s=Wr,a=En,c=wn("engine.io-client:websocket"),l=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{r=nr}catch(t){}var u=l;u||"undefined"!=typeof window||(u=r),Fn=e,s(e,n),e.prototype.name="websocket",e.prototype.supportsBinary=!0,e.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new u(t,e):new u(t):new u(t,e,r)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},e.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},e.prototype.write=function(e){function r(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var i=e.length,s=0,a=i;s<a;s++)!function(e){o.encodePacket(e,n.supportsBinary,function(o){if(!n.usingBrowserWebSocket){var s={};e.options&&(s.compress=e.options.compress),n.perMessageDeflate&&("string"==typeof o?t.Buffer.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(s.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,s)}catch(t){c("websocket closed before onclose event")}--i||r()})}(e[s])},e.prototype.onClose=function(){n.prototype.onClose.call(this)},e.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},e.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||(t.b64=1),(t=i.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+t},e.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===e.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var jn={};(function(t){var e=dn,r=In,n=_n,o=Fn;jn.polling=function(o){var i=!1,s=!1,a=!1!==o.jsonp;if(t.location){var c="https:"===location.protocol,l=location.port;l||(l=c?443:80),i=o.hostname!==location.hostname||l!==o.port,s=o.secure!==c}if(o.xdomain=i,o.xscheme=s,"open"in new e(o)&&!o.forceJSONP)return new r(o);if(!a)throw new Error("JSONP disabled");return new n(o)},jn.websocket=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Nn=[].indexOf,Rn=function(t,e){if(Nn)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1},Bn=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Mn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Ln=function(t){var e=t,r=t.indexOf("["),n=t.indexOf("]");-1!=r&&-1!=n&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));for(var o=Bn.exec(t||""),i={},s=14;s--;)i[Mn[s]]=o[s]||"";return-1!=r&&-1!=n&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},zn={};(function(t){function e(r,n){if(!(this instanceof e))return new e(r,n);n=n||{},r&&"object"==typeof r&&(n=r,r=null),r?(r=c(r),n.hostname=r.host,n.secure="https"===r.protocol||"wss"===r.protocol,n.port=r.port,r.query&&(n.query=r.query)):n.host&&(n.hostname=c(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof t&&t;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function r(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var n=jn,o=Hr,i=wn("engine.io-client:socket"),s=Rn,a=ln,c=Ln,l=An;zn=e,e.priorWebsocketSuccess=!1,o(e.prototype),e.protocol=a.protocol,e.Socket=e,e.Transport=un,e.transports=jn,e.parser=ln,e.prototype.createTransport=function(t){i('creating transport "%s"',t);var e=r(this.query);e.EIO=a.protocol,e.transport=t;var o=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new n[t]({query:e,socket:this,agent:o.agent||this.agent,hostname:o.hostname||this.hostname,port:o.port||this.port,secure:o.secure||this.secure,path:o.path||this.path,forceJSONP:o.forceJSONP||this.forceJSONP,jsonp:o.jsonp||this.jsonp,forceBase64:o.forceBase64||this.forceBase64,enablesXDR:o.enablesXDR||this.enablesXDR,timestampRequests:o.timestampRequests||this.timestampRequests,timestampParam:o.timestampParam||this.timestampParam,policyPort:o.policyPort||this.policyPort,pfx:o.pfx||this.pfx,key:o.key||this.key,passphrase:o.passphrase||this.passphrase,cert:o.cert||this.cert,ca:o.ca||this.ca,ciphers:o.ciphers||this.ciphers,rejectUnauthorized:o.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:o.perMessageDeflate||this.perMessageDeflate,extraHeaders:o.extraHeaders||this.extraHeaders,forceNode:o.forceNode||this.forceNode,localAddress:o.localAddress||this.localAddress,requestTimeout:o.requestTimeout||this.requestTimeout,protocols:o.protocols||void 0})},e.prototype.open=function(){var t;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var r=this;return void setTimeout(function(){r.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},e.prototype.setTransport=function(t){i("setting transport %s",t.name);var e=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},e.prototype.probe=function(t){function r(){if(d.onlyBinaryUpgrades){var r=!this.supportsBinary&&d.transport.supportsBinary;p=p||r}p||(i('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(r){if(!p)if("pong"===r.type&&"probe"===r.data){if(i('probe transport "%s" pong',t),d.upgrading=!0,d.emit("upgrading",u),!u)return;e.priorWebsocketSuccess="websocket"===u.name,i('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){p||"closed"!==d.readyState&&(i("changing transport and sending upgrade packet"),l(),d.setTransport(u),u.send([{type:"upgrade"}]),d.emit("upgrade",u),u=null,d.upgrading=!1,d.flush())})}else{i('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=u.name,d.emit("upgradeError",n)}}))}function n(){p||(p=!0,l(),u.close(),u=null)}function o(e){var r=new Error("probe error: "+e);r.transport=u.name,n(),i('probe transport "%s" failed because of error: %s',t,e),d.emit("upgradeError",r)}function s(){o("transport closed")}function a(){o("socket closed")}function c(t){u&&t.name!==u.name&&(i('"%s" works - aborting "%s"',t.name,u.name),n())}function l(){u.removeListener("open",r),u.removeListener("error",o),u.removeListener("close",s),d.removeListener("close",a),d.removeListener("upgrading",c)}i('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),p=!1,d=this;e.priorWebsocketSuccess=!1,u.once("open",r),u.once("error",o),u.once("close",s),this.once("close",a),this.once("upgrading",c),u.open()},e.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var t=0,r=this.upgrades.length;t<r;t++)this.probe(this.upgrades[t])}},e.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else i('packet received with socket readyState "%s"',this.readyState)},e.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},e.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},e.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){i("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},e.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},e.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},e.prototype.write=e.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},e.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},e.prototype.close=function(){function t(){n.onClose("forced close"),i("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},e.prototype.onError=function(t){i("socket error %j",t),e.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},e.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){i('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}},e.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~s(this.transports,t[r])&&e.push(t[r]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var qn={};(qn=zn).parser=ln;var Hn={exports:{}};(function(t,e){(function(){"use strict";function r(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(){return function(){I(s)}}function i(){return function(){setTimeout(s,1)}}function s(){for(var t=0;t<R;t+=2)(0,W[t])(W[t+1]),W[t]=void 0,W[t+1]=void 0;R=0}function a(){}function c(){return new TypeError("You cannot resolve a promise with itself")}function l(){return new TypeError("A promises callback cannot return that same promise.")}function u(t){try{return t.then}catch(t){return K.error=t,K}}function p(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function d(t,e,r){B(function(t){var n=!1,o=p(r,e,function(r){n||(n=!0,e!==r?m(t,r):y(t,r))},function(e){n||(n=!0,b(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&o&&(n=!0,b(t,o))},t)}function h(t,e){e._state===$?y(t,e._result):e._state===Y?b(t,e._result):v(e,void 0,function(e){m(t,e)},function(e){b(t,e)})}function f(t,e,r){e.constructor===t.constructor&&r===V&&constructor.resolve===X?h(t,e):r===K?b(t,K.error):void 0===r?y(t,e):n(r)?d(t,e,r):y(t,e)}function m(t,e){t===e?b(t,c()):r(e)?f(t,e,u(e)):y(t,e)}function g(t){t._onerror&&t._onerror(t._result),w(t)}function y(t,e){t._state===J&&(t._result=e,t._state=$,0!==t._subscribers.length&&B(w,t))}function b(t,e){t._state===J&&(t._state=Y,t._result=e,B(g,t))}function v(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+$]=r,o[i+Y]=n,0===i&&t._state&&B(w,t)}function w(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n,o,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?E(r,n,o,i):o(i);t._subscribers.length=0}}function A(){this.error=null}function S(t,e){try{return t(e)}catch(t){return Z.error=t,Z}}function E(t,e,r,o){var i,s,a,c,u=n(r);if(u){if((i=S(r,o))===Z?(c=!0,s=i.error,i=null):a=!0,e===i)return void b(e,l())}else i=o,a=!0;e._state!==J||(u&&a?m(e,i):c?b(e,s):t===$?y(e,i):t===Y&&b(e,i))}function P(t,e){try{e(function(e){m(t,e)},function(e){b(t,e)})}catch(e){b(t,e)}}function x(){return Q++}function k(t){t[G]=Q++,t._state=void 0,t._result=void 0,t._subscribers=[]}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function T(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function C(t){this[G]=x(),this._result=this._state=void 0,this._subscribers=[],a!==t&&("function"!=typeof t&&U(),this instanceof C?P(this,t):T())}function D(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[G]||k(this.promise),N(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?y(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&y(this.promise,this._result))):b(this.promise,O())}function O(){return new Error("Array Methods must be provided an Array")}var _,I,F,j,N=_=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},R=0,B=function(t,e){W[R]=t,W[R+1]=e,2===(R+=2)&&(F?F(s):j())},M="undefined"!=typeof window?window:void 0,L=M||{},z=L.MutationObserver||L.WebKitMutationObserver,q="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),H="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,W=new Array(1e3);j=q?function(){t.nextTick(s)}:z?function(){var t=0,e=new z(s),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}():H?function(){var t=new MessageChannel;return t.port1.onmessage=s,function(){t.port2.postMessage(0)}}():void 0===M&&"function"==typeof require?function(){try{var t=nr;return I=t.runOnLoop||t.runOnContext,o()}catch(t){return i()}}():i();var V=function(t,e){var r=this,n=new this.constructor(a);void 0===n[G]&&k(n);var o=r._state;if(o){var i=arguments[o-1];B(function(){E(o,n,i,r._result)})}else v(r,n,t,e);return n},X=function(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(a);return m(r,t),r},G=Math.random().toString(36).substring(16),J=void 0,$=1,Y=2,K=new A,Z=new A,Q=0,tt=C;C.all=function(t){return new et(this,t).promise},C.race=function(t){var e=this;return new e(N(t)?function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)}:function(t,e){e(new TypeError("You must pass an array to race."))})},C.resolve=X,C.reject=function(t){var e=new this(a);return b(e,t),e},C._setScheduler=function(t){F=t},C._setAsap=function(t){B=t},C._asap=B,C.prototype={constructor:C,then:V,catch:function(t){return this.then(null,t)}};var et=D;D.prototype._enumerate=function(){for(var t=this.length,e=this._input,r=0;this._state===J&&r<t;r++)this._eachEntry(e[r],r)},D.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===X){var o=u(t);if(o===V&&t._state!==J)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===tt){var i=new r(a);f(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){e(t)}),e)}else this._willSettleAt(n(t),e)},D.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===J&&(this._remaining--,t===Y?b(n,r):this._result[e]=r),0===this._remaining&&y(n,this._result)},D.prototype._willSettleAt=function(t,e){var r=this;v(t,void 0,function(t){r._settledAt($,e,t)},function(t){r._settledAt(Y,e,t)})};var rt=function(){var t;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;r&&"[object Promise]"===Object.prototype.toString.call(r.resolve())&&!r.cast||(t.Promise=tt)},nt={Promise:tt,polyfill:rt};Hn.exports?Hn.exports=nt:void 0!==this&&(this.ES6Promise=nt),rt()}).call(this)}).call(this,jr,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),Hn=Hn.exports;var Wn=Object.prototype.hasOwnProperty,Vn=Object.prototype.toString,Xn=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===Vn.call(t)},Gn=function(t){if(!t||"[object Object]"!==Vn.call(t))return!1;var e=Wn.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Wn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var n;for(n in t);return void 0===n||Wn.call(t,n)},Jn={};Jn.__esModule=!0;var $n={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},Yn={button:!0,fieldset:!0,reset:!0,submit:!0},Kn={checkbox:!0,radio:!0},Zn=/^\s+|\s+$/g,Qn=Array.prototype.slice,to=Object.prototype.toString;B.getNamedFormElementData=M,Jn.default=B,Jn=Jn.default;var eo={};(function(t){function e(t,e,n){function o(e){var r=h,n=f;return h=f=void 0,S=e,g=t.apply(n,r)}function a(t){return S=t,y=setTimeout(u,e),E?o(t):g}function c(t){var r=e-(t-A);return P?v(r,m-(t-S)):r}function l(t){var r=t-A;return void 0===A||r>=e||r<0||P&&t-S>=m}function u(){var t=w();if(l(t))return p(t);y=setTimeout(u,c(t))}function p(t){return y=void 0,x&&h?o(t):(h=f=void 0,g)}function d(){var t=w(),r=l(t);if(h=arguments,f=this,A=t,r){if(void 0===y)return a(A);if(P)return y=setTimeout(u,e),o(A)}return void 0===y&&(y=setTimeout(u,e)),g}var h,f,m,g,y,A,S=0,E=!1,P=!1,x=!0;if("function"!=typeof t)throw new TypeError(s);return e=i(e)||0,r(n)&&(E=!!n.leading,m=(P="maxWait"in n)?b(i(n.maxWait)||0,e):m,x="trailing"in n?!!n.trailing:x),d.cancel=function(){void 0!==y&&clearTimeout(y),S=0,h=A=f=y=void 0},d.flush=function(){return void 0===y?g:p(w())},d}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function n(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||n(t)&&y.call(t)==c}function i(t){if("number"==typeof t)return t;if(o(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=p.test(t);return n||d.test(t)?h(t.slice(2),n?2:8):u.test(t)?a:+t}var s="Expected a function",a=NaN,c="[object Symbol]",l=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt,f="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,g=f||m||Function("return this")(),y=Object.prototype.toString,b=Math.max,v=Math.min,w=function(){return g.Date.now()};eo=function(t,n,o){var i=!0,a=!0;if("function"!=typeof t)throw new TypeError(s);return r(o)&&(i="leading"in o?!!o.leading:i,a="trailing"in o?!!o.trailing:a),e(t,n,{leading:i,maxWait:n,trailing:a})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ro={};z.prototype.match=function(t){var e,r,n=!0,o=this.parts,i=o.length;if("string"==typeof t||t instanceof String)if(this.hasWild||this.text==t){for(r=(t||"").split(this.separator),e=0;n&&e<i;e++)"*"!==o[e]&&(n=e<r.length&&o[e]===r[e]);n=n&&r}else n=!1;else if("function"==typeof t.splice)for(n=[],e=t.length;e--;)this.match(t[e])&&(n[n.length]=t[e]);else if("object"==typeof t){n={};for(var s in t)this.match(s)&&(n[s]=t[s])}return n},ro=function(t,e,r){var n=new z(t,r||/[\/\.]/);return void 0!==e?n.match(e):n};var no,oo,io=/[\/\+\.]/,so=function(t,e){function r(e){var r=ro(e,t,io);return r&&r.length>=2}return e?r(e.split(";")[0]):r},ao="http://www.w3.org/1999/xhtml",co="undefined"==typeof document?void 0:document,lo=co?co.body||co.createElement("div"):{},uo=oo=lo.hasAttributeNS?function(t,e,r){return t.hasAttributeNS(e,r)}:lo.hasAttribute?function(t,e,r){return t.hasAttribute(r)}:function(t,e,r){return null!=t.getAttributeNode(e,r)},po={OPTION:function(t,e){X(t,e,"selected")},INPUT:function(t,e){X(t,e,"checked"),X(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),uo(e,null,"value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var r=e.value;t.value!==r&&(t.value=r);var n=t.firstChild;if(n){var o=n.nodeValue;if(o==r||!r&&o==t.placeholder)return;n.nodeValue=r}},SELECT:function(t,e){if(!uo(e,null,"multiple")){for(var r=0,n=e.firstChild;n;){var o=n.nodeName;if(o&&"OPTION"===o.toUpperCase()){if(uo(n,null,"selected"))break;r++}n=n.nextSibling}t.selectedIndex=r}}},ho=1,fo=3,mo=8,go=function(t){return function(e,r,n){function o(t){p?p.push(t):p=[t]}function i(t,e){if(t.nodeType===ho)for(var r=t.firstChild;r;){var n=void 0;e&&(n=d(r))?o(n):(b(r),r.firstChild&&i(r,e)),r=r.nextSibling}}function s(t,e,r){!1!==y(t)&&(e&&e.removeChild(t),b(t),i(t,r))}function a(t){if(t.nodeType===ho)for(var e=t.firstChild;e;){var r=d(e);r&&(A[r]=e),a(e),e=e.nextSibling}}function c(t){f(t);for(var e=t.firstChild;e;){var r=e.nextSibling,n=d(e);if(n){var o=A[n];o&&H(e,o)&&(e.parentNode.replaceChild(o,e),l(o,e))}c(e),e=r}}function l(n,i,a){var u,p=d(i);if(p&&delete A[p],!r.isSameNode||!r.isSameNode(e)){if(!a){if(!1===m(n,i))return;if(t(n,i),g(n),!1===v(n,i))return}if("TEXTAREA"!==n.nodeName){var f,y,b,w,S=i.firstChild,E=n.firstChild;t:for(;S;){for(b=S.nextSibling,f=d(S);E;){if(y=E.nextSibling,S.isSameNode&&S.isSameNode(E)){S=b,E=y;continue t}u=d(E);var P=E.nodeType,x=void 0;if(P===S.nodeType&&(P===ho?(f?f!==u&&((w=A[f])?E.nextSibling===w?x=!1:(n.insertBefore(w,E),y=E.nextSibling,u?o(u):s(E,n,!0),E=w):x=!1):u&&(x=!1),(x=!1!==x&&H(E,S))&&l(E,S)):P!==fo&&P!=mo||(x=!0,E.nodeValue!==S.nodeValue&&(E.nodeValue=S.nodeValue))),x){S=b,E=y;continue t}u?o(u):s(E,n,!0),E=y}if(f&&(w=A[f])&&H(w,S))n.appendChild(w),l(w,S);else{var k=h(S);!1!==k&&(k&&(S=k),S.actualize&&(S=S.actualize(n.ownerDocument||co)),n.appendChild(S),c(S))}S=b,E=y}for(;E;)y=E.nextSibling,(u=d(E))?o(u):s(E,n,!0),E=y}var U=po[n.nodeName];U&&U(n,i)}}if(n||(n={}),"string"==typeof r)if("#document"===e.nodeName||"HTML"===e.nodeName){var u=r;(r=co.createElement("html")).innerHTML=u}else r=q(r);var p,d=n.getNodeKey||J,h=n.onBeforeNodeAdded||G,f=n.onNodeAdded||G,m=n.onBeforeElUpdated||G,g=n.onElUpdated||G,y=n.onBeforeNodeDiscarded||G,b=n.onNodeDiscarded||G,v=n.onBeforeElChildrenUpdated||G,w=!0===n.childrenOnly,A={};a(e);var S=e,E=S.nodeType,P=r.nodeType;if(!w)if(E===ho)P===ho?H(e,r)||(b(e),S=V(e,W(r.nodeName,r.namespaceURI))):S=r;else if(E===fo||E===mo){if(P===E)return S.nodeValue!==r.nodeValue&&(S.nodeValue=r.nodeValue),S;S=r}if(S===r)b(e);else if(l(S,r,w),p)for(var x=0,k=p.length;x<k;x++){var U=A[p[x]];U&&s(U,U.parentNode,!1)}return!w&&S!==e&&e.parentNode&&(S.actualize&&(S=S.actualize(e.ownerDocument||co)),e.parentNode.replaceChild(S,e)),S}}(function(t,e){var r,n,o,i,s,a=e.attributes;for(r=a.length-1;r>=0;--r)o=(n=a[r]).name,i=n.namespaceURI,s=n.value,i?(o=n.localName||o,t.getAttributeNS(i,o)!==s&&t.setAttributeNS(i,o,s)):t.getAttribute(o)!==s&&t.setAttribute(o,s);for(r=(a=t.attributes).length-1;r>=0;--r)!1!==(n=a[r]).specified&&(o=n.name,(i=n.namespaceURI)?(o=n.localName||o,uo(e,i,o)||t.removeAttributeNS(i,o)):uo(e,null,o)||t.removeAttribute(o))}),yo=function(){function t(t){var e=n[t]?n[t]:[],r=t.indexOf(":"),o=-1===r?[t]:[t.substring(0,r),t.substring(r+1)],i=Object.keys(n),s=0,a=i.length;for(s;s<a;s++){var c=i[s];if("*"===c&&(e=e.concat(n[c])),2===o.length&&o[0]===c){e=e.concat(n[c]);break}}return e}function e(t,e,r){var n=0,o=e.length;for(n;n<o&&e[n];n++)e[n].event=t,e[n].apply(e[n],r)}var r={},n=r._fns={};return r.emit=function(r,n,o,i,s,a,c){var l=t(r);l.length&&e(r,l,[n,o,i,s,a,c])},r.on=function(t,e){n[t]||(n[t]=[]),n[t].push(e)},r.once=function(t,e){function n(){e.apply(this,arguments),r.off(t,n)}this.on(t,n)},r.off=function(t,e){var r=[];if(t&&e){var n=this._fns[t],o=0,i=n.length;for(o;o<i;o++)n[o]!==e&&r.push(n[o])}r.length?this._fns[t]=r:delete this._fns[t]},r},bo=function(t,e){e||(e=window.requestAnimationFrame);var r=!1,n=null;return function(){null!==n||r||(r=!0,e(function(){r=!1;for(var e=n.length,o=new Array(e),i=0;i<e;i++)o[i]=n[i];t.apply(t,o),n=null})),n=arguments}},vo=function(t){if("number"!=typeof t||isNaN(t))throw new TypeError("Expected a number, got "+typeof t);var e=t<0,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var n=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),r.length-1);t=Number(t/Math.pow(1e3,n));var o=r[n];return t>=10||t%1==0?(e?"-":"")+t.toFixed(0)+" "+o:(e?"-":"")+t.toFixed(1)+" "+o},wo={},Ao=Object.prototype.hasOwnProperty;wo.stringify=function(t,e){var r=[];"string"!=typeof(e=e||"")&&(e="?");for(var n in t)Ao.call(t,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return r.length?e+r.join("&"):""},wo.parse=function(t){for(var e,r=/([^=?&]+)=?([^&]*)/g,n={};e=r.exec(t);n[$(e[1])]=$(e[2]));return n};var So=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},Eo={};!function(t,e){"object"==typeof Eo?Eo=e():t.resolveUrl=e()}(this,function(){return function(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var r=document.getElementsByTagName("head")[0];r.insertBefore(e,r.firstChild);for(var n,o=document.createElement("a"),i=1;i<t;i++)o.href=arguments[i],n=o.href,e.href=n;return r.removeChild(e),n}});var Po=function(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}},xo={};(function(t){xo=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ko={};(function(t){function e(t,r){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a],r);return s}if("object"==typeof t&&!(t instanceof Date)){s={};for(var c in t)s[c]=e(t[c],r);return s}return t}function r(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(n(t))for(var o=0;o<t.length;o++)t[o]=r(t[o],e);else if("object"==typeof t)for(var i in t)t[i]=r(t[i],e);return t}var n=an,o=xo,i=Object.prototype.toString,s="function"==typeof t.Blob||"[object BlobConstructor]"===i.call(t.Blob),a="function"==typeof t.File||"[object FileConstructor]"===i.call(t.File);ko.deconstructPacket=function(t){var r=[],n=t.data,o=t;return o.data=e(n,r),o.attachments=r.length,{packet:o,buffers:r}},ko.reconstructPacket=function(t,e){return t.data=r(t.data,e),t.attachments=void 0,t},ko.removeBlobs=function(t,e){function r(t,l,u){if(!t)return t;if(s&&t instanceof hi||a&&t instanceof File){i++;var p=new FileReader;p.onload=function(){u?u[l]=this.result:c=this.result,--i||e(c)},p.readAsArrayBuffer(t)}else if(n(t))for(var d=0;d<t.length;d++)r(t[d],d,t);else if("object"==typeof t&&!o(t))for(var h in t)r(t[h],h,t)}var i=0,c=t;r(c),i||e(c)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Uo={},To=Qr("socket.io-parser");Uo.protocol=4,Uo.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],Uo.CONNECT=0,Uo.DISCONNECT=1,Uo.EVENT=2,Uo.ACK=3,Uo.ERROR=4,Uo.BINARY_EVENT=5,Uo.BINARY_ACK=6,Uo.Encoder=Y,Uo.Decoder=Q,Y.prototype.encode=function(t,e){t.type!==Uo.EVENT&&t.type!==Uo.ACK||!cn(t.data)||(t.type=t.type===Uo.EVENT?Uo.BINARY_EVENT:Uo.BINARY_ACK),To("encoding packet %j",t),Uo.BINARY_EVENT===t.type||Uo.BINARY_ACK===t.type?Z(t,e):e([K(t)])},Hr(Q.prototype),Q.prototype.add=function(t){var e;if("string"==typeof t)e=tt(t),Uo.BINARY_EVENT===e.type||Uo.BINARY_ACK===e.type?(this.reconstructor=new rt(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!xo(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},Q.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},rt.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=ko.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},rt.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};var Co=function(t,e){for(var r=[],n=(e=e||0)||0;n<t.length;n++)r[n-e]=t[n];return r},Do={},Oo=Qr("socket.io-client:socket");Do=Do=ot;var _o={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},Io=Hr.prototype.emit;Hr(ot.prototype),ot.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[Po(t,"open",qr(this,"onopen")),Po(t,"packet",qr(this,"onpacket")),Po(t,"close",qr(this,"onclose"))]}},ot.prototype.open=ot.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},ot.prototype.send=function(){var t=Co(arguments);return t.unshift("message"),this.emit.apply(this,t),this},ot.prototype.emit=function(t){if(_o.hasOwnProperty(t))return Io.apply(this,arguments),this;var e=Co(arguments),r={type:Uo.EVENT,data:e};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(Oo("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},ot.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},ot.prototype.onopen=function(){Oo("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:Uo.CONNECT,query:this.query}):this.packet({type:Uo.CONNECT}))},ot.prototype.onclose=function(t){Oo("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},ot.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case Uo.CONNECT:this.onconnect();break;case Uo.EVENT:case Uo.BINARY_EVENT:this.onevent(t);break;case Uo.ACK:case Uo.BINARY_ACK:this.onack(t);break;case Uo.DISCONNECT:this.ondisconnect();break;case Uo.ERROR:this.emit("error",t.data)}},ot.prototype.onevent=function(t){var e=t.data||[];Oo("emitting event %j",e),null!=t.id&&(Oo("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?Io.apply(this,e):this.receiveBuffer.push(e)},ot.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=Co(arguments);Oo("sending ack %j",n),e.packet({type:Uo.ACK,id:t,data:n})}}},ot.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(Oo("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):Oo("bad ack %s",t.id)},ot.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},ot.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)Io.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},ot.prototype.ondisconnect=function(){Oo("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},ot.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},ot.prototype.close=ot.prototype.disconnect=function(){return this.connected&&(Oo("performing disconnect (%s)",this.nsp),this.packet({type:Uo.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},ot.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this};var Fo={},jo=Qr("socket.io-client:manager"),No=Object.prototype.hasOwnProperty;Fo=it,it.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)No.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},it.prototype.updateSocketIds=function(){for(var t in this.nsps)No.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},it.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},Hr(it.prototype),it.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},it.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},it.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},it.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},it.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},it.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},it.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},it.prototype.open=it.prototype.connect=function(t,e){if(jo("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;jo("opening %s",this.uri),this.engine=qn(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=Po(r,"open",function(){n.onopen(),t&&t()}),i=Po(r,"error",function(e){if(jo("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;jo("connect attempt will timeout after %d",s);var a=setTimeout(function(){jo("connect attempt timed out after %d",s),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(o),this.subs.push(i),this},it.prototype.onopen=function(){jo("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(Po(t,"data",qr(this,"ondata"))),this.subs.push(Po(t,"ping",qr(this,"onping"))),this.subs.push(Po(t,"pong",qr(this,"onpong"))),this.subs.push(Po(t,"error",qr(this,"onerror"))),this.subs.push(Po(t,"close",qr(this,"onclose"))),this.subs.push(Po(this.decoder,"decoded",qr(this,"ondecoded")))},it.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},it.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},it.prototype.ondata=function(t){this.decoder.add(t)},it.prototype.ondecoded=function(t){this.emit("packet",t)},it.prototype.onerror=function(t){jo("error",t),this.emitAll("error",t)},it.prototype.socket=function(t,e){function r(){~Rn(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[t];if(!n){n=new Do(this,t,e),this.nsps[t]=n;var o=this;n.on("connecting",r),n.on("connect",function(){n.id=o.generateId(t)}),this.autoConnect&&r()}return n},it.prototype.destroy=function(t){var e=Rn(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},it.prototype.packet=function(t){jo("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))},it.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},it.prototype.cleanup=function(){jo("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},it.prototype.close=it.prototype.disconnect=function(){jo("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},it.prototype.onclose=function(t){jo("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},it.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)jo("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();jo("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(jo("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(jo("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(jo("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},it.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};var Ro={};(function(t){var e=Ln,r=Qr("socket.io-client:url");Ro=function(n,o){var i=n;o=o||t.location,null==n&&(n=o.protocol+"//"+o.host),"string"==typeof n&&("/"===n.charAt(0)&&(n="/"===n.charAt(1)?o.protocol+n:o.host+n),/^(https?|wss?):\/\//.test(n)||(r("protocol-less url %s",n),n=void 0!==o?o.protocol+"//"+n:"https://"+n),r("parse %s",n),i=e(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var s=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port,i.href=i.protocol+"://"+s+(o&&o.port===i.port?"":":"+i.port),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Bo={},Mo=Qr("socket.io-client"),Lo=(Bo=Bo=st).managers={};Bo.protocol=Uo.protocol,Bo.connect=st,Bo.Manager=Fo,Bo.Socket=Do;var zo={};Object.defineProperty(zo,"__esModule",{value:!0}),zo.encode=function(t){return qo(unescape(encodeURIComponent(t)))};var qo=window.btoa;zo.isSupported="btoa"in window;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.newRequest=function(){return new window.XMLHttpRequest},Ho.resolveUrl=function(t,e){return(0,Wo.default)(t,e)};var Wo=function(t){return t&&t.__esModule?t:{default:t}}(Eo),Vo={},Xo=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.getSource=function(t){if("function"==typeof t.slice&&void 0!==t.size)return new Go(t);throw new Error("source object may only be an instance of File or Blob in this environment")};var Go=function(){function t(e){ct(this,t),this._file=e,this.size=e.size}return Xo(t,[{key:"slice",value:function(t,e){return this._file.slice(t,e)}},{key:"close",value:function(){}}]),t}(),Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.setItem=function(t,e){if($o)return localStorage.setItem(t,e)},Jo.getItem=function(t){if($o)return localStorage.getItem(t)},Jo.removeItem=function(t){if($o)return localStorage.removeItem(t)};var $o=!1;try{$o="localStorage"in window;var Yo="tusSupport";localStorage.setItem(Yo,localStorage.getItem(Yo))}catch(t){if(t.code!==t.SECURITY_ERR&&t.code!==t.QUOTA_EXCEEDED_ERR)throw t;$o=!1}Jo.canStoreURLs=$o;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});var Zo=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];lt(this,e);var o=ut(this,Object.getPrototypeOf(e).call(this,t.message));o.originalRequest=n,o.causingError=r;var i=t.message;return null!=r&&(i+=", caused by "+r.toString()),null!=n&&(i+=", originated from request (response code: "+n.status+", response text: "+n.responseText+")"),o.message=i,o}return pt(e,Error),e}();Ko.default=Zo;var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.default=function(t){return["tus",t.name,t.type,t.size,t.lastModified].join("-")};var ti={},ei=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(ti,"__esModule",{value:!0});var ri=ht(Qo),ni=ht(Ko),oi=ht(function t(){var e,r,n,o,i,s,a=arguments[0],c=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},c=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});c<l;++c)if(null!=(e=arguments[c]))for(r in e)n=a[r],a!==(o=e[r])&&(u&&o&&(Gn(o)||(i=Xn(o)))?(i?(i=!1,s=n&&Xn(n)?n:[]):s=n&&Gn(n)?n:{},a[r]=t(u,s,o)):void 0!==o&&(a[r]=o));return a}),ii=dt(zo),si=dt(Jo),ai={endpoint:"",fingerprint:ri.default,resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},ci=function(){function t(e,r){ft(this,t),this.options=(0,oi.default)(!0,{},ai,r),this.file=e,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}return ei(t,[{key:"start",value:function(){var t=this,e=this.file;if(e)if(this.options.endpoint){var r=this._source=(0,Vo.getSource)(e,this.options.chunkSize);if(null!=this.options.uploadSize){var n=+this.options.uploadSize;if(isNaN(n))throw new Error("tus: cannot convert `uploadSize` option into a number");this._size=n}else{if(null==(n=r.size))throw new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option");this._size=n}var o=this.options.retryDelays;if(null!=o){if("[object Array]"!==Object.prototype.toString.call(o))throw new Error("tus: the `retryDelays` option must either be an array or null");!function(){var e=t.options.onError;t.options.onError=function(r){t.options.onError=e,null!=t._offset&&t._offset>t._offsetBeforeRetry&&(t._retryAttempt=0);var n=!0;if("undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),t._retryAttempt<o.length&&null!=r.originalRequest&&!gt(r.originalRequest.status,400)&&n){var i=o[t._retryAttempt++];t._offsetBeforeRetry=t._offset,t.options.uploadUrl=t.url,t._retryTimeout=setTimeout(function(){t.start()},i)}else t._emitError(r)}}()}if(this._aborted=!1,null==this.url){if(null!=this.options.uploadUrl)return this.url=this.options.uploadUrl,void this._resumeUpload();if(this.options.resume){this._fingerprint=this.options.fingerprint(e);var i=si.getItem(this._fingerprint);if(null!=i)return this.url=i,void this._resumeUpload()}this._createUpload()}else this._resumeUpload()}else this._emitError(new Error("tus: no endpoint provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"abort",value:function(){null!==this._xhr&&(this._xhr.abort(),this._source.close(),this._aborted=!0),null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null)}},{key:"_emitXhrError",value:function(t,e,r){this._emitError(new ni.default(e,r,t))}},{key:"_emitError",value:function(t){if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,r)}},{key:"_setupXHR",value:function(t){this._xhr=t,t.setRequestHeader("Tus-Resumable","1.0.0");var e=this.options.headers;for(var r in e)t.setRequestHeader(r,e[r]);t.withCredentials=this.options.withCredentials}},{key:"_createUpload",value:function(){var t=this,e=(0,Ho.newRequest)();e.open("POST",this.options.endpoint,!0),e.onload=function(){gt(e.status,200)?(t.url=(0,Ho.resolveUrl)(t.options.endpoint,e.getResponseHeader("Location")),t.options.resume&&si.setItem(t._fingerprint,t.url),t._offset=0,t._startUpload()):t._emitXhrError(e,new Error("tus: unexpected response while creating upload"))},e.onerror=function(r){t._emitXhrError(e,new Error("tus: failed to create upload"),r)},this._setupXHR(e),e.setRequestHeader("Upload-Length",this._size);var r=mt(this.options.metadata);""!==r&&e.setRequestHeader("Upload-Metadata",r),e.send(null)}},{key:"_resumeUpload",value:function(){var t=this,e=(0,Ho.newRequest)();e.open("HEAD",this.url,!0),e.onload=function(){if(!gt(e.status,200))return t.options.resume&&gt(e.status,400)&&si.removeItem(t._fingerprint),423===e.status?void t._emitXhrError(e,new Error("tus: upload is currently locked; retry later")):(t.url=null,void t._createUpload());var r=parseInt(e.getResponseHeader("Upload-Offset"),10);if(isNaN(r))t._emitXhrError(e,new Error("tus: invalid or missing offset value"));else{var n=parseInt(e.getResponseHeader("Upload-Length"),10);if(isNaN(n))t._emitXhrError(e,new Error("tus: invalid or missing length value"));else{if(r===n)return t._emitProgress(n,n),void t._emitSuccess();t._offset=r,t._startUpload()}}},e.onerror=function(r){t._emitXhrError(e,new Error("tus: failed to resume upload"),r)},this._setupXHR(e),e.send(null)}},{key:"_startUpload",value:function(){var t=this;if(!this._aborted){var e=(0,Ho.newRequest)();this.options.overridePatchMethod?(e.open("POST",this.url,!0),e.setRequestHeader("X-HTTP-Method-Override","PATCH")):e.open("PATCH",this.url,!0),e.onload=function(){if(gt(e.status,200)){var r=parseInt(e.getResponseHeader("Upload-Offset"),10);if(isNaN(r))t._emitXhrError(e,new Error("tus: invalid or missing offset value"));else{if(t._emitProgress(r,t._size),t._emitChunkComplete(r-t._offset,r,t._size),t._offset=r,r==t._size)return t._emitSuccess(),void t._source.close();t._startUpload()}}else t._emitXhrError(e,new Error("tus: unexpected response while uploading chunk"))},e.onerror=function(r){t._aborted||t._emitXhrError(e,new Error("tus: failed to upload chunk at offset "+t._offset),r)},"upload"in e&&(e.upload.onprogress=function(e){e.lengthComputable&&t._emitProgress(r+e.loaded,t._size)}),this._setupXHR(e),e.setRequestHeader("Upload-Offset",this._offset),e.setRequestHeader("Content-Type","application/offset+octet-stream");var r=this._offset,n=this._offset+this.options.chunkSize;(n===1/0||n>this._size)&&(n=this._size),e.send(this._source.slice(r,n))}}}]),t}();ci.defaultOptions=ai,ti.default=ci;var li=function(t){return t&&t.__esModule?t:{default:t}}(ti),ui=li.default.defaultOptions;if("undefined"!=typeof window)var pi=window,di=pi.XMLHttpRequest,hi=pi.Blob,fi=di&&hi&&"function"==typeof hi.prototype.slice;else fi=!0;var mi={Upload:li.default,isSupported:fi,canStoreURLs:Jo.canStoreURLs,defaultOptions:ui},gi={};(function(t){"use strict";function e(e){var r,n={},i=typeof(e=e||t.location||{});if("blob:"===e.protocol)n=new o(unescape(e.pathname),{});else if("string"===i){n=new o(e,{});for(r in u)delete n[r]}else if("object"===i){for(r in e)r in u||(n[r]=e[r]);void 0===n.slashes&&(n.slashes=c.test(e.href))}return n}function r(t){var e=a.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function n(t,e){for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,o=r[n-1],i=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(i=!0),r.splice(n,1),s--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}function o(t,a,c){if(!(this instanceof o))return new o(t,a,c);var u,p,d,h,f,m,g=l.slice(),y=typeof a,b=this,v=0;for("object"!==y&&"string"!==y&&(c=a,a=null),c&&"function"!=typeof c&&(c=s.parse),a=e(a),u=!(p=r(t||"")).protocol&&!p.slashes,b.slashes=p.slashes||u&&a.slashes,b.protocol=p.protocol||a.protocol||"",t=p.rest,p.slashes||(g[2]=[/(.*)/,"pathname"]);v<g.length;v++)d=(h=g[v])[0],m=h[1],d!==d?b[m]=t:"string"==typeof d?~(f=t.indexOf(d))&&("number"==typeof h[2]?(b[m]=t.slice(0,f),t=t.slice(f+h[2])):(b[m]=t.slice(f),t=t.slice(0,f))):(f=d.exec(t))&&(b[m]=f[1],t=t.slice(0,f.index)),b[m]=b[m]||(u&&h[3]?a[m]||"":""),h[4]&&(b[m]=b[m].toLowerCase());c&&(b.query=c(b.query)),u&&a.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==a.pathname)&&(b.pathname=n(b.pathname,a.pathname)),i(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(h=b.auth.split(":"),b.username=h[0]||"",b.password=h[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}var i=So,s=wo,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};o.prototype={set:function(t,e,r){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||s.parse)(e)),n[t]=e;break;case"port":n[t]=e,i(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!r;break;case"pathname":n.pathname=e.length&&"/"!==e.charAt(0)?"/"+e:e;break;default:n[t]=e}for(var o=0;o<l.length;o++){var a=l[o];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(t){t&&"function"==typeof t||(t=s.stringify);var e,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(o+=r.hash),o}},o.extractProtocol=r,o.location=e,o.qs=s,gi=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return y.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function c(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function l(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function u(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(y.blob&&hi.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y.arrayBuffer&&y.blob&&v(t))this._bodyArrayBuffer=u(t.buffer),this._bodyInit=new hi([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new hi([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new hi([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t){var e=t.toUpperCase();return A.indexOf(e)>-1?e:t}function h(t,e){var r=(e=e||{}).body;if(t instanceof h){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=d(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function m(t){var e=new o;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var y={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new hi,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&b.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,n){t=e(t),n=r(n);var o=this.map[t];this.map[t]=o?o+","+n:n},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,n){this.map[e(t)]=r(n)},o.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},y.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},p.call(h.prototype),p.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];g.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=h,t.Response=g,t.fetch=function(t,e){return new Promise(function(r,n){var o=new h(t,e),i=new di;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:m(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new g(e,t))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&y.blob&&(i.responseType="blob"),o.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);var yi=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],bi={};(bi=kr).update=function(t,e,r){return r||(r={}),!1!==r.events&&(r.onBeforeElUpdated||(r.onBeforeElUpdated=function(t,e){for(var n=r.events||yi,o=0;o<n.length;o++){var i=n[o];e[i]?t[i]=e[i]:t[i]&&(t[i]=void 0)}var s=t.value,a=e.value;"INPUT"===t.nodeName&&"file"!==t.type||"SELECT"===t.nodeName?a?a!==s&&(t.value=a):e.value=t.value:"TEXTAREA"===t.nodeName&&null===e.getAttribute("value")&&(t.value=e.value)})),go(t,e,r)};var vi=function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];if(Array.isArray(o))t(e,o);else{if(("number"==typeof o||"boolean"==typeof o||o instanceof Date||o instanceof RegExp)&&(o=o.toString()),"string"==typeof o){if(e.lastChild&&"#text"===e.lastChild.nodeName){e.lastChild.nodeValue+=o;continue}o=document.createTextNode(o)}o&&o.nodeType&&e.appendChild(o)}}},wi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ai=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Si=function(t){return t.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join(" ")},Ei=function(){function t(e,r){yt(this,t),this.core=e,this.opts=r,this.provider=r.provider,this.id=this.provider,this.authProvider=r.authProvider||this.provider,this.name=this.opts.name||Si(this.id),this.onReceiveResponse=this.onReceiveResponse.bind(this)}return t.prototype.onReceiveResponse=function(t){var e=this.core.state.uppyServer||{},r=this.opts.host,n=t.headers;if(n.has("i-am")&&n.get("i-am")!==e[r]){var o;this.core.setState({uppyServer:wi({},e,(o={},o[r]=n.get("i-am"),o))})}return t},t.prototype.checkAuth=function(){return fetch(this.hostname+"/"+this.id+"/authorized",{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(this.onReceiveResponse).then(function(t){return t.json().then(function(t){return t.authenticated})})},t.prototype.authUrl=function(){return this.hostname+"/"+this.id+"/connect"},t.prototype.fileUrl=function(t){return this.hostname+"/"+this.id+"/get/"+t},t.prototype.list=function(t){return fetch(this.hostname+"/"+this.id+"/list/"+(t||""),{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(this.onReceiveResponse).then(function(t){return t.json()})},t.prototype.logout=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href;return fetch(this.hostname+"/"+this.id+"/logout?redirect="+t,{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})},Ai(t,[{key:"hostname",get:function(){var t=this.core.state.uppyServer||{},e=this.opts.host;return t[e]||e}}]),t}(),Pi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xi=function(){function t(e){bt(this,t);var r={locale:{strings:{},pluralize:function(t){return 1===t?0:1}}};this.opts=Pi({},r,e),this.locale=Pi({},r.locale,e.locale)}return t.prototype.interpolate=function(t,e){var r=String.prototype.replace,n=/\$/g;for(var o in e)if("_"!==o&&e.hasOwnProperty(o)){var i=e[o];"string"==typeof i&&(i=r.call(e[o],n,"$$$$")),t=r.call(t,new RegExp("%\\{"+o+"\\}","g"),i)}return t},t.prototype.translate=function(t,e){if(e&&e.smart_count){var r=this.locale.pluralize(e.smart_count);return this.interpolate(this.opts.locale.strings[t][r],e)}return this.interpolate(this.opts.locale.strings[t],e)},t}(),ki=function(){function t(e){var r=this;vt(this,t),this.queued=[],this.isOpen=!1,this.socket=new WebSocket(e.target),this.emitter=yo(),this.socket.onopen=function(t){for(r.isOpen=!0;r.queued.length>0&&r.isOpen;){var e=r.queued[0];r.send(e.action,e.payload),r.queued=r.queued.slice(1)}},this.socket.onclose=function(t){r.isOpen=!1},this._handleMessage=this._handleMessage.bind(this),this.socket.onmessage=this._handleMessage,this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this)}return t.prototype.close=function(){return this.socket.close()},t.prototype.send=function(t,e){this.isOpen?this.socket.send(JSON.stringify({action:t,payload:e})):this.queued.push({action:t,payload:e})},t.prototype.on=function(t,e){console.log(t),this.emitter.on(t,e)},t.prototype.emit=function(t,e){console.log(t),this.emitter.emit(t,e)},t.prototype.once=function(t,e){this.emitter.once(t,e)},t.prototype._handleMessage=function(t){try{var e=JSON.parse(t.data);console.log(e),this.emit(e.action,e.payload)}catch(t){console.log(t)}},t}(),Ui=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ti=function(t){var e=new Uint8Array(t);if(!(e&&e.length>1))return null;var r=function(t,r){r=Ui({offset:0},r);for(var n=0;n<t.length;n++)if(t[n]!==e[n+r.offset])return!1;return!0};if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(r([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(r([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((r([73,73,42,0])||r([77,77,0,42]))&&r([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r([73,73,42,0])||r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(r([80,75,3,4])&&r([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(r([80,75,3,4])&&r([77,69,84,65,45,73,78,70,47,109,111,122,105,108,108,97,46,114,115,97],{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(r([80,75])&&(3===e[2]||5===e[2]||7===e[2])&&(4===e[3]||6===e[3]||8===e[3]))return{ext:"zip",mime:"application/zip"};if(r([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(r([82,97,114,33,26,7])&&(0===e[6]||1===e[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([0,0,0])&&(24===e[3]||32===e[3])&&r([102,116,121,112],{offset:4})||r([51,103,112,53])||r([0,0,0,28,102,116,121,112,109,112,52,50])&&r([109,112,52,49,109,112,52,50,105,115,111,109],{offset:16})||r([0,0,0,28,102,116,121,112,105,115,111,109])||r([0,0,0,28,102,116,121,112,109,112,52,50,0,0,0,0]))return{ext:"mp4",mime:"video/mp4"};if(r([0,0,0,28,102,116,121,112,77,52,86]))return{ext:"m4v",mime:"video/x-m4v"};if(r([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(r([26,69,223,163])){var n=e.subarray(4,4100),o=n.findIndex(function(t,e,r){return 66===r[e]&&130===r[e+1]});if(o>=0){var i=o+3,s=function(t){return Array.from(t).every(function(t,e){return n[i+e]===t.charCodeAt(0)})};if(s("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(s("webm"))return{ext:"webm",mime:"video/webm"}}}return r([0,0,0,20,102,116,121,112,113,116,32,32])||r([102,114,101,101],{offset:4})||r([102,116,121,112,113,116,32,32],{offset:4})||r([109,100,97,116],{offset:4})||r([119,105,100,101],{offset:4})?{ext:"mov",mime:"video/quicktime"}:r([82,73,70,70])&&r([65,86,73],{offset:8})?{ext:"avi",mime:"video/x-msvideo"}:r([48,38,178,117,142,102,207,17,166,217])?{ext:"wmv",mime:"video/x-ms-wmv"}:r([0,0,1,186])?{ext:"mpg",mime:"video/mpeg"}:r([73,68,51])||r([255,251])?{ext:"mp3",mime:"audio/mpeg"}:r([102,116,121,112,77,52,65],{offset:4})||r([77,52,65,32])?{ext:"m4a",mime:"audio/m4a"}:r([79,112,117,115,72,101,97,100],{offset:28})?{ext:"opus",mime:"audio/opus"}:r([79,103,103,83])?{ext:"ogg",mime:"audio/ogg"}:r([102,76,97,67])?{ext:"flac",mime:"audio/x-flac"}:r([82,73,70,70])&&r([87,65,86,69],{offset:8})?{ext:"wav",mime:"audio/x-wav"}:r([35,33,65,77,82,10])?{ext:"amr",mime:"audio/amr"}:r([37,80,68,70])?{ext:"pdf",mime:"application/pdf"}:r([77,90])?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||!r([87,83],{offset:1})?r([123,92,114,116,102])?{ext:"rtf",mime:"application/rtf"}:r([0,97,115,109])?{ext:"wasm",mime:"application/wasm"}:r([119,79,70,70])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4}))?{ext:"woff",mime:"font/woff"}:r([119,79,70,50])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4}))?{ext:"woff2",mime:"font/woff2"}:r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8}))?{ext:"eot",mime:"application/octet-stream"}:r([0,1,0,0,0])?{ext:"ttf",mime:"font/ttf"}:r([79,84,84,79,0])?{ext:"otf",mime:"font/otf"}:r([0,0,1,0])?{ext:"ico",mime:"image/x-icon"}:r([70,76,86,1])?{ext:"flv",mime:"video/x-flv"}:r([37,33])?{ext:"ps",mime:"application/postscript"}:r([253,55,122,88,90,0])?{ext:"xz",mime:"application/x-xz"}:r([83,81,76,105])?{ext:"sqlite",mime:"application/x-sqlite3"}:r([78,69,83,26])?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:r([67,114,50,52])?{ext:"crx",mime:"application/x-google-chrome-extension"}:r([77,83,67,70])||r([73,83,99,40])?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:r([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121])?{ext:"deb",mime:"application/x-deb"}:r([33,60,97,114,99,104,62])?{ext:"ar",mime:"application/x-unix-archive"}:r([237,171,238,219])?{ext:"rpm",mime:"application/x-rpm"}:r([31,160])||r([31,157])?{ext:"Z",mime:"application/x-compress"}:r([76,90,73,80])?{ext:"lz",mime:"application/x-lzip"}:r([208,207,17,224,161,177,26,225])?{ext:"msi",mime:"application/x-msi"}:r([6,14,43,52,2,5,1,1,13,1,2,1,1,2])?{ext:"mxf",mime:"application/mxf"}:r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196}))?{ext:"mts",mime:"video/mp2t"}:r([66,76,69,78,68,69,82])?{ext:"blend",mime:"application/x-blender"}:r([66,80,71,251])?{ext:"bpg",mime:"image/bpg"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}},Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di="undefined"==typeof Promise?Hn.Promise:Promise,Oi={"video/ogg":"ogv","audio/ogg":"ogg","video/webm":"webm","audio/webm":"webm","video/mp4":"mp4","audio/mp3":"mp3"},_i={generateFileID:function(t){return["uppy",t.name?t.name.toLowerCase().replace(/[^A-Z0-9]/gi,""):"",t.type,t.data.size,t.data.lastModified].filter(function(t){return t}).join("-")},toArray:function(t){return Array.prototype.slice.call(t||[],0)},getTimeStamp:function(){var t=new Date;return At(t.getHours().toString())+":"+At(t.getMinutes().toString())+":"+At(t.getSeconds().toString())},runPromiseSequence:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o=Promise.resolve();return t.forEach(function(t){o=o.then(function(){return t.apply(void 0,r)})}),o},isTouchDevice:function(){return"ontouchstart"in window||navigator.maxTouchPoints},getFileNameAndExtension:Et,truncateString:function(t,e){return t.length>e?t.substr(0,e/2)+"..."+t.substr(t.length-e/4,t.length):t},getFileTypeExtension:function(t){return Oi[t]||null},getFileType:function(t){var e={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml"},r=t.name?Et(t.name).extension:null;if(t.isRemote){var n=t.type?t.type:e[r];return Promise.resolve(n)}return St(t.data.slice(0,4100)).then(function(n){var o=Ti(n);return o&&o.mime?o.mime:t.type?t.type:r&&e[r]?e[r]:null}).catch(function(){return null})},getArrayBuffer:St,isPreviewSupported:function(t){if(!t)return!1;var e=t.split("/")[1];return!!/^(jpeg|gif|png|svg|svg\+xml|bmp)$/.test(e)},isObjectURL:function(t){return 0===t.indexOf("blob:")},createThumbnail:function(t,e){var r=URL.createObjectURL(t.data);return new Di(function(t,e){var n=new Image;n.src=r,n.onload=function(){URL.revokeObjectURL(r),t(n)},n.onerror=function(){URL.revokeObjectURL(r),e(new Error("Could not create thumbnail"))}}).then(function(t){var r=Pt(t,e);return Ut(xt(t,e,r),"image/png")}).then(function(t){return URL.createObjectURL(t)})},secondsToTime:wt,dataURItoBlob:Tt,dataURItoFile:function(t,e){return Tt(t,e,!0)},canvasToBlob:Ut,getSpeed:Ct,getBytesRemaining:Dt,getETA:function(t){if(!t.bytesUploaded)return 0;var e=Ct(t),r=Dt(t);return Math.round(r/e*10)/10},copyToClipboard:function(t,e){return e=e||"Copy the URL below",new Di(function(r){var n=document.createElement("textarea");n.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),n.value=t,document.body.appendChild(n),n.select();var o=function(){document.body.removeChild(n),window.prompt(e,t),r()};try{return document.execCommand("copy")?(document.body.removeChild(n),r()):o()}catch(t){return document.body.removeChild(n),o()}})},prettyETA:function(t){var e=wt(t),r=e.hours?e.hours+"h ":"",n=e.hours?("0"+e.minutes).substr(-2):e.minutes;return r+(n?n+"m ":"")+(n?("0"+e.seconds).substr(-2):e.seconds)+"s"},findDOMElement:function(t){return"string"==typeof t?document.querySelector(t):"object"===(void 0===t?"undefined":Ci(t))&&Ot(t)?t:void 0},findAllDOMElements:function(t){if("string"==typeof t){var e=[].slice.call(document.querySelectorAll(t));return e.length>0?e:null}if("object"===(void 0===t?"undefined":Ci(t))&&Ot(t))return[t]},getSocketHost:function(t){var e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/.exec(t)[1];return("https:"===location.protocol?"wss":"ws")+"://"+e},emitSocketProgress:eo(function(t,e,r){var n=e.progress,o=e.bytesUploaded,i=e.bytesTotal;n&&(t.core.log("Upload progress: "+n),t.core.emitter.emit("core:upload-progress",{uploader:t,id:r.id,bytesUploaded:o,bytesTotal:i}))},300,{leading:!0,trailing:!0}),settle:function(t){function e(t){n.push(t)}function r(t){o.push(t)}var n=[],o=[];return Promise.all(t.map(function(t){return t.then(e,r)})).then(function(){return{successful:n,failed:o}})},limitPromises:function(t){function e(){r--;var t=n.shift();t&&t()}var r=0,n=[];return function(o){return function(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];var c=function(){r++;var t=o.apply(void 0,s);return t.then(e,e),t};return r>=t?new Di(function(t,e){n.push(function(){c().then(t,e)})}):c()}}}},Ii={};(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=_i,i=xi,s=ki,a=yo,c=Vr,l=eo,u=vo,p=so,d=function(){function d(r){e(this,d);var o={strings:{youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"This file exceeds maximum allowed size of",youCanOnlyUploadFileTypes:"You can only upload:",uppyServerError:"Connection with Uppy Server failed"}},s={id:"uppy",autoProceed:!0,debug:!1,restrictions:{maxFileSize:!1,maxNumberOfFiles:!1,minNumberOfFiles:!1,allowedFileTypes:!1},meta:{},onBeforeFileAdded:function(t,e){return Promise.resolve()},onBeforeUpload:function(t,e){return Promise.resolve()},locale:o,thumbnailGeneration:!0};this.opts=n({},s,r),this.locale=n({},o,this.opts.locale),this.locale.strings=n({},o.strings,this.opts.locale.strings),this.translator=new i({locale:this.locale}),this.i18n=this.translator.translate.bind(this.translator),this.plugins={},this.translator=new i({locale:this.opts.locale}),this.i18n=this.translator.translate.bind(this.translator),this.getState=this.getState.bind(this),this.getPlugin=this.getPlugin.bind(this),this.updateMeta=this.updateMeta.bind(this),this.initSocket=this.initSocket.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.hideInfo=this.hideInfo.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.pauseResume=this.pauseResume.bind(this),this.calculateProgress=this.calculateProgress.bind(this),this.resetProgress=this.resetProgress.bind(this),this.pauseAll=this.pauseAll.bind(this),this.resumeAll=this.resumeAll.bind(this),this.retryAll=this.retryAll.bind(this),this.cancelAll=this.cancelAll.bind(this),this.retryUpload=this.retryUpload.bind(this),this.emitter=a(),this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.state={plugins:{},files:{},capabilities:{resumableUploads:!1},totalProgress:0,meta:n({},this.opts.meta),info:{isHidden:!0,type:"info",message:""}},this.opts.debug&&(t.uppyLog="",t[this.opts.id]=this)}return d.prototype.updateAll=function(t){this.iteratePlugins(function(e){e.update(t)})},d.prototype.setState=function(t){var e=n({},this.state),r=n({},this.state,t);this.state=r,this.emit("core:state-update",e,r,t),this.updateAll(this.state)},d.prototype.getState=function(){return this.state},d.prototype.resetProgress=function(){var t={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:!1},e=n({},this.state.files),r={};Object.keys(e).forEach(function(o){var i=n({},e[o]);i.progress=n({},i.progress,t),r[o]=i}),this.setState({files:r,totalProgress:0}),this.emit("core:reset-progress")},d.prototype.addPreProcessor=function(t){this.preProcessors.push(t)},d.prototype.removePreProcessor=function(t){var e=this.preProcessors.indexOf(t);-1!==e&&this.preProcessors.splice(e,1)},d.prototype.addPostProcessor=function(t){this.postProcessors.push(t)},d.prototype.removePostProcessor=function(t){var e=this.postProcessors.indexOf(t);-1!==e&&this.postProcessors.splice(e,1)},d.prototype.addUploader=function(t){this.uploaders.push(t)},d.prototype.removeUploader=function(t){var e=this.uploaders.indexOf(t);-1!==e&&this.uploaders.splice(e,1)},d.prototype.setMeta=function(t){var e=n({},this.state.meta,t);this.log("Adding metadata:"),this.log(t),this.setState({meta:e})},d.prototype.updateMeta=function(t,e){var r=n({},this.state.files);if(r[e]){var o=n({},r[e].meta,t);r[e]=n({},r[e],{meta:o}),this.setState({files:r})}else this.log("Was trying to set metadata for a file that’s not with us anymore: ",e)},d.prototype.checkMinNumberOfFiles=function(){var t=this.opts.restrictions.minNumberOfFiles;return!(Object.keys(this.state.files).length<t&&(this.info(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:t}),"error",5e3),1))},d.prototype.checkRestrictions=function(t){var e=this.opts.restrictions,r=e.maxFileSize,n=e.maxNumberOfFiles,o=e.allowedFileTypes;if(n&&Object.keys(this.state.files).length+1>n)return this.info(""+this.i18n("youCanOnlyUploadX",{smart_count:n}),"error",5e3),!1;if(o&&!(o.filter(p(t.type)).length>0)){var i=o.join(", ");return this.info(this.i18n("youCanOnlyUploadFileTypes")+" "+i,"error",5e3),!1}return!(r&&t.data.size>r&&(this.info(this.i18n("exceedsSize")+" "+u(r),"error",5e3),1))},d.prototype.addFile=function(t){var e=this;return Promise.resolve().then(function(){return e.opts.onBeforeFileAdded(t,e.getState().files)}).catch(function(t){var n="object"===(void 0===t?"undefined":r(t))?t.message:t;return e.info(n,"error",5e3),Promise.reject(new Error("onBeforeFileAdded: "+n))}).then(function(){return o.getFileType(t).then(function(r){var i=n({},e.state.files),s=void 0;s=t.name?t.name:"image"===r.split("/")[0]?r.split("/")[0]+"."+r.split("/")[1]:"noname";var a=o.getFileNameAndExtension(s).extension,c=t.isRemote||!1,l=o.generateFileID(t),u={source:t.source||"",id:l,name:s,extension:a||"",meta:n({},e.getState().meta,{name:s,type:r}),type:r,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:t.data.size||0,uploadComplete:!1,uploadStarted:!1},size:t.data.size||"N/A",isRemote:c,remote:t.remote||"",preview:t.preview};if(!e.checkRestrictions(u))return Promise.reject(new Error("File not allowed"));i[l]=u,e.setState({files:i}),e.emit("core:file-added",u),e.log("Added file: "+s+", "+l+", mime type: "+r),e.opts.autoProceed&&!e.scheduledAutoProceed&&(e.scheduledAutoProceed=setTimeout(function(){e.scheduledAutoProceed=null,e.upload().catch(function(t){console.error(t.stack||t.message||t)})},4))})})},d.prototype.removeFile=function(t){var e=n({},this.getState().files),r=e[t];delete e[t],this.setState({files:e}),this.calculateTotalProgress(),this.emit("core:file-removed",t),r.preview&&o.isObjectURL(r.preview)&&URL.revokeObjectURL(r.preview),this.log("Removed file: "+t)},d.prototype.getFile=function(t){return this.getState().files[t]},d.prototype.generatePreview=function(t){var e=this;o.isPreviewSupported(t.type)&&!t.isRemote&&(!0===this.opts.thumbnailGeneration?o.createThumbnail(t,200):Promise.resolve(URL.createObjectURL(t.data))).then(function(r){e.setPreviewURL(t.id,r)}).catch(function(t){console.warn(t.stack||t.message)})},d.prototype.setPreviewURL=function(t,e){var r,o=this.state.files;this.setState({files:n({},o,(r={},r[t]=n({},o[t],{preview:e}),r))})},d.prototype.pauseResume=function(t){var e=n({},this.getState().files);if(!e[t].uploadComplete){var r=!e[t].isPaused,o=n({},e[t],{isPaused:r});return e[t]=o,this.setState({files:e}),this.emit("core:upload-pause",t,r),r}},d.prototype.pauseAll=function(){var t=n({},this.getState().files);Object.keys(t).filter(function(e){return!t[e].progress.uploadComplete&&t[e].progress.uploadStarted}).forEach(function(e){var r=n({},t[e],{isPaused:!0});t[e]=r}),this.setState({files:t}),this.emit("core:pause-all")},d.prototype.resumeAll=function(){var t=n({},this.getState().files);Object.keys(t).filter(function(e){return!t[e].progress.uploadComplete&&t[e].progress.uploadStarted}).forEach(function(e){var r=n({},t[e],{isPaused:!1,error:null});t[e]=r}),this.setState({files:t}),this.emit("core:resume-all")},d.prototype.retryAll=function(){var t=n({},this.getState().files),e=Object.keys(t).filter(function(e){return t[e].error});e.forEach(function(e){var r=n({},t[e],{isPaused:!1,error:null});t[e]=r}),this.setState({files:t,error:null}),this.emit("core:retry-all",e);var r=this.createUpload(e);return this.runUpload(r)},d.prototype.retryUpload=function(t){var e=n({},this.state.files),r=n({},e[t],{error:null,isPaused:!1});e[t]=r,this.setState({files:e}),this.emit("core:upload-retry",t);var o=this.createUpload([t]);return this.runUpload(o)},d.prototype.reset=function(){this.cancelAll()},d.prototype.cancelAll=function(){this.emit("core:cancel-all"),this.setState({files:{},totalProgress:0})},d.prototype.calculateProgress=function(t){var e=t.id,r=n({},this.getState().files);if(r[e]){var o=n({},r[e],n({},{progress:n({},r[e].progress,{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:Math.floor((t.bytesUploaded/t.bytesTotal*100).toFixed(2))})}));r[t.id]=o,this.setState({files:r}),this.calculateTotalProgress()}else this.log("Trying to set progress for a file that’s not with us anymore: ",e)},d.prototype.calculateTotalProgress=function(){var t=n({},this.getState().files),e=Object.keys(t).filter(function(e){return t[e].progress.uploadStarted}),r=100*e.length,o=0;e.forEach(function(e){o+=t[e].progress.percentage});var i=0===r?0:Math.floor((100*o/r).toFixed(2));this.setState({totalProgress:i})},d.prototype.actions=function(){var t=this;this.on("core:error",function(e){t.setState({error:e.message})}),this.on("core:upload-error",function(e,o){var i=n({},t.state.files),s=n({},i[e],{error:o.message});i[e]=s,t.setState({files:i,error:o.message});var a="Failed to upload "+t.state.files[e].name;"object"===(void 0===o?"undefined":r(o))&&o.message&&(a={message:a,details:o.message}),t.info(a,"error",5e3)}),this.on("core:upload",function(){t.setState({error:null})}),this.on("core:file-add",function(e){t.addFile(e)}),this.on("core:file-added",function(e){t.generatePreview(e)}),this.on("core:file-remove",function(e){t.removeFile(e)}),this.on("core:upload-started",function(e,r){var o=n({},t.getState().files),i=n({},o[e],n({},{progress:n({},o[e].progress,{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0})}));o[e]=i,t.setState({files:o})});var e=l(this.calculateProgress,100,{leading:!0,trailing:!1});this.on("core:upload-progress",function(t){e(t)}),this.on("core:upload-success",function(e,r,o){var i=n({},t.getState().files),s=n({},i[e],{progress:n({},i[e].progress,{uploadComplete:!0,percentage:100}),uploadURL:o,isPaused:!1});i[e]=s,t.setState({files:i}),t.calculateTotalProgress()}),this.on("core:update-meta",function(e,r){t.updateMeta(e,r)}),this.on("core:preprocess-progress",function(e,r){var o=n({},t.getState().files);o[e]=n({},o[e],{progress:n({},o[e].progress,{preprocess:r})}),t.setState({files:o})}),this.on("core:preprocess-complete",function(e){var r=n({},t.getState().files);r[e]=n({},r[e],{progress:n({},r[e].progress)}),delete r[e].progress.preprocess,t.setState({files:r})}),this.on("core:postprocess-progress",function(e,r){var o=n({},t.getState().files);o[e]=n({},o[e],{progress:n({},o[e].progress,{postprocess:r})}),t.setState({files:o})}),this.on("core:postprocess-complete",function(e){var r=n({},t.getState().files);r[e]=n({},r[e],{progress:n({},r[e].progress)}),delete r[e].progress.postprocess,t.setState({files:r})}),"undefined"!=typeof window&&(window.addEventListener("online",function(){return t.updateOnlineStatus()}),window.addEventListener("offline",function(){return t.updateOnlineStatus()}),setTimeout(function(){return t.updateOnlineStatus()},3e3))},d.prototype.updateOnlineStatus=function(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info("Connected!","success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info("No internet connection","error",0),this.wasOffline=!0)},d.prototype.getID=function(){return this.opts.id},d.prototype.use=function(t,e){if("function"!=typeof t){var n="Expected a plugin class, but got "+(null===t?"null":void 0===t?"undefined":r(t))+". Please verify that the plugin was imported and spelled correctly.";throw new TypeError(n)}var o=new t(this,e),i=o.id;if(this.plugins[o.type]=this.plugins[o.type]||[],!i)throw new Error("Your plugin must have an id");if(!o.type)throw new Error("Your plugin must have a type");var s=this.getPlugin(i);if(s){var a="Already found a plugin named '"+s.id+"'.\n        Tried to use: '"+i+"'.\n        Uppy is currently limited to running one of every plugin.\n        Share your use case with us over at\n        https://github.com/transloadit/uppy/issues/\n        if you want us to reconsider.";throw new Error(a)}return this.plugins[o.type].push(o),o.install(),this},d.prototype.getPlugin=function(t){var e=!1;return this.iteratePlugins(function(r){if(r.id===t)return e=r,!1}),e},d.prototype.iteratePlugins=function(t){var e=this;Object.keys(this.plugins).forEach(function(r){e.plugins[r].forEach(t)})},d.prototype.removePlugin=function(t){var e=this.plugins[t.type];t.uninstall&&t.uninstall();var r=e.indexOf(t);-1!==r&&e.splice(r,1)},d.prototype.close=function(){this.reset(),this.withDevTools&&this.devToolsUnsubscribe(),this.iteratePlugins(function(t){t.uninstall()}),this.socket&&this.socket.close()},d.prototype.info=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o="object"===(void 0===t?"undefined":r(t));this.setState({info:{isHidden:!1,type:e,message:o?t.message:t,details:o?t.details:null}}),this.emit("core:info-visible"),window.clearTimeout(this.infoTimeoutID),this.infoTimeoutID=0!==n?setTimeout(this.hideInfo,n):void 0},d.prototype.hideInfo=function(){var t=n({},this.state.info,{isHidden:!0});this.setState({info:t}),this.emit("core:info-hidden")},d.prototype.log=function(e,r){if(this.opts.debug){var n="[Uppy] ["+o.getTimeStamp()+"] "+e;t.uppyLog=t.uppyLog+"\nDEBUG LOG: "+e,"error"!==r?"warning"!==r?e===""+e?console.log(n):(n="[Uppy] ["+o.getTimeStamp()+"]",console.log(n),console.dir(e)):console.warn(n):console.error(n)}},d.prototype.initSocket=function(t){return this.socket||(this.socket=new s(t)),this.socket},d.prototype.run=function(){return this.log("Core is run, initializing actions..."),this.actions(),this},d.prototype.restore=function(t){return this.log('Core: attempting to restore upload "'+t+'"'),this.state.currentUploads[t]?this.runUpload(t):(this.removeUpload(t),Promise.reject(new Error("Nonexistent upload")))},d.prototype.createUpload=function(t){var e,r=c();return this.emit("core:upload",{id:r,fileIDs:t}),this.setState({currentUploads:n({},this.state.currentUploads,(e={},e[r]={fileIDs:t,step:0},e))}),r},d.prototype.removeUpload=function(t){var e=n({},this.state.currentUploads);delete e[t],this.setState({currentUploads:e})},d.prototype.runUpload=function(t){var e=this,r=this.state.currentUploads[t],o=r.fileIDs,i=r.step,s=[].concat(this.preProcessors,this.uploaders,this.postProcessors),a=Promise.resolve();return s.forEach(function(r,s){s<i||(a=a.then(function(){var i,a=n({},e.state.currentUploads[t],{step:s});return e.setState({currentUploads:n({},e.state.currentUploads,(i={},i[t]=a,i))}),r(o,t)}))}),a.catch(function(r){e.emit("core:error",r),e.removeUpload(t)}),a.then(function(){var r=o.map(function(t){return e.getFile(t)}),n=r.filter(function(t){return!t.error}),i=r.filter(function(t){return t.error});return e.emit("core:complete",{successful:n,failed:i}),e.emit("core:success",o),e.removeUpload(t),{successful:n,failed:i}})},d.prototype.upload=function(){var t=this;return this.plugins.uploader||this.log("No uploader type plugins are used","warning"),this.checkMinNumberOfFiles()?Promise.resolve().then(function(){return t.opts.onBeforeUpload(t.state.files)}).catch(function(e){var n="object"===(void 0===e?"undefined":r(e))?e.message:e;return t.info(n,"error",5e3),Promise.reject(new Error("onBeforeUpload: "+n))}).then(function(){var e=[];Object.keys(t.state.files).forEach(function(r){var n=t.getFile(r);n.progress.uploadStarted&&!n.isRemote||e.push(n.id)});var r=t.createUpload(e);return t.runUpload(r)}):Promise.reject(new Error("Minimum number of files has not been reached"))},d}();(Ii=function(t){return new d(t)}).Uppy=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Fi=Ii,ji=function(t){var e,r;return(r=document.createElement("div")).setAttribute("class","UppyProvider-loading"),vi(r,[" ",(e=document.createElement("span"),e.textContent="Loading...",e)," "]),r},Ni=function(t){var e,r,n=t.demo?(e=document.createElement("button"),e.onclick=t.handleDemoAuth,e.setAttribute("class","UppyProvider-authBtnDemo"),e.textContent="Proceed with Demo Account",e):null;return Sr(((r=document.createElement("div")).setAttribute("style","height: 100%;"),vi(r,[" ",t.checkAuthInProgress?ji():function(){var e,r,o,i;return(i=document.createElement("div")).setAttribute("class","UppyProvider-auth"),vi(i,[" ",((r=document.createElement("h1")).setAttribute("class","UppyProvider-authTitle"),vi(r,["Please authenticate with ",((e=document.createElement("span")).setAttribute("class","UppyProvider-authTitleName"),vi(e,[t.pluginName]),e),document.createElement("br")," to select files"]),r)," ",((o=document.createElement("button")).setAttribute("type","button"),o.onclick=t.handleAuth,o.setAttribute("class","UppyProvider-authBtn"),o.textContent="Authenticate",o)," ",n," "]),i}()," "]),r),t.checkAuth,null,"auth"+t.pluginName)},Ri=function(t){var e,r;return r=document.createElement("li"),vi(r,[" ",((e=document.createElement("button")).setAttribute("type","button"),e.onclick=t.getFolder,vi(e,[t.title]),e)," "]),r},Bi=function(t){var e;return(e=document.createElement("ul")).setAttribute("class","UppyProvider-breadcrumbs"),vi(e,[" ",t.directories.map(function(e,r){return Ri({getFolder:function(){return t.getFolder(e.id)},title:0===r?t.title:e.title})})," "]),e},Mi=function(t){var e;return(e=document.createElement("td")).setAttribute("class","BrowserTable-rowColumn BrowserTable-column"),vi(e,[" ",t.getItemIcon()," ",t.value," "]),e},Li=function(t){var e,r,n,o=t.active?"BrowserTable-row is-active":"BrowserTable-row";return n=document.createElement("tr"),n.onclick=t.handleClick,n.onkeydown=function(e){13===e.keyCode&&t.handleClick()},n.setAttribute("role","option"),n.setAttribute("tabindex","0"),n.setAttribute("class",""+String(o)),vi(n,[" ",(r=document.createElement("td"),r.onclick=t.handleCheckboxClick,r.setAttribute("class","BrowserTable-column"),vi(r,[" ",((e=document.createElement("input")).setAttribute("type","checkbox"),t.isChecked&&e.setAttribute("checked","checked"),t.isDisabled&&e.setAttribute("disabled","disabled"),e)," "]),r)," ",Mi({getItemIcon:t.getItemIcon,value:t.title})," "]),n},zi=function(t){var e,r;return r=document.createElement("table"),r.onscroll=t.handleScroll,r.setAttribute("class","BrowserTable"),vi(r,[" ",((e=document.createElement("tbody")).setAttribute("role","listbox"),e.setAttribute("aria-label","List of files from "+String(t.title)),vi(e,[" ",t.folders.map(function(e){var r=!1,n=t.isChecked(e);return n&&(r=n.loading),Li({title:t.getItemName(e),active:t.activeRow(e),getItemIcon:function(){return t.getItemIcon(e)},handleClick:function(){return t.handleFolderClick(e)},isDisabled:r,isChecked:n,handleCheckboxClick:function(r){return t.toggleCheckbox(r,e)},columns:t.columns})})," ",t.files.map(function(e){return Li({title:t.getItemName(e),active:t.activeRow(e),getItemIcon:function(){return t.getItemIcon(e)},handleClick:function(){return t.handleFileClick(e)},isDisabled:!1,isChecked:t.isChecked(e),handleCheckboxClick:function(r){return t.toggleCheckbox(r,e)},columns:t.columns})})," "]),e)," "]),r},qi="http://www.w3.org/2000/svg",Hi=function(t){var e,r,n,o,i,s,a,c,l,u,p,d,h,f=t.folders,m=t.files;return""!==t.filterInput&&(f=t.filterItems(t.folders),m=t.filterItems(t.files)),(h=document.createElement("div")).setAttribute("class","Browser Browser-viewType--"+String(t.viewType)),vi(h,[" ",((p=document.createElement("header")).setAttribute("class","Browser-header"),vi(p,[" ",((i=document.createElement("div")).setAttribute("aria-hidden",""+String(!t.isSearchVisible)),i.setAttribute("class","Browser-search"),vi(i,[" ",((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("placeholder","Search"),e.onkeyup=t.filterQuery,e.setAttribute("value",""+String(t.filterInput)),e.setAttribute("class","Browser-searchInput"),e)," ",((o=document.createElement("button")).setAttribute("type","button"),o.onclick=t.toggleSearch,o.setAttribute("class","Browser-searchClose"),vi(o,[" ",((n=document.createElementNS(qi,"svg")).setAttribute("viewBox","0 0 19 19"),n.setAttribute("class","UppyIcon"),vi(n,[" ",((r=document.createElementNS(qi,"path")).setAttribute("d","M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"),r)," "]),n)," "]),o)," "]),i)," ",((u=document.createElement("div")).setAttribute("class","Browser-headerBar"),vi(u,[" ",((c=document.createElement("button")).setAttribute("type","button"),c.onclick=t.toggleSearch,c.setAttribute("class","Browser-searchToggle"),vi(c,[" ",((a=document.createElementNS(qi,"svg")).setAttribute("viewBox","0 0 100 100"),a.setAttribute("class","UppyIcon"),vi(a,[" ",((s=document.createElementNS(qi,"path")).setAttribute("d","M87.533 80.03L62.942 55.439c3.324-4.587 5.312-10.207 5.312-16.295 0-.312-.043-.611-.092-.908.05-.301.093-.605.093-.922 0-15.36-12.497-27.857-27.857-27.857-.273 0-.536.043-.799.08-.265-.037-.526-.08-.799-.08-15.361 0-27.858 12.497-27.858 27.857 0 .312.042.611.092.909a5.466 5.466 0 0 0-.093.921c0 15.36 12.496 27.858 27.857 27.858.273 0 .535-.043.8-.081.263.038.524.081.798.081 5.208 0 10.071-1.464 14.245-3.963L79.582 87.98a5.603 5.603 0 0 0 3.976 1.647 5.621 5.621 0 0 0 3.975-9.597zM39.598 55.838c-.265-.038-.526-.081-.8-.081-9.16 0-16.612-7.452-16.612-16.612 0-.312-.042-.611-.092-.908.051-.301.093-.605.093-.922 0-9.16 7.453-16.612 16.613-16.612.272 0 .534-.042.799-.079.263.037.525.079.799.079 9.16 0 16.612 7.452 16.612 16.612 0 .312.043.611.092.909-.05.301-.094.604-.094.921 0 9.16-7.452 16.612-16.612 16.612-.274 0-.536.043-.798.081z"),s)," "]),a)," "]),c)," ",Bi({getFolder:t.getFolder,directories:t.directories,title:t.title})," ",((l=document.createElement("button")).setAttribute("type","button"),l.onclick=t.logout,l.setAttribute("class","Browser-userLogout"),l.textContent="Log out",l)," "]),u)," "]),p)," ",((d=document.createElement("div")).setAttribute("class","Browser-body"),vi(d,[" ",zi({columns:[{name:"Name",key:"title"}],folders:f,files:m,activeRow:t.isActiveRow,sortByTitle:t.sortByTitle,sortByDate:t.sortByDate,handleFileClick:t.addFile,handleFolderClick:t.getNextFolder,isChecked:t.isChecked,toggleCheckbox:t.toggleCheckbox,getItemName:t.getItemName,getItemIcon:t.getItemIcon,handleScroll:t.handleScroll,title:t.title})," "]),d)," "]),h},Wi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vi=function(){function t(e,r){_t(this,t),this.plugin=e,this.Provider=e[e.id],this.opts=Wi({},{viewType:"list"},r),this.updateFolderState=this.updateFolderState.bind(this),this.addFile=this.addFile.bind(this),this.filterItems=this.filterItems.bind(this),this.filterQuery=this.filterQuery.bind(this),this.toggleSearch=this.toggleSearch.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.checkAuth=this.checkAuth.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleDemoAuth=this.handleDemoAuth.bind(this),this.sortByTitle=this.sortByTitle.bind(this),this.sortByDate=this.sortByDate.bind(this),this.isActiveRow=this.isActiveRow.bind(this),this.isChecked=this.isChecked.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.plugin.core.on("core:file-removed",this.updateFolderState),this.render=this.render.bind(this)}return t.prototype.tearDown=function(){this.plugin.core.off("core:file-removed",this.updateFolderState)},t.prototype._updateFilesAndFolders=function(t,e,r){var n=this;this.plugin.getItemSubList(t).forEach(function(t){n.plugin.isFolder(t)?r.push(t):e.push(t)}),this.plugin.setPluginState({folders:r,files:e})},t.prototype.checkAuth=function(){var t=this;this.plugin.setPluginState({checkAuthInProgress:!0}),this.Provider.checkAuth().then(function(e){t.plugin.setPluginState({checkAuthInProgress:!1}),t.plugin.onAuth(e)}).catch(function(e){t.plugin.setPluginState({checkAuthInProgress:!1}),t.handleError(e)})},t.prototype.getFolder=function(t,e){var r=this;return this._loaderWrapper(this.Provider.list(t),function(n){var o=void 0,i=r.plugin.getPluginState(),s=i.directories.findIndex(function(e){return t===e.id});o=-1!==s?i.directories.slice(0,s+1):i.directories.concat([{id:t,title:e||r.plugin.getItemName(n)}]),r._updateFilesAndFolders(n,[],[]),r.plugin.setPluginState({directories:o})},this.handleError)},t.prototype.getNextFolder=function(t){var e=this.plugin.getItemRequestPath(t);this.getFolder(e,this.plugin.getItemName(t)),this.lastCheckbox=void 0},t.prototype.addFile=function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={source:this.plugin.id,data:this.plugin.getItemData(t),name:this.plugin.getItemName(t)||this.plugin.getItemId(t),type:this.plugin.getMimeType(t),isRemote:!0,body:{fileId:this.plugin.getItemId(t)},remote:{host:this.plugin.opts.host,url:""+this.Provider.fileUrl(this.plugin.getItemRequestPath(t)),body:{fileId:this.plugin.getItemId(t)}}};_i.getFileType(n).then(function(o){o&&_i.isPreviewSupported(o)&&(n.preview=e.plugin.getItemThumbnailUrl(t)),e.plugin.core.log("Adding remote file"),e.plugin.core.addFile(n),r||e.plugin.core.getPlugin("Dashboard").hideAllPanels()})},t.prototype.logout=function(){var t=this;this.Provider.logout(location.href).then(function(t){return t.json()}).then(function(e){if(e.ok){var r={authenticated:!1,files:[],folders:[],directories:[]};t.plugin.setPluginState(r)}}).catch(this.handleError)},t.prototype.filterQuery=function(t){var e=this.plugin.getPluginState();this.plugin.setPluginState(Wi({},e,{filterInput:t.target.value}))},t.prototype.toggleSearch=function(){var t=this.plugin.getPluginState(),e=document.querySelector(".Browser-searchInput");this.plugin.setPluginState(Wi({},t,{isSearchVisible:!t.isSearchVisible,filterInput:""})),e.value="",t.isSearchVisible||e.focus()},t.prototype.filterItems=function(t){var e=this,r=this.plugin.getPluginState();return t.filter(function(t){return-1!==e.plugin.getItemName(t).toLowerCase().indexOf(r.filterInput.toLowerCase())})},t.prototype.sortByTitle=function(){var t=this,e=Wi({},this.plugin.getPluginState()),r=e.files,n=e.folders,o=e.sorting,i=r.sort(function(e,r){return"titleDescending"===o?t.plugin.getItemName(r).localeCompare(t.plugin.getItemName(e)):t.plugin.getItemName(e).localeCompare(t.plugin.getItemName(r))}),s=n.sort(function(e,r){return"titleDescending"===o?t.plugin.getItemName(r).localeCompare(t.plugin.getItemName(e)):t.plugin.getItemName(e).localeCompare(t.plugin.getItemName(r))});this.plugin.setPluginState(Wi({},e,{files:i,folders:s,sorting:"titleDescending"===o?"titleAscending":"titleDescending"}))},t.prototype.sortByDate=function(){var t=this,e=Wi({},this.plugin.getPluginState()),r=e.files,n=e.folders,o=e.sorting,i=r.sort(function(e,r){var n=new Date(t.plugin.getItemModifiedDate(e)),i=new Date(t.plugin.getItemModifiedDate(r));return"dateDescending"===o?n>i?-1:n<i?1:0:n>i?1:n<i?-1:0}),s=n.sort(function(e,r){var n=new Date(t.plugin.getItemModifiedDate(e)),i=new Date(t.plugin.getItemModifiedDate(r));return"dateDescending"===o?n>i?-1:n<i?1:0:n>i?1:n<i?-1:0});this.plugin.setPluginState(Wi({},e,{files:i,folders:s,sorting:"dateDescending"===o?"dateAscending":"dateDescending"}))},t.prototype.sortBySize=function(){var t=this,e=Wi({},this.plugin.getPluginState()),r=e.files,n=e.sorting;if(r.length&&this.plugin.getItemData(r[0]).size){var o=r.sort(function(e,r){var o=t.plugin.getItemData(e).size,i=t.plugin.getItemData(r).size;return"sizeDescending"===n?o>i?-1:o<i?1:0:o>i?1:o<i?-1:0});this.plugin.setPluginState(Wi({},e,{files:o,sorting:"sizeDescending"===n?"sizeAscending":"sizeDescending"}))}},t.prototype.isActiveRow=function(t){return this.plugin.getPluginState().activeRow===this.plugin.getItemId(t)},t.prototype.isChecked=function(t){var e=this.providerFileToId(t);if(this.plugin.isFolder(t)){var r=this.plugin.getPluginState().selectedFolders||{};return e in r&&r[e]}return e in this.plugin.core.getState().files},t.prototype.addFolder=function(t){var e=this,r=this.providerFileToId(t),n=this.plugin.getPluginState(),o=n.selectedFolders||{};r in o&&o[r].loading||(o[r]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:o}),this.Provider.list(this.plugin.getItemRequestPath(t)).then(function(i){var s=[];e.plugin.getItemSubList(i).forEach(function(t){e.plugin.isFolder(t)||(e.addFile(t,!0),s.push(e.providerFileToId(t)))}),(n=e.plugin.getPluginState()).selectedFolders[r]={loading:!1,files:s},e.plugin.setPluginState({selectedFolders:o});var a=e.plugin.core.getPlugin("Dashboard"),c=void 0;c=s.length?a.i18n("folderAdded",{smart_count:s.length,folder:e.plugin.getItemName(t)}):a.i18n("emptyFolderAdded"),e.plugin.core.info(c)}).catch(function(t){delete(n=e.plugin.getPluginState()).selectedFolders[r],e.plugin.setPluginState({selectedFolders:n.selectedFolders}),e.handleError(t)}))},t.prototype.removeFolder=function(t){var e=this.plugin.getPluginState().selectedFolders||{};if(t in e){var r=e[t];if(!r.loading){for(var n=r.files,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var s;if(o){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var a=s;a in this.plugin.core.getState().files&&this.plugin.core.removeFile(a)}delete e[t],this.plugin.setPluginState({selectedFolders:e})}}},t.prototype.updateFolderState=function(t){var e=this.plugin.getPluginState().selectedFolders||{};for(var r in e){var n=e[r];if(!n.loading){var o=n.files.indexOf(t);o>-1&&n.files.splice(o,1),n.files.length||delete e[r]}}this.plugin.setPluginState({selectedFolders:e})},t.prototype.toggleCheckbox=function(t,e){t.stopPropagation(),t.preventDefault();var r=this.plugin.getPluginState(),n=r.folders,o=r.files,i=r.filterInput,s=n.concat(o);""!==i&&(s=this.filterItems(s));var a=[e];if(this.lastCheckbox&&t.shiftKey){var c=s.indexOf(this.lastCheckbox),l=s.indexOf(e);a=c<l?s.slice(c,l+1):s.slice(l,c+1)}if(this.lastCheckbox=e,this.isChecked(e))for(var u=a,p=Array.isArray(u),d=0,u=p?u:u[Symbol.iterator]();;){var h;if(p){if(d>=u.length)break;h=u[d++]}else{if((d=u.next()).done)break;h=d.value}var f=h,m=this.providerFileToId(f);this.plugin.isFolder(f)?this.removeFolder(m):m in this.plugin.core.getState().files&&this.plugin.core.removeFile(m)}else for(var g=a,y=Array.isArray(g),b=0,g=y?g:g[Symbol.iterator]();;){var v;if(y){if(b>=g.length)break;v=g[b++]}else{if((b=g.next()).done)break;v=b.value}var w=v;this.plugin.isFolder(w)?this.addFolder(w):this.addFile(w,!0)}},t.prototype.providerFileToId=function(t){return _i.generateFileID({data:this.plugin.getItemData(t),name:this.plugin.getItemName(t)||this.plugin.getItemId(t),type:this.plugin.getMimeType(t)})},t.prototype.handleDemoAuth=function(){var t=this.plugin.getPluginState();this.plugin.setPluginState({},t,{authenticated:!0})},t.prototype.handleAuth=function(){var t=this,e=Math.floor(999999*Math.random())+1,r=location.href+(location.search?"&":"?")+"id="+e,n=qo(JSON.stringify({redirect:r})),o=this.Provider.authUrl()+"?state="+n,i=window.open(o,"_blank");!function e(){var n=void 0;try{n=i.location.href}catch(t){if(t instanceof DOMException||t instanceof TypeError)return setTimeout(e,100);throw t}n&&n.split("#")[0]===r?(i.close(),t._loaderWrapper(t.Provider.checkAuth(),t.plugin.onAuth,t.handleError)):setTimeout(e,100)}()},t.prototype.handleError=function(t){var e=this.plugin.core,r=e.i18n("uppyServerError");e.log(t.toString()),e.info({message:r,details:t.toString()},"error",5e3)},t.prototype.handleScroll=function(t){var e=this,r=t.target.scrollHeight-(t.target.scrollTop+t.target.offsetHeight),n=this.plugin.getNextPagePath?this.plugin.getNextPagePath():null;r<50&&n&&!this._isHandlingScroll&&(this.Provider.list(n).then(function(t){var r=e.plugin.getPluginState(),n=r.files,o=r.folders;e._updateFilesAndFolders(t,n,o)}).catch(this.handleError).then(function(){e._isHandlingScroll=!1}),this._isHandlingScroll=!0)},t.prototype._loaderWrapper=function(t,e,r){var n=this;t.then(e).catch(r).then(function(){return n.plugin.setPluginState({loading:!1})}),this.plugin.setPluginState({loading:!0})},t.prototype.render=function(t){var e=this.plugin.getPluginState(),r=e.authenticated,n=e.checkAuthInProgress;if(e.loading)return ji();if(!r)return Ni({pluginName:this.plugin.title,demo:this.plugin.opts.demo,checkAuth:this.checkAuth,handleAuth:this.handleAuth,handleDemoAuth:this.handleDemoAuth,checkAuthInProgress:n});var o=Wi({},this.plugin.getPluginState(),{getNextFolder:this.getNextFolder,getFolder:this.getFolder,addFile:this.addFile,filterItems:this.filterItems,filterQuery:this.filterQuery,toggleSearch:this.toggleSearch,sortByTitle:this.sortByTitle,sortByDate:this.sortByDate,logout:this.logout,demo:this.plugin.opts.demo,isActiveRow:this.isActiveRow,isChecked:this.isChecked,toggleCheckbox:this.toggleCheckbox,getItemName:this.plugin.getItemName,getItemIcon:this.plugin.getItemIcon,handleScroll:this.handleScroll,title:this.plugin.title,viewType:this.opts.viewType});return Hi(o)},t}(),Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ji=_i.findDOMElement,$i=function(){function t(e,r){It(this,t),this.core=e,this.opts=r||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this)}return t.prototype.getPluginState=function(){return this.core.state.plugins[this.id]},t.prototype.setPluginState=function(t){var e=Gi({},this.core.state.plugins);e[this.id]=Gi({},e[this.id],t),this.core.setState({plugins:e})},t.prototype.update=function(t){void 0!==this.el&&this.updateUI&&this.updateUI(t)},t.prototype.mount=function(e,r){var n=this,o=r.id,i=Ji(e);if(i){if(this.updateUI=bo(function(t){n.el=bi.update(n.el,n.render(t))}),this.core.log("Installing "+o+" to a DOM element"),this.opts.getMetaFromForm&&"FORM"===i.nodeName){var s=Jn(i);this.core.setMeta(s)}return this.opts.replaceTargetContent&&(i.innerHTML=""),this.el=r.render(this.core.state),i.appendChild(this.el),this.el}var a=void 0;if("object"===(void 0===e?"undefined":Xi(e))&&e instanceof t)a=e;else if("function"==typeof e){var c=e;this.core.iteratePlugins(function(t){if(t instanceof c)return a=t,!1})}if(a){var l=a.id;return this.core.log("Installing "+o+" to "+l),this.el=a.addTarget(r),this.el}throw this.core.log("Not installing "+o),new Error("Invalid target option given to "+o)},t.prototype.render=function(t){throw new Error("Extend the render method to add your plugin to a DOM element")},t.prototype.addTarget=function(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")},t.prototype.unmount=function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},t.prototype.install=function(){},t.prototype.uninstall=function(){this.unmount()},t}(),Yi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ki="undefined"==typeof Promise?Hn.Promise:Promise,Zi=_i.emitSocketProgress,Qi=_i.getSocketHost,ts=_i.settle,es=_i.limitPromises,rs=function(t){function e(r,n){Ft(this,e);var o=jt(this,t.call(this,r,n));o.type="uploader",o.id="XHRUpload",o.title="XHRUpload";var i={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}},s={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!0,headers:{},locale:i,timeout:3e4,limit:0,getResponseData:function(t){return JSON.parse(t.response)},getResponseError:function(t){return new Error("Upload error")}};return o.opts=Yi({},s,n),o.locale=Yi({},i,o.opts.locale),o.locale.strings=Yi({},i.strings,o.opts.locale.strings),o.translator=new xi({locale:o.locale}),o.i18n=o.translator.translate.bind(o.translator),o.handleUpload=o.handleUpload.bind(o),"number"==typeof o.opts.limit&&0!==o.opts.limit?o.limitUploads=es(o.opts.limit):o.limitUploads=function(t){return t},o}return Nt(e,t),e.prototype.getOptions=function(t){var e=Yi({},this.opts,this.core.state.xhrUpload||{},t.xhrUpload||{});return e.headers={},Yi(e.headers,this.opts.headers),this.core.state.xhrUpload&&Yi(e.headers,this.core.state.xhrUpload.headers),t.xhrUpload&&Yi(e.headers,t.xhrUpload.headers),e},e.prototype.createFormDataUpload=function(t,e){var r=new FormData;return(Array.isArray(e.metaFields)?e.metaFields:Object.keys(t.meta)).forEach(function(e){r.append(e,t.meta[e])}),r.append(e.fieldName,t.data),r},e.prototype.createBareUpload=function(t,e){return t.data},e.prototype.upload=function(t,e,r){var n=this,o=this.getOptions(t);return this.core.log("uploading "+e+" of "+r),new Ki(function(e,r){var i=o.formData?n.createFormDataUpload(t,o):n.createBareUpload(t,o),s=function(){l.abort(),n.core.log("[XHRUpload] "+u+" timed out");var e=new Error(n.i18n("timedOut",{seconds:Math.ceil(o.timeout/1e3)}));n.core.emit("core:upload-error",t.id,e),r(e)},a=void 0,c=function(){clearTimeout(a),a=setTimeout(s,o.timeout)},l=new di,u=Vr();l.upload.addEventListener("loadstart",function(t){n.core.log("[XHRUpload] "+u+" started"),o.timeout>0&&c()}),l.upload.addEventListener("progress",function(e){n.core.log("[XHRUpload] "+u+" progress: "+e.loaded+" / "+e.total),o.timeout>0&&c(),e.lengthComputable&&n.core.emit("core:upload-progress",{uploader:n,id:t.id,bytesUploaded:e.loaded,bytesTotal:e.total})}),l.addEventListener("load",function(i){if(n.core.log("[XHRUpload] "+u+" finished"),clearTimeout(a),i.target.status>=200&&i.target.status<300){var s=o.getResponseData(l),c=s[o.responseUrlFieldName];return n.core.emit("core:upload-success",t.id,s,c),c&&n.core.log("Download "+t.name+" from "+t.uploadURL),e(t)}var p=o.getResponseError(l)||new Error("Upload error");return p.request=l,n.core.emit("core:upload-error",t.id,p),r(p)}),l.addEventListener("error",function(e){n.core.log("[XHRUpload] "+u+" errored"),clearTimeout(a);var i=o.getResponseError(l)||new Error("Upload error");return n.core.emit("core:upload-error",t.id,i),r(i)}),l.open(o.method.toUpperCase(),o.endpoint,!0),Object.keys(o.headers).forEach(function(t){l.setRequestHeader(t,o.headers[t])}),l.send(i),n.core.on("core:upload-cancel",function(e){e===t.id&&l.abort()}),n.core.on("core:cancel-all",function(){l.abort()}),n.core.emit("core:upload-started",t.id)})},e.prototype.uploadRemote=function(t,e,r){var n=this,o=this.getOptions(t);return new Ki(function(e,r){n.core.emit("core:upload-started",t.id);var i={};(Array.isArray(o.metaFields)?o.metaFields:Object.keys(t.meta)).forEach(function(e){i[e]=t.meta[e]}),fetch(t.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Yi({},t.remote.body,{endpoint:o.endpoint,size:t.data.size,fieldname:o.fieldName,fields:i,headers:o.headers}))}).then(function(o){if(o.status<200&&o.status>300)return r(o.statusText);o.json().then(function(r){var o=r.token,i=Qi(t.remote.host),s=new ki({target:i+"/api/"+o});s.on("progress",function(e){return Zi(n,e,t)}),s.on("success",function(r){return n.core.emit("core:upload-success",t.id,r,r.url),s.close(),e()})})})})},e.prototype.uploadFiles=function(t){var e=this,r=t.map(function(r,n){var o=parseInt(n,10)+1,i=t.length;return r.error?function(){return Promise.reject(new Error(r.error))}:r.isRemote?e.uploadRemote.bind(e,r,o,i):e.upload.bind(e,r,o,i)}).map(function(t){return e.limitUploads(t)()});return ts(r)},e.prototype.handleUpload=function(t){if(0===t.length)return this.core.log("[XHRUpload] No files to upload!"),Promise.resolve();this.core.log("[XHRUpload] Uploading...");var e=t.map(function(t){return this.core.state.files[t]},this);return this.uploadFiles(e).then(function(){return null})},e.prototype.install=function(){this.core.addUploader(this.handleUpload)},e.prototype.uninstall=function(){this.core.removeUploader(this.handleUpload)},e}($i),ns=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},os=function(t){function e(r,n){Rt(this,e);var o=Bt(this,t.call(this,r,n));o.type="uploader",o.id="AwsS3",o.title="AWS S3";var i={strings:{preparingUpload:"Preparing upload..."}},s={getUploadParameters:o.getUploadParameters.bind(o),locale:i};return o.opts=ns({},s,n),o.locale=ns({},i,o.opts.locale),o.locale.strings=ns({},i.strings,o.opts.locale.strings),o.translator=new xi({locale:o.locale}),o.i18n=o.translator.translate.bind(o.translator),o.prepareUpload=o.prepareUpload.bind(o),o}return Mt(e,t),e.prototype.getUploadParameters=function(t){if(!this.opts.host)throw new Error("Expected a `host` option containing an uppy-server address.");var e=encodeURIComponent(t.name),r=encodeURIComponent(t.type);return fetch(this.opts.host+"/s3/params?filename="+e+"&type="+r,{method:"get",headers:{accept:"application/json"}}).then(function(t){return t.json()})},e.prototype.prepareUpload=function(t){var e=this;return t.forEach(function(t){e.core.emit("core:preprocess-progress",t,{mode:"determinate",message:e.i18n("preparingUpload"),value:0})}),Promise.all(t.map(function(t){var r=e.core.getFile(t);return Promise.resolve().then(function(){return e.opts.getUploadParameters(r)}).then(function(t){return e.core.emit("core:preprocess-progress",r.id,{mode:"determinate",message:e.i18n("preparingUpload"),value:1}),t}).catch(function(t){e.core.emit("core:upload-error",r.id,t)})})).then(function(r){var n={};t.forEach(function(t,o){var i=e.core.getFile(t);if(!i.error){var s=r[o],a=s.method,c=void 0===a?"post":a,l=s.url,u=s.fields,p=s.headers,d={method:c,formData:"post"===c.toLowerCase(),endpoint:l,metaFields:Object.keys(u)};p&&(d.headers=p);var h=ns({},i,{meta:ns({},i.meta,u),xhrUpload:d});n[t]=h}}),e.core.setState({files:ns({},e.core.getState().files,n)}),t.forEach(function(t){e.core.emit("core:preprocess-complete",t)})})},e.prototype.install=function(){this.core.addPreProcessor(this.prepareUpload),this.core.use(rs,{fieldName:"file",responseUrlFieldName:"location",getResponseData:function(t){function e(e){var r=t.responseXML.querySelector(e);return r?r.textContent:""}return t.responseXML?{location:e("Location"),bucket:e("Bucket"),key:e("Key"),etag:e("ETag")}:{location:t.responseURL}},getResponseError:function(t){if(t.responseXML){var e=t.responseXML.querySelector("Error > Message");return new Error(e.textContent)}}})},e.prototype.uninstall=function(){var t=this.core.getPlugin("XHRUpload");this.core.removePlugin(t),this.core.removePreProcessor(this.prepareUpload)},e}($i),is="http://www.w3.org/2000/svg",ss={defaultTabIcon:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","30"),e.setAttribute("height","30"),e.setAttribute("viewBox","0 0 30 30"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"),t)," "]),e},iconCopy:function(){var t,e,r;return(r=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","51"),r.setAttribute("height","51"),r.setAttribute("viewBox","0 0 51 51"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M17.21 45.765a5.394 5.394 0 0 1-7.62 0l-4.12-4.122a5.393 5.393 0 0 1 0-7.618l6.774-6.775-2.404-2.404-6.775 6.776c-3.424 3.427-3.424 9 0 12.426l4.12 4.123a8.766 8.766 0 0 0 6.216 2.57c2.25 0 4.5-.858 6.214-2.57l13.55-13.552a8.72 8.72 0 0 0 2.575-6.213 8.73 8.73 0 0 0-2.575-6.213l-4.123-4.12-2.404 2.404 4.123 4.12a5.352 5.352 0 0 1 1.58 3.81c0 1.438-.562 2.79-1.58 3.808l-13.55 13.55z"),t)," ",((e=document.createElementNS(is,"path")).setAttribute("d","M44.256 2.858A8.728 8.728 0 0 0 38.043.283h-.002a8.73 8.73 0 0 0-6.212 2.574l-13.55 13.55a8.725 8.725 0 0 0-2.575 6.214 8.73 8.73 0 0 0 2.574 6.216l4.12 4.12 2.405-2.403-4.12-4.12a5.357 5.357 0 0 1-1.58-3.812c0-1.437.562-2.79 1.58-3.808l13.55-13.55a5.348 5.348 0 0 1 3.81-1.58c1.44 0 2.792.562 3.81 1.58l4.12 4.12c2.1 2.1 2.1 5.518 0 7.617L39.2 23.775l2.404 2.404 6.775-6.777c3.426-3.427 3.426-9 0-12.426l-4.12-4.12z"),e)," "]),r},iconResume:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","25"),e.setAttribute("height","25"),e.setAttribute("viewBox","0 0 44 44"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"polygon")).setAttribute("transform","translate(6, 5.5)"),t.setAttribute("points","13 21.6666667 13 11 21 16.3333333"),t.setAttribute("class","play"),t)," "]),e},iconPause:function(){var t,e,r,n;return(n=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),n.setAttribute("width","25px"),n.setAttribute("height","25px"),n.setAttribute("viewBox","0 0 44 44"),n.setAttribute("class","UppyIcon"),vi(n,[" ",((r=document.createElementNS(is,"g")).setAttribute("transform","translate(18, 17)"),r.setAttribute("class","pause"),vi(r,[" ",((t=document.createElementNS(is,"rect")).setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width","2"),t.setAttribute("height","10"),t.setAttribute("rx","0"),t)," ",((e=document.createElementNS(is,"rect")).setAttribute("x","6"),e.setAttribute("y","0"),e.setAttribute("width","2"),e.setAttribute("height","10"),e.setAttribute("rx","0"),e)," "]),r)," "]),n},iconRetry:function(){var t,e,r,n,o;return(o=document.createElementNS(is,"svg")).setAttribute("width","28"),o.setAttribute("height","31"),o.setAttribute("viewBox","0 0 16 19"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("class","UppyIcon retry"),vi(o,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"),t)," ",((e=document.createElementNS(is,"path")).setAttribute("d","M7.9 3H10v2H7.9z"),e),((r=document.createElementNS(is,"path")).setAttribute("d","M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"),r),((n=document.createElementNS(is,"path")).setAttribute("d","M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"),n)," "]),o},iconEdit:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","28"),e.setAttribute("height","28"),e.setAttribute("viewBox","0 0 28 28"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M25.436 2.566a7.98 7.98 0 0 0-2.078-1.51C22.638.703 21.906.5 21.198.5a3 3 0 0 0-1.023.17 2.436 2.436 0 0 0-.893.562L2.292 18.217.5 27.5l9.28-1.796 16.99-16.99c.255-.254.444-.56.562-.888a3 3 0 0 0 .17-1.023c0-.708-.205-1.44-.555-2.16a8 8 0 0 0-1.51-2.077zM9.01 24.252l-4.313.834c0-.03.008-.06.012-.09.007-.944-.74-1.715-1.67-1.723-.04 0-.078.007-.118.01l.83-4.29L17.72 5.024l5.264 5.264L9.01 24.252zm16.84-16.96a.818.818 0 0 1-.194.31l-1.57 1.57-5.26-5.26 1.57-1.57a.82.82 0 0 1 .31-.194 1.45 1.45 0 0 1 .492-.074c.397 0 .917.126 1.468.397.55.27 1.13.678 1.656 1.21.53.53.94 1.11 1.208 1.655.272.55.397 1.07.393 1.468.004.193-.027.358-.074.488z"),t)," "]),e},localIcon:function(){var t,e,r;return(r=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","27"),r.setAttribute("height","25"),r.setAttribute("viewBox","0 0 27 25"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M5.586 9.288a.313.313 0 0 0 .282.176h4.84v3.922c0 1.514 1.25 2.24 2.792 2.24 1.54 0 2.79-.726 2.79-2.24V9.464h4.84c.122 0 .23-.068.284-.176a.304.304 0 0 0-.046-.324L13.735.106a.316.316 0 0 0-.472 0l-7.63 8.857a.302.302 0 0 0-.047.325z"),t)," ",((e=document.createElementNS(is,"path")).setAttribute("d","M24.3 5.093c-.218-.76-.54-1.187-1.208-1.187h-4.856l1.018 1.18h3.948l2.043 11.038h-7.193v2.728H9.114v-2.725h-7.36l2.66-11.04h3.33l1.018-1.18H3.907c-.668 0-1.06.46-1.21 1.186L0 16.456v7.062C0 24.338.676 25 1.51 25h23.98c.833 0 1.51-.663 1.51-1.482v-7.062L24.3 5.093z"),e)," "]),r},closeIcon:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","14px"),e.setAttribute("height","14px"),e.setAttribute("viewBox","0 0 19 19"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"),t)," "]),e},pluginIcon:function(){var t,e,r;return(r=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","16px"),r.setAttribute("height","16px"),r.setAttribute("viewBox","0 0 32 30"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M6.6209894,11.1451162 C6.6823051,11.2751669 6.81374248,11.3572188 6.95463813,11.3572188 L12.6925482,11.3572188 L12.6925482,16.0630427 C12.6925482,17.880509 14.1726048,18.75 16.0000083,18.75 C17.8261072,18.75 19.3074684,17.8801847 19.3074684,16.0630427 L19.3074684,11.3572188 L25.0437478,11.3572188 C25.1875787,11.3572188 25.3164069,11.2751669 25.3790272,11.1451162 C25.4370814,11.0173358 25.4171865,10.8642587 25.3252129,10.7562615 L16.278212,0.127131837 C16.2093949,0.0463771751 16.1069846,0 15.9996822,0 C15.8910751,0 15.7886648,0.0463771751 15.718217,0.127131837 L6.6761083,10.7559371 C6.58250402,10.8642587 6.56293518,11.0173358 6.6209894,11.1451162 L6.6209894,11.1451162 Z"),t)," ",((e=document.createElementNS(is,"path")).setAttribute("d","M28.8008722,6.11142645 C28.5417891,5.19831555 28.1583331,4.6875 27.3684848,4.6875 L21.6124454,4.6875 L22.8190234,6.10307874 L27.4986725,6.10307874 L29.9195817,19.3486449 L21.3943891,19.3502502 L21.3943891,22.622552 L10.8023461,22.622552 L10.8023461,19.3524977 L2.07815702,19.3534609 L5.22979699,6.10307874 L9.17871529,6.10307874 L10.3840011,4.6875 L4.6308691,4.6875 C3.83940559,4.6875 3.37421888,5.2390909 3.19815864,6.11142645 L0,19.7470874 L0,28.2212959 C0,29.2043992 0.801477937,30 1.78870751,30 L30.2096773,30 C31.198199,30 32,29.2043992 32,28.2212959 L32,19.7470874 L28.8008722,6.11142645 L28.8008722,6.11142645 Z"),e)," "]),r},checkIcon:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","13px"),e.setAttribute("height","9px"),e.setAttribute("viewBox","0 0 13 9"),e.setAttribute("class","UppyIcon UppyIcon-check"),vi(e,[" ",((t=document.createElementNS(is,"polygon")).setAttribute("points","5 7.293 1.354 3.647 0.646 4.354 5 8.707 12.354 1.354 11.646 0.647"),t)]),e},iconAudio:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("viewBox","0 0 55 55"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M52.66.25c-.216-.19-.5-.276-.79-.242l-31 4.01a1 1 0 0 0-.87.992V40.622C18.174 38.428 15.273 37 12 37c-5.514 0-10 4.037-10 9s4.486 9 10 9 10-4.037 10-9c0-.232-.02-.46-.04-.687.014-.065.04-.124.04-.192V16.12l29-3.753v18.257C49.174 28.428 46.273 27 43 27c-5.514 0-10 4.037-10 9s4.486 9 10 9c5.464 0 9.913-3.966 9.993-8.867 0-.013.007-.024.007-.037V1a.998.998 0 0 0-.34-.75zM12 53c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zm31-10c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zM22 14.1V5.89l29-3.753v8.21l-29 3.754z"),t)," "]),e},iconVideo:function(){var t,e,r;return(r=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("viewBox","0 0 58 58"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"),t),((e=document.createElementNS(is,"path")).setAttribute("d","M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"),e)," "]),r},iconPDF:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("viewBox","0 0 342 335"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M329.337 227.84c-2.1 1.3-8.1 2.1-11.9 2.1-12.4 0-27.6-5.7-49.1-14.9 8.3-.6 15.8-.9 22.6-.9 12.4 0 16 0 28.2 3.1 12.1 3 12.2 9.3 10.2 10.6zm-215.1 1.9c4.8-8.4 9.7-17.3 14.7-26.8 12.2-23.1 20-41.3 25.7-56.2 11.5 20.9 25.8 38.6 42.5 52.8 2.1 1.8 4.3 3.5 6.7 5.3-34.1 6.8-63.6 15-89.6 24.9zm39.8-218.9c6.8 0 10.7 17.06 11 33.16.3 16-3.4 27.2-8.1 35.6-3.9-12.4-5.7-31.8-5.7-44.5 0 0-.3-24.26 2.8-24.26zm-133.4 307.2c3.9-10.5 19.1-31.3 41.6-49.8 1.4-1.1 4.9-4.4 8.1-7.4-23.5 37.6-39.3 52.5-49.7 57.2zm315.2-112.3c-6.8-6.7-22-10.2-45-10.5-15.6-.2-34.3 1.2-54.1 3.9-8.8-5.1-17.9-10.6-25.1-17.3-19.2-18-35.2-42.9-45.2-70.3.6-2.6 1.2-4.8 1.7-7.1 0 0 10.8-61.5 7.9-82.3-.4-2.9-.6-3.7-1.4-5.9l-.9-2.5c-2.9-6.76-8.7-13.96-17.8-13.57l-5.3-.17h-.1c-10.1 0-18.4 5.17-20.5 12.84-6.6 24.3.2 60.5 12.5 107.4l-3.2 7.7c-8.8 21.4-19.8 43-29.5 62l-1.3 2.5c-10.2 20-19.5 37-27.9 51.4l-8.7 4.6c-.6.4-15.5 8.2-19 10.3-29.6 17.7-49.28 37.8-52.54 53.8-1.04 5-.26 11.5 5.01 14.6l8.4 4.2c3.63 1.8 7.53 2.7 11.43 2.7 21.1 0 45.6-26.2 79.3-85.1 39-12.7 83.4-23.3 122.3-29.1 29.6 16.7 66 28.3 89 28.3 4.1 0 7.6-.4 10.5-1.2 4.4-1.1 8.1-3.6 10.4-7.1 4.4-6.7 5.4-15.9 4.1-25.4-.3-2.8-2.6-6.3-5-8.7z"),t)," "]),e},iconFile:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","44"),e.setAttribute("height","58"),e.setAttribute("viewBox","0 0 44 58"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"),t)," "]),e},iconText:function(){var t,e,r;return(r=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("viewBox","0 0 64 64"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M8 64h48V0H22.586L8 14.586V64zm46-2H10V16h14V2h30v60zM11.414 14L22 3.414V14H11.414z"),t)," ",((e=document.createElementNS(is,"path")).setAttribute("d","M32 13h14v2H32zM18 23h28v2H18zM18 33h28v2H18zM18 43h28v2H18zM18 53h28v2H18z"),e)," "]),r},uploadIcon:function(){var t,e,r;return(r=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","37"),r.setAttribute("height","33"),r.setAttribute("viewBox","0 0 37 33"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M29.107 24.5c4.07 0 7.393-3.355 7.393-7.442 0-3.994-3.105-7.307-7.012-7.502l.468.415C29.02 4.52 24.34.5 18.886.5c-4.348 0-8.27 2.522-10.138 6.506l.446-.288C4.394 6.782.5 10.758.5 15.608c0 4.924 3.906 8.892 8.76 8.892h4.872c.635 0 1.095-.467 1.095-1.104 0-.636-.46-1.103-1.095-1.103H9.26c-3.644 0-6.63-3.035-6.63-6.744 0-3.71 2.926-6.685 6.57-6.685h.964l.14-.28.177-.362c1.477-3.4 4.744-5.576 8.347-5.576 4.58 0 8.45 3.452 9.01 8.072l.06.536.05.446h1.101c2.87 0 5.204 2.37 5.204 5.295s-2.333 5.296-5.204 5.296h-6.062c-.634 0-1.094.467-1.094 1.103 0 .637.46 1.104 1.094 1.104h6.12z"),t)," ",((e=document.createElementNS(is,"path")).setAttribute("d","M23.196 18.92l-4.828-5.258-.366-.4-.368.398-4.828 5.196a1.13 1.13 0 0 0 0 1.546c.428.46 1.11.46 1.537 0l3.45-3.71-.868-.34v15.03c0 .64.445 1.118 1.075 1.118.63 0 1.075-.48 1.075-1.12V16.35l-.867.34 3.45 3.712a1 1 0 0 0 .767.345 1 1 0 0 0 .77-.345c.416-.33.416-1.036 0-1.485v.003z"),e)," "]),r},dashboardBgIcon:function(){var t,e;return(e=document.createElementNS(is,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","48"),e.setAttribute("height","69"),e.setAttribute("viewBox","0 0 48 69"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS(is,"path")).setAttribute("d","M.5 1.5h5zM10.5 1.5h5zM20.5 1.5h5zM30.504 1.5h5zM45.5 11.5v5zM45.5 21.5v5zM45.5 31.5v5zM45.5 41.502v5zM45.5 51.502v5zM45.5 61.5v5zM45.5 66.502h-4.998zM35.503 66.502h-5zM25.5 66.502h-5zM15.5 66.502h-5zM5.5 66.502h-5zM.5 66.502v-5zM.5 56.502v-5zM.5 46.503V41.5zM.5 36.5v-5zM.5 26.5v-5zM.5 16.5v-5zM.5 6.5V1.498zM44.807 11H36V2.195z"),t)," "]),e}},as=ss.iconText,cs=ss.iconAudio,ls=ss.iconVideo,us=ss.iconPDF,ps=function(t){var e={color:"#cbcbcb",icon:""};if(!t)return e;var r=t.split("/")[0],n=t.split("/")[1];return"text"===r?{color:"#000",icon:as()}:"audio"===r?{color:"#1abc9c",icon:cs()}:"video"===r?{color:"#2980b9",icon:ls()}:"application"===r&&"pdf"===n?{color:"#e74c3c",icon:us()}:"image"===r?{color:"#f2f2f2",icon:""}:e},ds=ss.checkIcon,hs=function(t){var e,r,n,o,i,s,a,c,l,u,p,d,h,f,m,g,y,b,v,w,A,S=!!t.fileCardFor&&t.files[t.fileCardFor],E={},P=function(e){13===e.keyCode&&t.done(E,S.id);var r=e.target.value,n=e.target.dataset.name;E[n]=r};return(e=document.createElement("div")).setAttribute("aria-hidden",""+String(!t.fileCardFor)),e.setAttribute("class","UppyDashboardFileCard"),vi(e,[" ",t.fileCardFor?((f=document.createElement("div")).setAttribute("style","width: 100%; height: 100%;"),vi(f,[" ",((i=document.createElement("div")).setAttribute("class","UppyDashboardContent-bar"),vi(i,[" ",((n=document.createElement("h2")).setAttribute("class","UppyDashboardContent-title"),vi(n,["Editing ",((r=document.createElement("span")).setAttribute("class","UppyDashboardContent-titleFile"),vi(r,[S.meta?S.meta.name:S.name]),r)]),n)," ",((o=document.createElement("button")).setAttribute("type","button"),o.setAttribute("title","Finish editing file"),o.onclick=function(){return t.done(E,S.id)},o.setAttribute("class","UppyDashboardContent-back"),o.textContent="Done",o)," "]),i)," ",((p=document.createElement("div")).setAttribute("class","UppyDashboardFileCard-inner"),vi(p,[" ",((s=document.createElement("div")).setAttribute("style","background-color: "+String(ps(S.type).color)),s.setAttribute("class","UppyDashboardFileCard-preview"),vi(s,[" ",S.preview?((m=document.createElement("img")).setAttribute("alt",""+String(S.name)),m.setAttribute("src",""+String(S.preview)),m):((A=document.createElement("div")).setAttribute("class","UppyDashboardItem-previewIconWrap"),vi(A,[" ",((g=document.createElement("span")).setAttribute("style","color: "+String(ps(S.type).color)),g.setAttribute("class","UppyDashboardItem-previewIcon"),vi(g,[ps(S.type).icon]),g)," ",((w=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","72"),w.setAttribute("height","93"),w.setAttribute("viewBox","0 0 72 93"),w.setAttribute("class","UppyDashboardItem-previewIconBg"),vi(w,[(v=document.createElementNS("http://www.w3.org/2000/svg","g"),vi(v,[((y=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z"),y.setAttribute("fill","#FFF"),y),((b=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z"),b.setAttribute("fill","#E4E4E4"),b)]),v)]),w)," "]),A)," "]),s)," ",((u=document.createElement("div")).setAttribute("class","UppyDashboardFileCard-info"),vi(u,[" ",((l=document.createElement("fieldset")).setAttribute("class","UppyDashboardFileCard-fieldset"),vi(l,[" ",((a=document.createElement("label")).setAttribute("class","UppyDashboardFileCard-label"),a.textContent="Name",a)," ",((c=document.createElement("input")).setAttribute("data-name","name"),c.setAttribute("type","text"),c.setAttribute("value",""+String(S.meta.name)),c.onkeyup=P,c.setAttribute("class","UppyDashboardFileCard-input"),c)," "]),l)," ",function(e){return(t.metaFields||[]).map(function(t){var r,n,o;return(o=document.createElement("fieldset")).setAttribute("class","UppyDashboardFileCard-fieldset"),vi(o,[" ",((r=document.createElement("label")).setAttribute("class","UppyDashboardFileCard-label"),vi(r,[t.name]),r)," ",((n=document.createElement("input")).setAttribute("type","text"),n.setAttribute("data-name",""+String(t.id)),n.setAttribute("value",""+String(e.meta[t.id])),n.setAttribute("placeholder",""+String(t.placeholder||"")),n.onkeyup=P,n.setAttribute("class","UppyDashboardFileCard-input"),n)]),o})}(S)," "]),u)," "]),p)," ",((h=document.createElement("div")).setAttribute("class","UppyDashboard-actions"),vi(h,[" ",((d=document.createElement("button")).setAttribute("type","button"),d.setAttribute("title","Finish editing file"),d.onclick=function(){return t.done(E,S.id)},d.setAttribute("class","UppyButton--circular UppyButton--blue UppyDashboardFileCard-done"),vi(d,[ds()]),d)," "]),h)," "]),f):null," "]),e},fs=function(t){var e,r,n,o=((e=document.createElement("input")).setAttribute("hidden","hidden"),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1"),e.setAttribute("type","file"),e.setAttribute("name","files[]"),e.setAttribute("multiple","multiple"),e.onchange=t.handleInputChange,e.setAttribute("class","UppyDashboard-input"),e);return n=document.createElement("span"),vi(n,[" ",0===t.acquirers.length?t.i18n("dropPaste"):t.i18n("dropPasteImport")," ",((r=document.createElement("button")).setAttribute("type","button"),r.onclick=function(t){o.click()},r.setAttribute("class","UppyDashboard-browse"),vi(r,[t.i18n("browse")]),r)," ",o," "]),n},ms="http://www.w3.org/2000/svg",gs=2*Math.PI*15,ys=function(t){var e,r,n,o,i,s,a,c,l,u;return(u=document.createElementNS(ms,"svg")).setAttribute("width","70"),u.setAttribute("height","70"),u.setAttribute("viewBox","0 0 36 36"),u.setAttribute("class","UppyIcon UppyIcon-progressCircle"),vi(u,[" ",((n=document.createElementNS(ms,"g")).setAttribute("class","progress-group"),vi(n,[" ",((e=document.createElementNS(ms,"circle")).setAttribute("r","15"),e.setAttribute("cx","18"),e.setAttribute("cy","18"),e.setAttribute("stroke-width","2"),e.setAttribute("fill","none"),e.setAttribute("class","bg"),e)," ",((r=document.createElementNS(ms,"circle")).setAttribute("r","15"),r.setAttribute("cx","18"),r.setAttribute("cy","18"),r.setAttribute("transform","rotate(-90, 18, 18)"),r.setAttribute("stroke-width","2"),r.setAttribute("fill","none"),r.setAttribute("stroke-dasharray",""+String(gs)),r.setAttribute("stroke-dashoffset",""+String(gs-gs/100*t.progress)),r.setAttribute("class","progress"),r)," "]),n)," ",((o=document.createElementNS(ms,"polygon")).setAttribute("transform","translate(3, 3)"),o.setAttribute("points","12 20 12 10 20 15"),o.setAttribute("class","play"),o)," ",((a=document.createElementNS(ms,"g")).setAttribute("transform","translate(14.5, 13)"),a.setAttribute("class","pause"),vi(a,[" ",((i=document.createElementNS(ms,"rect")).setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","2"),i.setAttribute("height","10"),i.setAttribute("rx","0"),i)," ",((s=document.createElementNS(ms,"rect")).setAttribute("x","5"),s.setAttribute("y","0"),s.setAttribute("width","2"),s.setAttribute("height","10"),s.setAttribute("rx","0"),s)," "]),a)," ",((c=document.createElementNS(ms,"polygon")).setAttribute("transform","translate(2, 3)"),c.setAttribute("points","14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"),c.setAttribute("class","check"),c)," ",((l=document.createElementNS(ms,"polygon")).setAttribute("transform","translate(2, 2)"),l.setAttribute("points","19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"),l.setAttribute("class","cancel"),l)]),u},bs="http://www.w3.org/2000/svg",vs=_i.getETA,ws=_i.getSpeed,As=_i.prettyETA,Ss=_i.getFileNameAndExtension,Es=_i.truncateString,Ps=_i.copyToClipboard,xs=ss.iconEdit,ks=ss.iconCopy,Us=ss.iconRetry,Ts=function(t){var e,r,n,o,i,s,a,c,l,u,p,d,h,f,m,g,y,b,v,w,A,S,E,P,x,k,U,T=t.file,C=t.acquirers,D=T.progress.preprocess||T.progress.postprocess,O=T.progress.uploadComplete&&!D&&!T.error,_=T.progress.uploadStarted||D,I=T.progress.uploadStarted&&!T.progress.uploadComplete||D,F=T.isPaused||!1,j=T.error||!1,N=Ss(T.meta.name).name,R=t.isWide?Es(N,15):N;return(l=document.createElement("li")).setAttribute("id","uppy_"+String(T.id)),l.setAttribute("title",""+String(T.meta.name)),l.setAttribute("class","UppyDashboardItem\n                        "+String(I?"is-inprogress":"")+"\n                        "+String(D?"is-processing":"")+"\n                        "+String(O?"is-complete":"")+"\n                        "+String(F?"is-paused":"")+"\n                        "+String(j?"is-error":"")+"\n                        "+String(t.resumableUploads?"is-resumable":"")),vi(l,[" ",((o=document.createElement("div")).setAttribute("class","UppyDashboardItem-preview"),vi(o,[" ",((e=document.createElement("div")).setAttribute("style","background-color: "+String(ps(T.type).color)),e.setAttribute("class","UppyDashboardItem-previewInnerWrap"),vi(e,[" ",T.preview?((u=document.createElement("img")).setAttribute("alt",""+String(T.name)),u.setAttribute("src",""+String(T.preview)),u):((g=document.createElement("div")).setAttribute("class","UppyDashboardItem-previewIconWrap"),vi(g,[" ",((p=document.createElement("span")).setAttribute("style","color: "+String(ps(T.type).color)),p.setAttribute("class","UppyDashboardItem-previewIcon"),vi(p,[ps(T.type).icon]),p)," ",((m=document.createElementNS(bs,"svg")).setAttribute("width","72"),m.setAttribute("height","93"),m.setAttribute("viewBox","0 0 72 93"),m.setAttribute("class","UppyDashboardItem-previewIconBg"),vi(m,[(f=document.createElementNS(bs,"g"),vi(f,[((d=document.createElementNS(bs,"path")).setAttribute("d","M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z"),d.setAttribute("fill","#FFF"),d),((h=document.createElementNS(bs,"path")).setAttribute("d","M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z"),h.setAttribute("fill","#E4E4E4"),h)]),f)]),m)," "]),g)," "]),e)," ",((n=document.createElement("div")).setAttribute("class","UppyDashboardItem-progress"),vi(n,[" ",((r=document.createElement("button")).setAttribute("type","button"),r.setAttribute("title",""+String(O?"upload complete":t.resumableUploads?T.isPaused?"resume upload":"pause upload":"cancel upload")),r.onclick=function(e){O||(j?t.retryUpload(T.id):t.resumableUploads?t.pauseUpload(T.id):t.cancelUpload(T.id))},r.setAttribute("class","UppyDashboardItem-progressBtn"),vi(r,[" ",j?Us():ys({progress:T.progress.percentage,fileID:T.id})," "]),r)," ",t.showProgressDetails?((y=document.createElement("div")).setAttribute("title",""+String(t.i18n("fileProgress"))),y.setAttribute("aria-label",""+String(t.i18n("fileProgress"))),y.setAttribute("class","UppyDashboardItem-progressInfo"),vi(y,[" ",T.isPaused||O?null:(b=document.createElement("span"),vi(b,[As(vs(T.progress))," ・ ↑ ",vo(ws(T.progress)),"/s"]),b)," "]),y):null," "]),n)," "]),o)," ",((a=document.createElement("div")).setAttribute("class","UppyDashboardItem-info"),vi(a,[" ",((i=document.createElement("h4")).setAttribute("title",""+String(N)),i.setAttribute("class","UppyDashboardItem-name"),vi(i,[" ",T.uploadURL?((v=document.createElement("a")).setAttribute("href",""+String(T.uploadURL)),v.setAttribute("target","_blank"),vi(v,[" ",T.extension?R+"."+T.extension:R," "]),v):T.extension?R+"."+T.extension:R," "]),i)," ",((s=document.createElement("div")).setAttribute("class","UppyDashboardItem-status"),vi(s,[" ",T.data.size&&((w=document.createElement("div")).setAttribute("class","UppyDashboardItem-statusSize"),vi(w,[vo(T.data.size)]),w)," ",T.source&&((A=document.createElement("div")).setAttribute("class","UppyDashboardItem-sourceIcon"),vi(A,[" ",C.map(function(e){var r;if(e.id===T.source)return(r=document.createElement("span")).setAttribute("title",String(t.i18n("fileSource"))+": "+String(e.name)),vi(r,[e.icon()]),r})," "]),A)," "]),s)," ",_?null:((S=document.createElement("button")).setAttribute("type","button"),S.setAttribute("aria-label","Edit file"),S.setAttribute("title","Edit file"),S.onclick=function(e){return t.showFileCard(T.id)},S.setAttribute("class","UppyDashboardItem-edit"),vi(S,[" ",xs()]),S)," ",T.uploadURL?((E=document.createElement("button")).setAttribute("type","button"),E.setAttribute("aria-label","Copy link"),E.setAttribute("title","Copy link"),E.onclick=function(){Ps(T.uploadURL,t.i18n("copyLinkToClipboardFallback")).then(function(){t.log("Link copied to clipboard."),t.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log)},E.setAttribute("class","UppyDashboardItem-copyLink"),vi(E,[ks()]),E):null," "]),a)," ",((c=document.createElement("div")).setAttribute("class","UppyDashboardItem-action"),vi(c,[" ",O?null:((U=document.createElement("button")).setAttribute("type","button"),U.setAttribute("aria-label","Remove file"),U.setAttribute("title","Remove file"),U.onclick=function(){return t.removeFile(T.id)},U.setAttribute("class","UppyDashboardItem-remove"),vi(U,[" ",((k=document.createElementNS(bs,"svg")).setAttribute("width","22"),k.setAttribute("height","21"),k.setAttribute("viewBox","0 0 18 17"),k.setAttribute("class","UppyIcon"),vi(k,[" ",((P=document.createElementNS(bs,"ellipse")).setAttribute("cx","8.62"),P.setAttribute("cy","8.383"),P.setAttribute("rx","8.62"),P.setAttribute("ry","8.383"),P)," ",((x=document.createElementNS(bs,"path")).setAttribute("stroke","#FFF"),x.setAttribute("fill","#FFF"),x.setAttribute("d","M11 6.147L10.85 6 8.5 8.284 6.15 6 6 6.147 8.35 8.43 6 10.717l.15.146L8.5 8.578l2.35 2.284.15-.146L8.65 8.43z"),x)," "]),k)," "]),U)," "]),c)," "]),l},Cs=ss.dashboardBgIcon,Ds=function(t){var e,r,n,o;return(e=document.createElement("ul")).setAttribute("class","UppyDashboard-files\n                         "+String(0===t.totalFileCount?"UppyDashboard-files--noFiles":"")),vi(e,[" ",0===t.totalFileCount?((n=document.createElement("div")).setAttribute("class","UppyDashboard-bgIcon"),vi(n,[" ",Cs()," ",((r=document.createElement("h3")).setAttribute("class","UppyDashboard-dropFilesTitle"),vi(r,[" ",fs({acquirers:t.acquirers,handleInputChange:t.handleInputChange,i18n:t.i18n})," "]),r)," ",t.note?((o=document.createElement("p")).setAttribute("class","UppyDashboard-note"),vi(o,[t.note]),o):""," "]),n):null," ",Object.keys(t.files).map(function(e){return Ts({acquirers:t.acquirers,file:t.files[e],showFileCard:t.showFileCard,showProgressDetails:t.showProgressDetails,info:t.info,log:t.log,i18n:t.i18n,removeFile:t.removeFile,pauseUpload:t.pauseUpload,cancelUpload:t.cancelUpload,retryUpload:t.retryUpload,resumableUploads:t.resumableUploads,isWide:t.isWide})})," "]),e},Os=ss.localIcon,_s=function(t){var e,r,n,o,i,s,a,c=0===Object.keys(t.files).length;if(0===t.acquirers.length){var l,u;return(u=document.createElement("div")).setAttribute("aria-hidden",""+String(c)),u.setAttribute("class","UppyDashboardTabs"),vi(u,[" ",((l=document.createElement("h3")).setAttribute("class","UppyDashboardTabs-title"),vi(l,[" ",fs({acquirers:t.acquirers,handleInputChange:t.handleInputChange,i18n:t.i18n})," "]),l)," "]),u}var p=((e=document.createElement("input")).setAttribute("hidden","hidden"),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1"),e.setAttribute("type","file"),e.setAttribute("name","files[]"),e.setAttribute("multiple","multiple"),e.onchange=t.handleInputChange,e.setAttribute("class","UppyDashboard-input"),e);return(a=document.createElement("div")).setAttribute("class","UppyDashboardTabs"),vi(a,[" ",(s=document.createElement("nav"),vi(s,[" ",((i=document.createElement("ul")).setAttribute("role","tablist"),i.setAttribute("class","UppyDashboardTabs-list"),vi(i,[" ",((o=document.createElement("li")).setAttribute("class","UppyDashboardTab"),vi(o,[" ",((n=document.createElement("button")).setAttribute("type","button"),n.setAttribute("role","tab"),n.setAttribute("tabindex","0"),n.onclick=function(t){p.click()},n.setAttribute("class","UppyDashboardTab-btn"),vi(n,[" ",Os()," ",((r=document.createElement("h5")).setAttribute("class","UppyDashboardTab-name"),vi(r,[t.i18n("myDevice")]),r)," "]),n)," ",p," "]),o)," ",t.acquirers.map(function(e){var r,n,o;return(o=document.createElement("li")).setAttribute("class","UppyDashboardTab"),vi(o,[" ",((n=document.createElement("button")).setAttribute("type","button"),n.setAttribute("role","tab"),n.setAttribute("tabindex","0"),n.setAttribute("aria-controls","UppyDashboardContent-panel--"+String(e.id)),n.setAttribute("aria-selected",""+String(e.isHidden?"false":"true")),n.onclick=function(){return t.showPanel(e.id)},n.setAttribute("class","UppyDashboardTab-btn"),vi(n,[" ",e.icon()," ",((r=document.createElement("h5")).setAttribute("class","UppyDashboardTab-name"),vi(r,[e.name]),r)," "]),n)," "]),o})," "]),i)," "]),s)," "]),a},Is=ss.uploadIcon,Fs=function(t){var e,r;return t=t||{},(r=document.createElement("button")).setAttribute("type","button"),r.setAttribute("title",""+String(t.i18n("uploadAllNewFiles"))),r.setAttribute("aria-label",""+String(t.i18n("uploadAllNewFiles"))),r.onclick=t.startUpload,r.setAttribute("class","UppyButton--circular\n                   UppyButton--blue\n                   UppyDashboard-upload"),vi(r,[" ",Is()," ",((e=document.createElement("sup")).setAttribute("title",""+String(t.i18n("numberOfSelectedFiles"))),e.setAttribute("aria-label",""+String(t.i18n("numberOfSelectedFiles"))),e.setAttribute("class","UppyDashboard-uploadCount"),vi(e,[" ",t.newFileCount]),e)," "]),r},js=_i.isTouchDevice,Ns=_i.toArray,Rs=ss.closeIcon,Bs=function(t){function e(e){e.preventDefault(),Ns(e.target.files).forEach(function(e){t.addFile({source:t.id,name:e.name,type:e.type,data:e})})}var r,n,o,i,s,a,c,l,u;return(u=document.createElement("div")).setAttribute("aria-hidden",""+String(t.inline?"false":t.modal.isHidden)),u.setAttribute("aria-label",""+String(t.inline?t.i18n("dashboardTitle"):t.i18n("dashboardWindowTitle"))),u.onpaste=function(e){e.preventDefault(),Ns(e.clipboardData.items).forEach(function(e){if("file"===e.kind){var r=e.getAsFile();if(!r)return t.log("[Dashboard] File pasted, but the file blob is empty"),void t.info("Error pasting file","error");t.log("[Dashboard] File pasted"),t.addFile({source:t.id,name:e.name,type:e.type,data:r})}})},u.setAttribute("class","Uppy UppyTheme--default UppyDashboard\n                          "+String(js()?"Uppy--isTouchDevice":"")+"\n                          "+String(t.semiTransparent?"UppyDashboard--semiTransparent":"")+"\n                          "+String(t.inline?"":"UppyDashboard--modal")+"\n                          "+String(t.isWide?"UppyDashboard--wide":"")),vi(u,[" ",((r=document.createElement("div")).setAttribute("tabindex","-1"),r.onclick=t.handleClickOutside,r.setAttribute("class","UppyDashboard-overlay"),r)," ",(l=document.createElement("div"),Sr(l,function(){return t.updateDashboardElWidth()},null,5),l.setAttribute("aria-modal","true"),l.setAttribute("role","dialog"),l.setAttribute("style","\n          "+String(t.inline&&t.maxWidth?"max-width: "+t.maxWidth+"px;":"")+"\n          "+String(t.inline&&t.maxHeight?"max-height: "+t.maxHeight+"px;":"")),l.setAttribute("class","UppyDashboard-inner"),vi(l,[" ",((n=document.createElement("button")).setAttribute("type","button"),n.setAttribute("aria-label",""+String(t.i18n("closeModal"))),n.setAttribute("title",""+String(t.i18n("closeModal"))),n.onclick=t.closeModal,n.setAttribute("class","UppyDashboard-close"),vi(n,[Rs()]),n)," ",((c=document.createElement("div")).setAttribute("class","UppyDashboard-innerWrap"),vi(c,[" ",_s({files:t.files,handleInputChange:e,acquirers:t.acquirers,panelSelectorPrefix:t.panelSelectorPrefix,showPanel:t.showPanel,i18n:t.i18n})," ",hs({files:t.files,fileCardFor:t.fileCardFor,done:t.fileCardDone,metaFields:t.metaFields,log:t.log,i18n:t.i18n})," ",((i=document.createElement("div")).setAttribute("class","UppyDashboard-filesContainer"),vi(i,[" ",Ds({acquirers:t.acquirers,files:t.files,handleInputChange:e,showFileCard:t.showFileCard,showProgressDetails:t.showProgressDetails,totalProgress:t.totalProgress,totalFileCount:t.totalFileCount,info:t.info,note:t.note,i18n:t.i18n,log:t.log,removeFile:t.removeFile,pauseAll:t.pauseAll,resumeAll:t.resumeAll,pauseUpload:t.pauseUpload,startUpload:t.startUpload,cancelUpload:t.cancelUpload,retryUpload:t.retryUpload,resumableUploads:t.resumableUploads,isWide:t.isWide})," ",((o=document.createElement("div")).setAttribute("class","UppyDashboard-actions"),vi(o,[" ",!t.hideUploadButton&&!t.autoProceed&&t.newFiles.length>0?Fs({i18n:t.i18n,startUpload:t.startUpload,newFileCount:t.newFiles.length}):null," "]),o)," "]),i)," ",((s=document.createElement("div")).setAttribute("role","tabpanel"),s.setAttribute("aria-hidden",""+String(t.activePanel?"false":"true")),s.setAttribute("class","UppyDashboardContent-panel"),vi(s,[" ",t.activePanel?function(t){var e,r,n,o;return(o=document.createElement("div")).setAttribute("style","width: 100%; height: 100%;"),vi(o,[" ",((n=document.createElement("div")).setAttribute("class","UppyDashboardContent-bar"),vi(n,[" ",((e=document.createElement("h2")).setAttribute("class","UppyDashboardContent-title"),vi(e,[" ",t.i18n("importFrom")," ",t.activePanel?t.activePanel.name:null," "]),e)," ",((r=document.createElement("button")).setAttribute("type","button"),r.onclick=t.hideAllPanels,r.setAttribute("class","UppyDashboardContent-back"),vi(r,[t.i18n("done")]),r)," "]),n)," ",t.getPlugin(t.activePanel.id).render(t.state)," "]),o}(t):""," "]),s)," ",((a=document.createElement("div")).setAttribute("class","UppyDashboard-progressindicators"),vi(a,[" ",t.progressindicators.map(function(e){return t.getPlugin(e.id).render(t.state)})," "]),a)," "]),c)," "]),l)," "]),u},Ms=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ls=function(t){function e(r,n){Lt(this,e);var o=zt(this,t.call(this,r,n));return o.type="progressindicator",o.id=o.opts.id||"Informer",o.title="Informer",o.opts=Ms({},{typeColors:{info:{text:"#fff",bg:"#000"},warning:{text:"#fff",bg:"#F6A623"},error:{text:"#fff",bg:"#e74c3c"},success:{text:"#fff",bg:"#7ac824"}}},n),o.render=o.render.bind(o),o}return qt(e,t),e.prototype.render=function(t){var e,r,n,o=t.info,i=o.isHidden,s=o.type,a=o.message,c=o.details,l="background-color: "+this.opts.typeColors[s].bg+"; color: "+this.opts.typeColors[s].text+";";return(r=document.createElement("div")).setAttribute("style",""+String(l)),r.setAttribute("aria-hidden",""+String(i)),r.setAttribute("class","Uppy UppyTheme--default UppyInformer"),vi(r,[" ",(e=document.createElement("p"),vi(e,[" ",a," ",c?((n=document.createElement("span")).setAttribute("style","color: "+String(this.opts.typeColors[s].bg)),n.setAttribute("data-balloon",""+String(c)),n.setAttribute("data-balloon-pos","up"),n.setAttribute("data-balloon-length","large"),n.textContent="?",n):null," "]),e)," "]),r},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e}($i),zs="http://www.w3.org/2000/svg",qs=eo(function(t){var e;return e=document.createElement("span"),vi(e,[t.totalProgress||0,"%・",t.complete," / ",t.inProgress,"・",t.totalUploadedSize," / ",t.totalSize,"・↑ ",t.totalSpeed,"/s・",t.totalETA]),e},1e3,{leading:!0,trailing:!0}),Hs="error",Ws="waiting",Vs="preprocessing",Xs="uploading",Gs="postprocessing",Js="complete",$s=function(t){var e,r,n,o=Ht(t=t||{},t.files||{}),i=t.totalProgress,s=void 0,a=void 0;if(o===Vs||o===Gs){var c=Wt(t.files);"determinate"===(s=c.mode)&&(i=100*c.value),a=Ys(c)}else o===Js?a=Zs(t):o===Xs?a=Ks(t):o===Hs&&(i=void 0,a=Qs(t));var l="number"==typeof i?i:100;return(n=document.createElement("div")).setAttribute("aria-hidden",""+String(o===Ws)),n.setAttribute("title",""),n.setAttribute("class","UppyStatusBar is-"+String(o)),vi(n,[" ",((e=document.createElement("progress")).setAttribute("style","display: none;"),e.setAttribute("min","0"),e.setAttribute("max","100"),e.setAttribute("value",""+String(i)),e)," ",((r=document.createElement("div")).setAttribute("style","width: "+String(l)+"%"),r.setAttribute("class","UppyStatusBar-progress "+String(s?"is-"+s:"")),r)," ",a," "]),n},Ys=function(t){var e;return(e=document.createElement("div")).setAttribute("class","UppyStatusBar-content"),vi(e,[" ","determinate"===t.mode?Math.round(100*t.value)+"%・":""," ",t.message," "]),e},Ks=function(t){var e,r,n;return(e=document.createElement("div")).setAttribute("class","UppyStatusBar-content"),vi(e,[" ",t.isUploadStarted&&!t.isAllComplete?t.isAllPaused?((n=document.createElement("div")).setAttribute("title","Paused"),vi(n,[ta(t)," Paused・",t.totalProgress,"%"]),n):((r=document.createElement("div")).setAttribute("title","Uploading"),vi(r,[ta(t)," Uploading... ",qs(t)]),r):null," "]),e},Zs=function(t){var e,r,n,o,i=t.totalProgress,s=t.i18n;return(o=document.createElement("div")).setAttribute("class","UppyStatusBar-content"),vi(o,[" ",((n=document.createElement("span")).setAttribute("title","Complete"),vi(n,[" ",((r=document.createElementNS(zs,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","18"),r.setAttribute("height","17"),r.setAttribute("viewBox","0 0 23 17"),r.setAttribute("class","UppyStatusBar-action UppyIcon"),vi(r,[" ",((e=document.createElementNS(zs,"path")).setAttribute("d","M8.944 17L0 7.865l2.555-2.61 6.39 6.525L20.41 0 23 2.645z"),e)," "]),r)," ",s("uploadComplete"),"・",i,"% "]),n)," "]),o},Qs=function(t){var e,r,n,o,i,s,a,c,l,u=t.error,p=t.retryAll,d=t.i18n;return(l=document.createElement("div")).setAttribute("class","UppyStatusBar-content"),vi(l,[" ",((s=document.createElement("button")).setAttribute("title",""+String(d("retryUpload"))),s.setAttribute("aria-label",""+String(d("retryUpload"))),s.setAttribute("type","button"),s.onclick=p,s.setAttribute("class","UppyStatusBar-action"),vi(s,[" ",((i=document.createElementNS(zs,"svg")).setAttribute("width","28"),i.setAttribute("height","31"),i.setAttribute("viewBox","0 0 16 19"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("class","UppyIcon"),vi(i,[" ",((e=document.createElementNS(zs,"path")).setAttribute("d","M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"),e)," ",((r=document.createElementNS(zs,"path")).setAttribute("d","M7.9 3H10v2H7.9z"),r),((n=document.createElementNS(zs,"path")).setAttribute("d","M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"),n),((o=document.createElementNS(zs,"path")).setAttribute("d","M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"),o)," "]),i)]),s)," ",d("uploadFailed"),". ",((a=document.createElement("button")).setAttribute("title",""+String(d("retryUpload"))),a.setAttribute("aria-label",""+String(d("retryUpload"))),a.setAttribute("type","button"),a.onclick=p,a.setAttribute("class","UppyStatusBar-retryBtn"),vi(a,[" ",d("retry")]),a)," ",((c=document.createElement("span")).setAttribute("data-balloon",""+String(u)),c.setAttribute("data-balloon-pos","up"),c.setAttribute("data-balloon-length","large"),c.setAttribute("class","UppyStatusBar-details"),c.textContent="?",c)," "]),l},ta=function(t){var e,r,n,o,i,s,a,c=t.resumableUploads,l=t.isAllPaused,u=(0,t.i18n)(c?l?"resumeUpload":"pauseUpload":"cancelUpload");return(e=document.createElement("button")).setAttribute("title",""+String(u)),e.setAttribute("type","button"),e.onclick=function(){return ea(t)},e.setAttribute("class","UppyStatusBar-action"),vi(e,[" ",c?l?((n=document.createElementNS(zs,"svg")).setAttribute("aria-hidden","true"),n.setAttribute("width","15"),n.setAttribute("height","17"),n.setAttribute("viewBox","0 0 11 13"),n.setAttribute("class","UppyIcon"),vi(n,[" ",((r=document.createElementNS(zs,"path")).setAttribute("d","M1.26 12.534a.67.67 0 0 1-.674.012.67.67 0 0 1-.336-.583v-11C.25.724.38.5.586.382a.658.658 0 0 1 .673.012l9.165 5.5a.66.66 0 0 1 .325.57.66.66 0 0 1-.325.573l-9.166 5.5z"),r)," "]),n):((i=document.createElementNS(zs,"svg")).setAttribute("aria-hidden","true"),i.setAttribute("width","16"),i.setAttribute("height","17"),i.setAttribute("viewBox","0 0 12 13"),i.setAttribute("class","UppyIcon"),vi(i,[" ",((o=document.createElementNS(zs,"path")).setAttribute("d","M4.888.81v11.38c0 .446-.324.81-.722.81H2.722C2.324 13 2 12.636 2 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81zM9.888.81v11.38c0 .446-.324.81-.722.81H7.722C7.324 13 7 12.636 7 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81z"),o)," "]),i):((a=document.createElementNS(zs,"svg")).setAttribute("aria-hidden","true"),a.setAttribute("width","16px"),a.setAttribute("height","16px"),a.setAttribute("viewBox","0 0 19 19"),a.setAttribute("class","UppyIcon"),vi(a,[" ",((s=document.createElementNS(zs,"path")).setAttribute("d","M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"),s)," "]),a)," "]),e},ea=function(t){if(!t.isAllComplete)return t.resumableUploads?t.isAllPaused?t.resumeAll():t.pauseAll():t.cancelAll()},ra=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},na=_i.getSpeed,oa=_i.getBytesRemaining,ia=_i.prettyETA,sa=function(t){function e(r,n){Vt(this,e);var o=Xt(this,t.call(this,r,n));o.id=o.opts.id||"StatusBar",o.title="StatusBar",o.type="progressindicator";var i={strings:{uploading:"Uploading",uploadComplete:"Upload complete",uploadFailed:"Upload failed",paused:"Paused",error:"Error",retry:"Retry",pressToRetry:"Press to retry",retryUpload:"Retry upload",resumeUpload:"Resume upload",cancelUpload:"Cancel upload",pauseUpload:"Pause upload"}},s={target:"body",showProgressDetails:!1,locale:i};return o.opts=ra({},s,n),o.locale=ra({},i,o.opts.locale),o.locale.strings=ra({},i.strings,o.opts.locale.strings),o.translator=new xi({locale:o.locale}),o.i18n=o.translator.translate.bind(o.translator),o.render=o.render.bind(o),o.install=o.install.bind(o),o}return Gt(e,t),e.prototype.getTotalSpeed=function(t){var e=0;return t.forEach(function(t){e+=na(t.progress)}),e},e.prototype.getTotalETA=function(t){var e=this.getTotalSpeed(t);if(0===e)return 0;var r=t.reduce(function(t,e){return t+oa(e.progress)},0);return Math.round(r/e*10)/10},e.prototype.render=function(t){var e=t.files,r=Object.keys(e).filter(function(t){return e[t].progress.uploadStarted}),n=Object.keys(e).filter(function(t){return e[t].progress.uploadComplete}),o=Object.keys(e).filter(function(t){return e[t].error}),i=Object.keys(e).filter(function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted&&!e[t].isPaused}),s=Object.keys(e).filter(function(t){return e[t].progress.preprocess||e[t].progress.postprocess}),a=[];i.forEach(function(t){a.push(e[t])});var c=vo(this.getTotalSpeed(a)),l=ia(this.getTotalETA(a)),u=0,p=0;a.forEach(function(t){u+=t.progress.bytesTotal||0,p+=t.progress.bytesUploaded||0}),u=vo(u),p=vo(p);var d=r.length>0,h=100===t.totalProgress&&n.length===Object.keys(e).length&&0===s.length,f=d&&o.length===r.length,m=0===i.length&&!h&&!f&&r.length>0,g=this.core.getState().capabilities.resumableUploads||!1;return $s({error:t.error,totalProgress:t.totalProgress,totalSize:u,totalUploadedSize:p,uploadStartedFiles:r,isAllComplete:h,isAllPaused:m,isAllErrored:f,isUploadStarted:d,i18n:this.i18n,pauseAll:this.core.pauseAll,resumeAll:this.core.resumeAll,retryAll:this.core.retryAll,cancelAll:this.core.cancelAll,complete:n.length,inProgress:r.length,totalSpeed:c,totalETA:l,files:t.files,resumableUploads:g})},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.unmount()},e}($i),aa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ca=_i.findAllDOMElements,la=ss.defaultTabIcon,ua=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],pa=function(t){function e(r,n){Jt(this,e);var o=$t(this,t.call(this,r,n));o.id=o.opts.id||"Dashboard",o.title="Dashboard",o.type="orchestrator";var i={strings:{selectToUpload:"Select files to upload",closeModal:"Close Modal",upload:"Upload",importFrom:"Import files from",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",fileSource:"File source",done:"Done",localDisk:"Local Disk",myDevice:"My Device",dropPasteImport:"Drop files here, paste, import from one of the locations above or",dropPaste:"Drop files here, paste or",browse:"browse",fileProgress:"File progress: upload speed and ETA",numberOfSelectedFiles:"Number of selected files",uploadAllNewFiles:"Upload all new files",emptyFolderAdded:"No files were added from empty folder",folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}},s={target:"body",getMetaFromForm:!0,trigger:"#uppy-select-files",inline:!1,width:750,height:550,semiTransparent:!1,defaultTabIcon:la(),showProgressDetails:!1,hideUploadButton:!1,note:null,closeModalOnClickOutside:!1,locale:i,onRequestCloseModal:function(){return o.closeModal()}};return o.opts=aa({},s,n),o.locale=aa({},i,o.opts.locale),o.locale.strings=aa({},i.strings,o.opts.locale.strings),o.translator=new xi({locale:o.locale}),o.i18n=o.translator.translate.bind(o.translator),o.closeModal=o.closeModal.bind(o),o.requestCloseModal=o.requestCloseModal.bind(o),o.openModal=o.openModal.bind(o),o.isModalOpen=o.isModalOpen.bind(o),o.addTarget=o.addTarget.bind(o),o.actions=o.actions.bind(o),o.hideAllPanels=o.hideAllPanels.bind(o),o.showPanel=o.showPanel.bind(o),o.getFocusableNodes=o.getFocusableNodes.bind(o),o.setFocusToFirstNode=o.setFocusToFirstNode.bind(o),o.maintainFocus=o.maintainFocus.bind(o),o.initEvents=o.initEvents.bind(o),o.onKeydown=o.onKeydown.bind(o),o.handleClickOutside=o.handleClickOutside.bind(o),o.handleFileCard=o.handleFileCard.bind(o),o.handleDrop=o.handleDrop.bind(o),o.pauseAll=o.pauseAll.bind(o),o.resumeAll=o.resumeAll.bind(o),o.cancelAll=o.cancelAll.bind(o),o.updateDashboardElWidth=o.updateDashboardElWidth.bind(o),o.render=o.render.bind(o),o.install=o.install.bind(o),o}return Yt(e,t),e.prototype.addTarget=function(t){var e=t.id||t.constructor.name,r=t.title||e,n=t.type;if("acquirer"===n||"progressindicator"===n||"presenter"===n){var o={id:e,name:r,type:n,isHidden:!0},i=this.getPluginState().targets.slice();return i.push(o),this.setPluginState({targets:i}),this.el}this.core.log("Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter")},e.prototype.hideAllPanels=function(){this.setPluginState({activePanel:!1})},e.prototype.showPanel=function(t){var e=this.getPluginState().targets.filter(function(e){return"acquirer"===e.type&&e.id===t})[0];this.setPluginState({activePanel:e})},e.prototype.requestCloseModal=function(){if(this.opts.onRequestCloseModal)return this.opts.onRequestCloseModal();this.closeModal()},e.prototype.getFocusableNodes=function(){var t=this.el.querySelectorAll(ua);return Object.keys(t).map(function(e){return t[e]})},e.prototype.setFocusToFirstNode=function(){var t=this.getFocusableNodes();t.length&&t[0].focus()},e.prototype.maintainFocus=function(t){var e=this.getFocusableNodes(),r=e.indexOf(document.activeElement);t.shiftKey&&0===r&&(e[e.length-1].focus(),t.preventDefault()),t.shiftKey||r!==e.length-1||(e[0].focus(),t.preventDefault())},e.prototype.openModal=function(){this.setPluginState({isHidden:!1}),this.savedDocumentScrollPosition=window.scrollY,document.body.classList.add("is-UppyDashboard-open"),document.body.style.top="-"+this.savedDocumentScrollPosition+"px",setTimeout(this.setFocusToFirstNode,100),setTimeout(this.updateDashboardElWidth,100)},e.prototype.closeModal=function(){this.setPluginState({isHidden:!0}),document.body.classList.remove("is-UppyDashboard-open"),window.scrollTo(0,this.savedDocumentScrollPosition)},e.prototype.isModalOpen=function(){return!this.getPluginState().isHidden||!1},e.prototype.onKeydown=function(t){27===t.keyCode&&this.requestCloseModal(t),9===t.keyCode&&this.maintainFocus(t)},e.prototype.handleClickOutside=function(){this.opts.closeModalOnClickOutside&&this.requestCloseModal()},e.prototype.initEvents=function(){var t=this,e=ca(this.opts.trigger);!this.opts.inline&&e&&e.forEach(function(e){return e.addEventListener("click",t.openModal)}),this.opts.inline||e||this.core.log("Dashboard modal trigger not found, you won’t be able to select files. Make sure `trigger` is set correctly in Dashboard options","error"),this.opts.inline||document.addEventListener("keydown",this.onKeydown),this.removeDragDropListener=rn(this.el,function(e){t.handleDrop(e)})},e.prototype.removeEvents=function(){var t=this,e=ca(this.opts.trigger);!this.opts.inline&&e&&e.forEach(function(e){return e.removeEventListener("click",t.openModal)}),this.removeDragDropListener(),this.opts.inline||document.removeEventListener("keydown",this.onKeydown)},e.prototype.actions=function(){this.core.on("dashboard:file-card",this.handleFileCard),window.addEventListener("resize",this.updateDashboardElWidth)},e.prototype.removeActions=function(){this.core.off("dashboard:file-card",this.handleFileCard),window.removeEventListener("resize",this.updateDashboardElWidth)},e.prototype.updateDashboardElWidth=function(){var t=this.el.querySelector(".UppyDashboard-inner");this.core.log("Dashboard width: "+t.offsetWidth),this.setPluginState({containerWidth:t.offsetWidth})},e.prototype.handleFileCard=function(t){this.setPluginState({fileCardFor:t||!1})},e.prototype.handleDrop=function(t){var e=this;this.core.log("[Dashboard] Files were dropped"),t.forEach(function(t){e.core.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.cancelAll=function(){this.core.emit("core:cancel-all")},e.prototype.pauseAll=function(){this.core.emit("core:pause-all")},e.prototype.resumeAll=function(){this.core.emit("core:resume-all")},e.prototype.render=function(t){var e=this,r=this.getPluginState(),n=t.files,o=Object.keys(n).filter(function(t){return!n[t].progress.uploadStarted}),i=[];Object.keys(n).filter(function(t){return!n[t].progress.uploadComplete&&n[t].progress.uploadStarted&&!n[t].isPaused}).forEach(function(t){i.push(n[t])});var s=0,a=0;i.forEach(function(t){s+=t.progress.bytesTotal||0,a+=t.progress.bytesUploaded||0}),s=vo(s),a=vo(a);var c=function(t){var r=e.core.getPlugin(t.id);return aa({},t,{icon:r.icon||e.opts.defaultTabIcon,render:r.render})},l=function(t){var r=e.core.getPlugin(t.id);return"function"!=typeof r.isSupported||r.isSupported()},u=r.targets.filter(function(t){return"acquirer"===t.type&&l(t)}).map(c),p=r.targets.filter(function(t){return"progressindicator"===t.type}).map(c);return Bs({state:t,modal:r,newFiles:o,files:n,totalFileCount:Object.keys(n).length,totalProgress:t.totalProgress,acquirers:u,activePanel:r.activePanel,getPlugin:this.core.getPlugin,progressindicators:p,autoProceed:this.core.opts.autoProceed,hideUploadButton:this.opts.hideUploadButton,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,showProgressDetails:this.opts.showProgressDetails,inline:this.opts.inline,semiTransparent:this.opts.semiTransparent,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,log:this.core.log,i18n:this.i18n,pauseAll:this.pauseAll,resumeAll:this.resumeAll,addFile:this.core.addFile,removeFile:this.core.removeFile,info:this.core.info,note:this.opts.note,metaFields:t.metaFields,resumableUploads:this.core.state.capabilities.resumableUploads||!1,startUpload:function(t){e.core.upload().catch(function(t){e.core.log(t.stack||t.message||t)})},pauseUpload:this.core.pauseResume,retryUpload:this.core.retryUpload,cancelUpload:function(t){e.core.emit("core:upload-cancel",t),e.core.emit("core:file-remove",t)},fileCardFor:r.fileCardFor,showFileCard:function(t){e.core.emit("dashboard:file-card",t)},fileCardDone:function(t,r){e.core.emit("core:update-meta",t,r),e.core.emit("dashboard:file-card")},updateDashboardElWidth:this.updateDashboardElWidth,maxWidth:this.opts.maxWidth,maxHeight:this.opts.maxHeight,currentWidth:r.containerWidth,isWide:r.containerWidth>400})},e.prototype.discoverProviderPlugins=function(){var t=this;this.core.iteratePlugins(function(e){e&&!e.target&&e.opts&&e.opts.target===t.constructor&&t.addTarget(e)})},e.prototype.install=function(){var t=this;this.setPluginState({isHidden:!0,showFileCard:!1,activePanel:!1,targets:[]});var e=this.opts.target;e&&this.mount(e,this),(this.opts.plugins||[]).forEach(function(e){var r=t.core.getPlugin(e);r&&r.mount(t,r)}),this.opts.disableStatusBar||this.core.use(sa,{target:this}),this.opts.disableInformer||this.core.use(Ls,{target:this}),this.discoverProviderPlugins(),this.initEvents(),this.actions()},e.prototype.uninstall=function(){var t=this;if(!this.opts.disableInformer){var e=this.core.getPlugin("Informer");e&&this.core.removePlugin(e)}if(!this.opts.disableStatusBar){var r=this.core.getPlugin("StatusBar");r&&this.core.removePlugin(r)}(this.opts.plugins||[]).forEach(function(e){var r=t.core.getPlugin(e);r&&r.unmount()}),this.unmount(),this.removeActions(),this.removeEvents()},e}($i),da=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ha="http://www.w3.org/2000/svg",fa=_i.toArray,ma=function(t){function e(r,n){var o,i,s,a;Kt(this,e);var c=Zt(this,t.call(this,r,n));c.type="acquirer",c.id=c.opts.id||"DragDrop",c.title="Drag & Drop",c.icon=((a=document.createElementNS(ha,"svg")).setAttribute("aria-hidden","true"),a.setAttribute("width","28"),a.setAttribute("height","28"),a.setAttribute("viewBox","0 0 16 16"),a.setAttribute("class","UppyIcon"),vi(a,[" ",((o=document.createElementNS(ha,"path")).setAttribute("d","M15.982 2.97c0-.02 0-.02-.018-.037 0-.017-.017-.035-.035-.053 0 0 0-.018-.02-.018-.017-.018-.034-.053-.052-.07L13.19.123c-.017-.017-.034-.035-.07-.053h-.018c-.018-.017-.035-.017-.053-.034h-.02c-.017 0-.034-.018-.052-.018h-6.31a.415.415 0 0 0-.446.426V11.11c0 .25.196.446.445.446h8.89A.44.44 0 0 0 16 11.11V3.023c-.018-.018-.018-.035-.018-.053zm-2.65-1.46l1.157 1.157h-1.157V1.51zm1.78 9.157h-8V.89h5.332v2.22c0 .25.196.446.445.446h2.22v7.11z"),o)," ",((i=document.createElementNS(ha,"path")).setAttribute("d","M9.778 12.89H4V2.666a.44.44 0 0 0-.444-.445.44.44 0 0 0-.445.445v10.666c0 .25.197.445.446.445h6.222a.44.44 0 0 0 .444-.445.44.44 0 0 0-.444-.444z"),i)," ",((s=document.createElementNS(ha,"path")).setAttribute("d","M.444 16h6.223a.44.44 0 0 0 .444-.444.44.44 0 0 0-.443-.445H.89V4.89a.44.44 0 0 0-.446-.446A.44.44 0 0 0 0 4.89v10.666c0 .248.196.444.444.444z"),s)," "]),a);var l={strings:{dropHereOr:"Drop files here or",browse:"browse"}},u={target:null,getMetaFromForm:!0,width:"100%",height:"100%",note:"",locale:l};return c.opts=da({},u,n),c.isDragDropSupported=c.checkDragDropSupport(),c.locale=da({},l,c.opts.locale),c.locale.strings=da({},l.strings,c.opts.locale.strings),c.translator=new xi({locale:c.locale}),c.i18n=c.translator.translate.bind(c.translator),c.handleDrop=c.handleDrop.bind(c),c.onBrowseClick=c.onBrowseClick.bind(c),c.onInputChange=c.onInputChange.bind(c),c.checkDragDropSupport=c.checkDragDropSupport.bind(c),c.render=c.render.bind(c),c}return Qt(e,t),e.prototype.checkDragDropSupport=function(){var t=document.createElement("div");return"draggable"in t&&"ondragstart"in t&&"ondrop"in t&&"FormData"in window&&"FileReader"in window},e.prototype.handleDrop=function(t){var e=this;this.core.log("[DragDrop] Files dropped"),t.forEach(function(t){e.core.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.onInputChange=function(t){var e=this;this.core.log("[DragDrop] Files selected through input"),fa(t.target.files).forEach(function(t){e.core.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.onBrowseClick=function(t){this.el.querySelector(".uppy-DragDrop-input").click()},e.prototype.render=function(t){var e,r,n,o,i,s,a,c;return(c=document.createElement("div")).setAttribute("style","width: "+String(this.opts.width)+"; height: "+String(this.opts.height)+";"),c.setAttribute("class","Uppy UppyTheme--default uppy-DragDrop-container "+String(this.isDragDropSupported?"is-dragdrop-supported":"")),vi(c,[" ",(a=document.createElement("form"),a.onsubmit=function(t){return t.preventDefault()},a.setAttribute("class","uppy-DragDrop-inner"),vi(a,[" ",((r=document.createElementNS(ha,"svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","16"),r.setAttribute("height","16"),r.setAttribute("viewBox","0 0 16 16"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("class","UppyIcon uppy-DragDrop-arrow"),vi(r,[" ",((e=document.createElementNS(ha,"path")).setAttribute("d","M11 10V0H5v10H2l6 6 6-6h-3zm0 0"),e.setAttribute("fill-rule","evenodd"),e)," "]),r)," ",((n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("name","files[]"),n.setAttribute("multiple","multiple"),n.setAttribute("value",""),n.onchange=this.onInputChange,n.setAttribute("class","uppy-DragDrop-input uppy-DragDrop-focus"),n)," ",(i=document.createElement("label"),i.onclick=this.onBrowseClick,i.setAttribute("class","uppy-DragDrop-label"),vi(i,[" ",this.i18n("dropHereOr")," ",((o=document.createElement("span")).setAttribute("class","uppy-DragDrop-dragText"),vi(o,[this.i18n("browse")]),o)," "]),i)," ",((s=document.createElement("span")).setAttribute("class","uppy-DragDrop-note"),vi(s,[this.opts.note]),s)," "]),a)," "]),c},e.prototype.install=function(){var t=this,e=this.opts.target;e&&this.mount(e,this),this.removeDragDropListener=rn(this.el,function(e){t.handleDrop(e),t.core.log(e)})},e}($i),ga={folder:function(){var t,e;return(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("aria-hidden","true"),e.setAttribute("style","width:16px;margin-right:3px"),e.setAttribute("viewBox","0 0 276.157 276.157"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"),t)," "]),e},file:function(){var t,e;return(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","11"),e.setAttribute("height","14.5"),e.setAttribute("viewBox","0 0 44 58"),e.setAttribute("class","UppyIcon"),vi(e,[" ",((t=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"),t)," "]),e}},ya=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ba="http://www.w3.org/2000/svg",va=function(t){function e(r,n){te(this,e);var o=ee(this,t.call(this,r,n));return o.type="acquirer",o.id=o.opts.id||"Dropbox",o.title="Dropbox",o.icon=function(){var t,e,r,n;return(n=document.createElementNS(ba,"svg")).setAttribute("width","128"),n.setAttribute("height","118"),n.setAttribute("viewBox","0 0 128 118"),n.setAttribute("class","UppyIcon"),vi(n,[" ",((t=document.createElementNS(ba,"path")).setAttribute("d","M38.145.777L1.108 24.96l25.608 20.507 37.344-23.06z"),t)," ",((e=document.createElementNS(ba,"path")).setAttribute("d","M1.108 65.975l37.037 24.183L64.06 68.525l-37.343-23.06zM64.06 68.525l25.917 21.633 37.036-24.183-25.61-20.51z"),e)," ",((r=document.createElementNS(ba,"path")).setAttribute("d","M127.014 24.96L89.977.776 64.06 22.407l37.345 23.06zM64.136 73.18l-25.99 21.567-11.122-7.262v8.142l37.112 22.256 37.114-22.256v-8.142l-11.12 7.262z"),r)," "]),n},o[o.id]=new Ei(r,{host:o.opts.host,provider:"dropbox"}),o.files=[],o.onAuth=o.onAuth.bind(o),o.render=o.render.bind(o),o.opts=ya({},{},n),o}return re(e,t),e.prototype.install=function(){this.view=new Vi(this),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},e.prototype.onAuth=function(t){this.setPluginState({authenticated:t}),t&&this.view.getFolder()},e.prototype.isFolder=function(t){return"folder"===t[".tag"]},e.prototype.getItemData=function(t){return t},e.prototype.getItemIcon=function(t){return ga[t[".tag"]]()},e.prototype.getItemSubList=function(t){return t.entries},e.prototype.getItemName=function(t){return t.name||""},e.prototype.getMimeType=function(t){return null},e.prototype.getItemId=function(t){return t.id},e.prototype.getItemRequestPath=function(t){return encodeURIComponent(t.path_lower)},e.prototype.getItemModifiedDate=function(t){return t.server_modified},e.prototype.getItemThumbnailUrl=function(t){return this.opts.host+"/"+this.Dropbox.id+"/thumbnail/"+this.getItemRequestPath(t)},e.prototype.render=function(t){return this.view.render(t)},e}($i),wa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Aa=function(t){function e(r,n){var o;ne(this,e);var i=oe(this,t.call(this,r,n));return i.type="acquirer",i.id=i.opts.id||"Dummy",i.title="Mr. Plugin",i.opts=wa({},{},n),i.strange=(o=document.createElement("h1"),o.textContent="this is strange 1",o),i.render=i.render.bind(i),i.install=i.install.bind(i),i}return ie(e,t),e.prototype.addFakeFileJustToTest=function(){var t={source:"acceptance-test",name:"test-file",type:"image/svg+xml",data:new hi(["data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+CiAgPGNpcmNsZSBjeD0iNjAiIGN5PSI2MCIgcj0iNTAiLz4KPC9zdmc+Cg=="],{type:"image/svg+xml"})};this.props.log("Adding fake file blob"),this.props.addFile(t)},e.prototype.render=function(t){var e,r,n,o=(e=document.createElement("h2"),e.textContent="this is strange 2",e);return(n=document.createElement("div")).setAttribute("class","wow-this-works"),vi(n,[" ",(r=document.createElement("input"),Sr(r,function(t){t.focus()},null,2),r.setAttribute("type","text"),r.setAttribute("value","hello"),r.setAttribute("class","UppyDummy-firstInput"),r)," ",this.strange," ",o," ",t.dummy.text," "]),n},e.prototype.install=function(){var t=this;this.core.setState({dummy:{text:"123"}});var e=this.opts.target;e&&this.mount(e,this),setTimeout(function(){t.core.setState({dummy:{text:"!!!"}})},2e3)},e}($i),Sa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ea=_i.toArray,Pa=function(t){function e(r,n){se(this,e);var o=ae(this,t.call(this,r,n));o.id=o.opts.id||"FileInput",o.title="File Input",o.type="acquirer";var i={strings:{selectToUpload:"Select to upload"}},s={target:".UppyForm",getMetaFromForm:!0,replaceTargetContent:!0,multipleFiles:!0,pretty:!0,locale:i,inputName:"files[]"};return o.opts=Sa({},s,n),o.locale=Sa({},i,o.opts.locale),o.locale.strings=Sa({},i.strings,o.opts.locale.strings),o.translator=new xi({locale:o.locale}),o.i18n=o.translator.translate.bind(o.translator),o.render=o.render.bind(o),o}return ce(e,t),e.prototype.handleInputChange=function(t){var e=this;this.core.log("All right, something selected through input..."),Ea(t.target.files).forEach(function(t){e.core.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.render=function(t){var e,r,n,o=((e=document.createElement("input")).setAttribute("style",""+String(this.opts.pretty?"width: 0.1px; height: 0.1px; opacity: 0; overflow: hidden; position: absolute; z-index: -1;":"")),e.setAttribute("type","file"),e.setAttribute("name",""+String(this.opts.inputName)),e.onchange=this.handleInputChange.bind(this),(this.opts.multipleFiles?"true":"false")&&e.setAttribute("multiple","multiple"),e.setAttribute("value",""),e.setAttribute("class","uppy-FileInput-input"),e);return(r=document.createElement("form")).setAttribute("class","Uppy uppy-FileInput-form"),vi(r,[" ",o," ",this.opts.pretty?((n=document.createElement("button")).setAttribute("type","button"),n.onclick=function(){return o.click()},n.setAttribute("class","uppy-FileInput-btn"),vi(n,[" ",this.i18n("selectToUpload")," "]),n):null," "]),r},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.unmount()},e}($i),xa={},ka=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ua="undefined"==typeof Promise?Hn.Promise:Promise,Ta="undefined"!=typeof window&&(window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB),Ca=!!Ta,Da="uppy-blobs",Oa="files",_a=864e5,Ia=3,Fa=!1,ja=function(){function t(e){var r=this;le(this,t),this.opts=ka({dbName:Da,storeName:"default",expires:_a,maxFileSize:10485760,maxTotalSize:314572800},e),this.name=this.opts.storeName;var n=function(){return pe(r.opts.dbName)};Fa?this.ready=n():(Fa=!0,this.ready=t.cleanup().then(n,n))}return t.prototype.key=function(t){return this.name+"!"+t},t.prototype.list=function(){var t=this;return this.ready.then(function(e){return de(e.transaction([Oa],"readonly").objectStore(Oa).index("store").getAll(IDBKeyRange.only(t.name)))}).then(function(t){var e={};return t.forEach(function(t){e[t.fileID]=t.data}),e})},t.prototype.get=function(t){var e=this;return this.ready.then(function(r){return de(r.transaction([Oa],"readonly").objectStore(Oa).get(e.key(t)))}).then(function(t){return{id:t.data.fileID,data:t.data.data}})},t.prototype.getSize=function(){var t=this;return this.ready.then(function(e){var r=e.transaction([Oa],"readonly").objectStore(Oa).index("store").openCursor(IDBKeyRange.only(t.name));return new Ua(function(t,e){var n=0;r.onsuccess=function(e){var r=e.target.result;r?(n+=r.value.data.size,r.continue()):t(n)},r.onerror=function(){e(new Error("Could not retrieve stored blobs size"))}})})},t.prototype.put=function(t){var e=this;return t.data.size>this.opts.maxFileSize?Promise.reject(new Error("File is too big to store.")):this.getSize().then(function(t){return t>e.opts.maxTotalSize?Promise.reject(new Error("No space left")):e.ready}).then(function(r){return de(r.transaction([Oa],"readwrite").objectStore(Oa).add({id:e.key(t.id),fileID:t.id,store:e.name,expires:Date.now()+e.opts.expires,data:t.data}))})},t.prototype.delete=function(t){var e=this;return this.ready.then(function(r){return de(r.transaction([Oa],"readwrite").objectStore(Oa).delete(e.key(t)))})},t.cleanup=function(){return pe(Da).then(function(t){var e=t.transaction([Oa],"readwrite").objectStore(Oa).index("expires").openCursor(IDBKeyRange.upperBound(Date.now()));return new Ua(function(r,n){e.onsuccess=function(e){var n=e.target.result;if(n){var o=n.value;console.log("[IndexedDBStore] Deleting record",o.fileID,"of size",vo(o.data.size),"- expired on",new Date(o.expires)),n.delete(),n.continue()}else r(t)},e.onerror=n})}).then(function(t){t.close()})},t}();ja.isSupported=Ca,xa=ja;var Na=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ra=!1,Ba=function(){function t(e){he(this,t),this.opts=Na({expires:864e5},e),this.name="uppyState:"+e.storeName,Ra||(Ra=!0,t.cleanup())}return t.prototype.load=function(){var t=localStorage.getItem(this.name);if(!t)return null;var e=me(t);return e?e.metadata?e.metadata:(this.save(e),e):null},t.prototype.save=function(t){var e=Date.now()+this.opts.expires,r=JSON.stringify({metadata:t,expires:e});localStorage.setItem(this.name,r)},t.cleanup=function(){var t=fe(),e=Date.now();t.forEach(function(t){var r=localStorage.getItem("uppyState:"+t);if(!r)return null;var n=me(r);if(!n)return null;n.expires&&n.expires<e&&localStorage.removeItem("uppyState:"+t)})},t}(),Ma={},La="undefined"==typeof Promise?Hn.Promise:Promise,za="undefined"!=typeof navigator&&"serviceWorker"in navigator,qa=function(){function t(e){ge(this,t),this.ready=ye(),this.name=e.storeName}return t.prototype.list=function(){var t=this,e={},r=new La(function(t,r){e.resolve=t,e.reject=r});console.log("Loading stored blobs from Service Worker");var n=function r(n){if(n.data.store===t.name)switch(n.data.type){case"uppy/ALL_FILES":e.resolve(n.data.files),navigator.serviceWorker.removeEventListener("message",r)}};return this.ready.then(function(){navigator.serviceWorker.addEventListener("message",n),navigator.serviceWorker.controller.postMessage({type:"uppy/GET_FILES",store:t.name})}),r},t.prototype.put=function(t){var e=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/ADD_FILE",store:e.name,file:t})})},t.prototype.delete=function(t){var e=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/REMOVE_FILE",store:e.name,fileID:t})})},t}();qa.isSupported=za,Ma=qa;var Ha=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wa=function(t){function e(r,n){be(this,e);var o=ve(this,t.call(this,r,n));return o.type="debugger",o.id="GoldenRetriever",o.title="Golden Retriever",o.opts=Ha({},{expires:864e5,serviceWorker:!1},n),o.MetaDataStore=new Ba({expires:o.opts.expires,storeName:r.getID()}),o.ServiceWorkerStore=null,o.opts.serviceWorker&&(o.ServiceWorkerStore=new Ma({storeName:r.getID()})),o.IndexedDBStore=new xa(Ha({expires:o.opts.expires},n.indexedDB||{},{storeName:r.getID()})),o.saveFilesStateToLocalStorage=o.saveFilesStateToLocalStorage.bind(o),o.loadFilesStateFromLocalStorage=o.loadFilesStateFromLocalStorage.bind(o),o.loadFileBlobsFromServiceWorker=o.loadFileBlobsFromServiceWorker.bind(o),o.loadFileBlobsFromIndexedDB=o.loadFileBlobsFromIndexedDB.bind(o),o.onBlobsLoaded=o.onBlobsLoaded.bind(o),o}return we(e,t),e.prototype.loadFilesStateFromLocalStorage=function(){var t=this.MetaDataStore.load();t&&(this.core.log("Recovered some state from Local Storage"),this.core.setState(t))},e.prototype.getWaitingFiles=function(){var t=this,e={},r=this.core.state.files;return Object.keys(r).forEach(function(r){var n=t.core.getFile(r);n.progress&&n.progress.uploadStarted||(e[r]=n)}),e},e.prototype.getUploadingFiles=function(){var t=this,e={},r=this.core.state.currentUploads;return r&&Object.keys(r).forEach(function(n){r[n].fileIDs.forEach(function(r){e[r]=t.core.getFile(r)})}),e},e.prototype.saveFilesStateToLocalStorage=function(){var t=Ha(this.getWaitingFiles(),this.getUploadingFiles());this.MetaDataStore.save({currentUploads:this.core.state.currentUploads,files:t})},e.prototype.loadFileBlobsFromServiceWorker=function(){var t=this;this.ServiceWorkerStore.list().then(function(e){var r=Object.keys(e).length;r===Object.keys(t.core.state.files).length?(t.core.log("Successfully recovered "+r+" blobs from Service Worker!"),t.core.info("Successfully recovered "+r+" files","success",3e3),t.onBlobsLoaded(e)):(t.core.log("Failed to recover blobs from Service Worker, trying IndexedDB now..."),t.loadFileBlobsFromIndexedDB())})},e.prototype.loadFileBlobsFromIndexedDB=function(){var t=this;this.IndexedDBStore.list().then(function(e){var r=Object.keys(e).length;if(r>0)return t.core.log("Successfully recovered "+r+" blobs from Indexed DB!"),t.core.info("Successfully recovered "+r+" files","success",3e3),t.onBlobsLoaded(e);t.core.log("Couldn’t recover anything from IndexedDB :(")})},e.prototype.onBlobsLoaded=function(t){var e=this,r=[],n=Ha({},this.core.state.files);Object.keys(t).forEach(function(o){var i=e.core.getFile(o);if(i){var s=t[o],a=Ha({},i,{data:s,isRestored:!0});n[o]=a,e.core.generatePreview(a)}else r.push(o)}),this.core.setState({files:n}),this.core.emit("core:restored"),r.length&&this.deleteBlobs(r).then(function(){e.core.log("[GoldenRetriever] cleaned up "+r.length+" old files")})},e.prototype.deleteBlobs=function(t){var e=this,r=[];return t.forEach(function(t){e.ServiceWorkerStore&&r.push(e.ServiceWorkerStore.delete(t)),e.IndexedDBStore&&r.push(e.IndexedDBStore.delete(t))}),Promise.all(r)},e.prototype.install=function(){var t=this;this.loadFilesStateFromLocalStorage(),Object.keys(this.core.state.files).length>0&&(this.ServiceWorkerStore?(this.core.log("Attempting to load files from Service Worker..."),this.loadFileBlobsFromServiceWorker()):(this.core.log("Attempting to load files from Indexed DB..."),this.loadFileBlobsFromIndexedDB())),this.core.on("core:file-added",function(e){e.isRemote||(t.ServiceWorkerStore&&t.ServiceWorkerStore.put(e).catch(function(e){t.core.log("Could not store file","error"),t.core.log(e)}),t.IndexedDBStore.put(e).catch(function(e){t.core.log("Could not store file","error"),t.core.log(e)}))}),this.core.on("core:file-removed",function(e){t.ServiceWorkerStore&&t.ServiceWorkerStore.delete(e),t.IndexedDBStore.delete(e)}),this.core.on("core:complete",function(e){var r=e.successful,n=r.map(function(t){return t.id});t.deleteBlobs(n).then(function(){t.core.log("[GoldenRetriever] removed "+r.length+" files that finished uploading")})}),this.core.on("core:state-update",this.saveFilesStateToLocalStorage),this.core.on("core:restored",function(){var e=t.core.getState().currentUploads;e&&Object.keys(e).forEach(function(r){t.core.restore(r,e[r])})})},e}($i),Va=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xa="http://www.w3.org/2000/svg",Ga=function(t){function e(r,n){Ae(this,e);var o=Se(this,t.call(this,r,n));return o.type="acquirer",o.id=o.opts.id||"GoogleDrive",o.title="Google Drive",o.icon=function(){var t,e;return(e=document.createElementNS(Xa,"svg")).setAttribute("aria-hidden","true"),e.setAttribute("width","28"),e.setAttribute("height","28"),e.setAttribute("viewBox","0 0 16 16"),e.setAttribute("class","UppyIcon UppyModalTab-icon"),vi(e,[" ",((t=document.createElementNS(Xa,"path")).setAttribute("d","M2.955 14.93l2.667-4.62H16l-2.667 4.62H2.955zm2.378-4.62l-2.666 4.62L0 10.31l5.19-8.99 2.666 4.62-2.523 4.37zm10.523-.25h-5.333l-5.19-8.99h5.334l5.19 8.99z"),t)," "]),e},o[o.id]=new Ei(r,{host:o.opts.host,provider:"drive",authProvider:"google"}),o.files=[],o.onAuth=o.onAuth.bind(o),o.render=o.render.bind(o),o.opts=Va({},{},n),o}return Ee(e,t),e.prototype.install=function(){this.view=new Vi(this),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},e.prototype.onAuth=function(t){this.setPluginState({authenticated:t}),t&&this.view.getFolder("root")},e.prototype.isFolder=function(t){return"application/vnd.google-apps.folder"===t.mimeType},e.prototype.getItemData=function(t){return Va({},t,{size:parseFloat(t.fileSize)})},e.prototype.getItemIcon=function(t){var e;return(e=document.createElement("img")).setAttribute("src",""+String(t.iconLink)),e},e.prototype.getItemSubList=function(t){var e=this;return t.items.filter(function(t){return e.isFolder(t)||!t.mimeType.startsWith("application/vnd.google")})},e.prototype.getItemName=function(t){return t.title?t.title:"/"},e.prototype.getMimeType=function(t){return t.mimeType},e.prototype.getItemId=function(t){return t.id},e.prototype.getItemRequestPath=function(t){return this.getItemId(t)},e.prototype.getItemModifiedDate=function(t){return t.modifiedByMeDate},e.prototype.getItemThumbnailUrl=function(t){return this.opts.host+"/"+this.GoogleDrive.id+"/thumbnail/"+this.getItemRequestPath(t)},e.prototype.render=function(t){return this.view.render(t)},e}($i),Ja=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$a="http://www.w3.org/2000/svg",Ya=function(t){function e(r,n){Pe(this,e);var o=xe(this,t.call(this,r,n));return o.type="acquirer",o.id=o.opts.id||"Instagram",o.title="Instagram",o.icon=function(){var t,e,r,n;return(n=document.createElementNS($a,"svg")).setAttribute("aria-hidden","true"),n.setAttribute("width","28"),n.setAttribute("height","28"),n.setAttribute("viewBox","0 0 512 512"),n.setAttribute("class","UppyIcon UppyModalTab-icon"),vi(n,[" ",((t=document.createElementNS($a,"path")).setAttribute("d","M256,49.471c67.266,0,75.233.257,101.8,1.469,24.562,1.121,37.9,5.224,46.778,8.674a78.052,78.052,0,0,1,28.966,18.845,78.052,78.052,0,0,1,18.845,28.966c3.45,8.877,7.554,22.216,8.674,46.778,1.212,26.565,1.469,34.532,1.469,101.8s-0.257,75.233-1.469,101.8c-1.121,24.562-5.225,37.9-8.674,46.778a83.427,83.427,0,0,1-47.811,47.811c-8.877,3.45-22.216,7.554-46.778,8.674-26.56,1.212-34.527,1.469-101.8,1.469s-75.237-.257-101.8-1.469c-24.562-1.121-37.9-5.225-46.778-8.674a78.051,78.051,0,0,1-28.966-18.845,78.053,78.053,0,0,1-18.845-28.966c-3.45-8.877-7.554-22.216-8.674-46.778-1.212-26.564-1.469-34.532-1.469-101.8s0.257-75.233,1.469-101.8c1.121-24.562,5.224-37.9,8.674-46.778A78.052,78.052,0,0,1,78.458,78.458a78.053,78.053,0,0,1,28.966-18.845c8.877-3.45,22.216-7.554,46.778-8.674,26.565-1.212,34.532-1.469,101.8-1.469m0-45.391c-68.418,0-77,.29-103.866,1.516-26.815,1.224-45.127,5.482-61.151,11.71a123.488,123.488,0,0,0-44.62,29.057A123.488,123.488,0,0,0,17.3,90.982C11.077,107.007,6.819,125.319,5.6,152.134,4.369,179,4.079,187.582,4.079,256S4.369,333,5.6,359.866c1.224,26.815,5.482,45.127,11.71,61.151a123.489,123.489,0,0,0,29.057,44.62,123.486,123.486,0,0,0,44.62,29.057c16.025,6.228,34.337,10.486,61.151,11.71,26.87,1.226,35.449,1.516,103.866,1.516s77-.29,103.866-1.516c26.815-1.224,45.127-5.482,61.151-11.71a128.817,128.817,0,0,0,73.677-73.677c6.228-16.025,10.486-34.337,11.71-61.151,1.226-26.87,1.516-35.449,1.516-103.866s-0.29-77-1.516-103.866c-1.224-26.815-5.482-45.127-11.71-61.151a123.486,123.486,0,0,0-29.057-44.62A123.487,123.487,0,0,0,421.018,17.3C404.993,11.077,386.681,6.819,359.866,5.6,333,4.369,324.418,4.079,256,4.079h0Z"),t)," ",((e=document.createElementNS($a,"path")).setAttribute("d","M256,126.635A129.365,129.365,0,1,0,385.365,256,129.365,129.365,0,0,0,256,126.635Zm0,213.338A83.973,83.973,0,1,1,339.974,256,83.974,83.974,0,0,1,256,339.973Z"),e)," ",((r=document.createElementNS($a,"circle")).setAttribute("cx","390.476"),r.setAttribute("cy","121.524"),r.setAttribute("r","30.23"),r)," "]),n},o[o.id]=new Ei(r,{host:o.opts.host,provider:"instagram",authProvider:"instagram"}),o.files=[],o.onAuth=o.onAuth.bind(o),o.render=o.render.bind(o),o.opts=Ja({},{},n),o}return ke(e,t),e.prototype.install=function(){this.view=new Vi(this,{viewType:"grid"}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},e.prototype.onAuth=function(t){this.setPluginState({authenticated:t}),t&&this.view.getFolder("recent")},e.prototype.isFolder=function(t){return!1},e.prototype.getItemData=function(t){return t},e.prototype.getItemIcon=function(t){var e;return(e=document.createElement("img")).setAttribute("width","100px"),e.setAttribute("src",""+String(t.images.thumbnail.url)),e},e.prototype.getItemSubList=function(t){var e=[];return t.data.forEach(function(t){t.carousel_media?t.carousel_media.forEach(function(r,n){var o=t.id,i=t.created_time,s=Ja({},r,{id:o,created_time:i});s.carousel_id=n,e.push(s)}):e.push(t)}),e},e.prototype.getItemName=function(t){return""},e.prototype.getMimeType=function(t){return"video"===t.type?"video/mp4":"image/jpeg"},e.prototype.getItemId=function(t){return""+t.id+(t.carousel_id||"")},e.prototype.getItemRequestPath=function(t){var e=isNaN(t.carousel_id)?"":"?carousel_id="+t.carousel_id;return""+t.id+e},e.prototype.getItemModifiedDate=function(t){return t.created_time},e.prototype.getItemThumbnailUrl=function(t){return t.images.thumbnail.url},e.prototype.getNextPagePath=function(){var t=this.core.getState()[this.stateId].files;return"recent?max_id="+this.getItemId(t[t.length-1])},e.prototype.render=function(t){return this.view.render(t)},e}($i),Ka=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Za=function(t){function e(r,n){Ue(this,e);var o=Te(this,t.call(this,r,n));return o.type="modifier",o.id="MetaData",o.title="Meta Data",o.opts=Ka({},{},n),o.handleFileAdded=o.handleFileAdded.bind(o),o}return Ce(e,t),e.prototype.handleFileAdded=function(t){var e=this;this.opts.fields.forEach(function(r){var n={};n[r.id]=r.value,e.core.updateMeta(n,t.id)})},e.prototype.addInitialMeta=function(){var t=this.opts.fields;this.core.setState({metaFields:t}),this.core.on("core:file-added",this.handleFileAdded)},e.prototype.install=function(){this.addInitialMeta()},e.prototype.uninstall=function(){this.core.off("core:file-added",this.handleFileAdded)},e}($i),Qa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tc=function(t){function e(r,n){De(this,e);var o=Oe(this,t.call(this,r,n));return o.id=o.opts.id||"ProgressBar",o.title="Progress Bar",o.type="progressindicator",o.opts=Qa({},{target:"body",replaceTargetContent:!1,fixed:!1},n),o.render=o.render.bind(o),o}return _e(e,t),e.prototype.render=function(t){var e,r,n,o=t.totalProgress||0;return(n=document.createElement("div")).setAttribute("style",""+String(this.opts.fixed?"position: fixed":"null")),n.setAttribute("class","UppyProgressBar"),vi(n,[" ",((e=document.createElement("div")).setAttribute("style","width: "+String(o)+"%"),e.setAttribute("class","UppyProgressBar-inner"),e)," ",((r=document.createElement("div")).setAttribute("class","UppyProgressBar-percentage"),vi(r,[o]),r)," "]),n},e.prototype.install=function(){var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.unmount()},e}($i),ec=function(t){function e(r,n){Ie(this,e);var o=Fe(this,t.call(this,r,n));if(o.type="state-sync",o.id="Redux",o.title="Redux Emitter",void 0===n.action)throw new Error("action option is not defined");if(void 0===n.dispatch)throw new Error("dispatch option is not defined");return o.opts=n,o.handleStateUpdate=o.handleStateUpdate.bind(o),o}return je(e,t),e.prototype.handleStateUpdate=function(t,e,r){this.opts.dispatch(this.opts.action(t,e,r))},e.prototype.install=function(){this.core.emitter.on("core:state-update",this.handleStateUpdate),this.handleStateUpdate({},this.core.state,this.core.state)},e.prototype.uninstall=function(){this.core.emitter.off("core:state-update",this.handleStateUpdate)},e}($i),rc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nc=function(t){function e(r,n){Ne(this,e);var o=Re(this,t.call(this,r,n));return o.type="debugger",o.id="ReduxDevTools",o.title="Redux DevTools",o.opts=rc({},{},n),o.handleStateChange=o.handleStateChange.bind(o),o.initDevTools=o.initDevTools.bind(o),o}return Be(e,t),e.prototype.handleStateChange=function(t,e,r){this.devTools.send("UPPY_STATE_UPDATE",e)},e.prototype.initDevTools=function(){var t=this;this.devTools=window.devToolsExtension.connect(),this.devToolsUnsubscribe=this.devTools.subscribe(function(e){if("DISPATCH"===e.type)switch(console.log(e.payload.type),e.payload.type){case"RESET":return void t.core.reset();case"IMPORT_STATE":var r=e.payload.nextLiftedState.computedStates;return t.core.state=rc({},t.core.state,r[r.length-1].state),void t.core.updateAll(t.core.state);case"JUMP_TO_STATE":case"JUMP_TO_ACTION":t.core.state=rc({},t.core.state,JSON.parse(e.state)),t.core.updateAll(t.core.state)}})},e.prototype.install=function(){this.withDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__,this.withDevTools&&(this.initDevTools(),this.core.on("core:state-update",this.handleStateChange))},e.prototype.uninstall=function(){this.withDevTools&&(this.devToolsUnsubscribe(),this.core.emitter.off("core:state-update",this.handleStateUpdate))},e}($i),oc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Me(this,t),this.apiUrl="https://api2.transloadit.com",this.opts=e}return t.prototype.createAssembly=function(t){t.templateId;var e=t.params,r=t.fields,n=t.signature,o=t.expectedFiles,i=new FormData;return i.append("params","string"==typeof e?e:JSON.stringify(e)),n&&i.append("signature",n),Object.keys(r).forEach(function(t){i.append(t,r[t])}),i.append("num_expected_upload_files",o),fetch(this.apiUrl+"/assemblies",{method:"post",body:i}).then(function(t){return t.json()}).then(function(t){if(t.error){var e=new Error(t.message);throw e.code=t.error,e.status=t,e}return t})},t.prototype.reserveFile=function(t,e){var r=encodeURIComponent(e.size);return fetch(t.assembly_ssl_url+"/reserve_file?size="+r,{method:"post"}).then(function(t){return t.json()})},t.prototype.addFile=function(t,e){if(!e.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));var r=encodeURIComponent(e.size),n=encodeURIComponent(e.uploadURL),o="size="+r+"&filename="+encodeURIComponent(e.name)+"&fieldname=file&s3Url="+n;return fetch(t.assembly_ssl_url+"/add_file?"+o,{method:"post"}).then(function(t){return t.json()})},t.prototype.getAssemblyStatus=function(t){return fetch(t).then(function(t){return t.json()})},t}(),ic=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sc=function(){function t(e,r){Le(this,t);var n=yo();this.on=n.on.bind(n),this.off=n.off.bind(n),this.emit=n.emit.bind(n);var o=gi(e);this.assembly=r,this.socket=Bo.connect(o.origin,{path:o.pathname}),this.attachDefaultHandlers()}return t.prototype.attachDefaultHandlers=function(){var t=this;this.socket.on("connect",function(){t.socket.emit("assembly_connect",{id:t.assembly.assembly_id}),t.emit("connect")}),this.socket.on("assembly_finished",function(){t.emit("finished"),t.close()}),this.socket.on("assembly_upload_finished",function(e){t.emit("upload",e)}),this.socket.on("assembly_upload_meta_data_extracted",function(){t.emit("metadata")}),this.socket.on("assembly_result_finished",function(e,r){t.emit("result",e,r)}),this.socket.on("assembly_error",function(e){t.emit("error",ic(new Error(e.message),e))})},t.prototype.close=function(){this.socket.disconnect()},t}(),ac=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cc="undefined"==typeof Promise?Hn.Promise:Promise,lc=function(t){function e(r,n){ze(this,e);var o=qe(this,t.call(this,r,n));o.type="uploader",o.id="Transloadit",o.title="Transloadit";var i={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create assembly",encoding:"Encoding..."}},s={waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:function(t,e){return{params:e.params,signature:e.signature,fields:e.fields}},locale:i};return o.opts=ac({},s,n),o.locale=ac({},i,o.opts.locale),o.locale.strings=ac({},i.strings,o.opts.locale.strings),o.translator=new xi({locale:o.locale}),o.i18n=o.translator.translate.bind(o.translator),o.prepareUpload=o.prepareUpload.bind(o),o.afterUpload=o.afterUpload.bind(o),o.onFileUploadURLAvailable=o.onFileUploadURLAvailable.bind(o),o.opts.params&&o.validateParams(o.opts.params),o.client=new oc,o.sockets={},o}return He(e,t),e.prototype.validateParams=function(t){if(!t)throw new Error("Transloadit: The `params` option is required.");if("string"==typeof t)try{t=JSON.parse(t)}catch(t){throw t.message="Transloadit: The `params` option is a malformed JSON string: "+t.message,t}if(!t.auth||!t.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/accounts/credentials.")},e.prototype.getAssemblyOptions=function(t){var e=this,r=this.opts;return Promise.all(t.map(function(t){var n=e.core.getFile(t);return Promise.resolve().then(function(){return r.getAssemblyOptions(n,r)}).then(function(r){return e.validateParams(r.params),{fileIDs:[t],options:r}})}))},e.prototype.dedupeAssemblyOptions=function(t){var e=Object.create(null);return t.forEach(function(t){var r=t.fileIDs,n=t.options,o=JSON.stringify(n);if(e[o]){var i;(i=e[o].fileIDs).push.apply(i,r)}else e[o]={options:n,fileIDs:[].concat(r)}}),Object.keys(e).map(function(t){return e[t]})},e.prototype.createAssembly=function(t,e,r){var n=this,o=this.opts;return this.core.log("Transloadit: create assembly"),this.client.createAssembly({params:r.params,fields:r.fields,expectedFiles:t.length,signature:r.signature}).then(function(r){function i(t,e){var r={assembly_url:e.assembly_url,filename:t.name,fieldname:"file"},n=ac({},t.meta,r),i=ac({},t.tus,{endpoint:e.tus_url,metaFields:Object.keys(r),uploadUrl:null,resume:!1}),s={assembly:e.assembly_id},a=ac({},t,{transloadit:s});return o.importFromUploadURLs||ac(a,{meta:n,tus:i}),a}var s,a,c=n.getPluginState(),l=c.uploadsAssemblies[e],u=ac({},c.uploadsAssemblies,(s={},s[e]=l.concat([r.assembly_id]),s));n.setPluginState({assemblies:ac(c.assemblies,(a={},a[r.assembly_id]=r,a)),uploadsAssemblies:u});var p=ac({},n.core.state.files);return t.forEach(function(t){p[t]=i(p[t],r)}),n.core.setState({files:p}),n.core.emit("transloadit:assembly-created",r,t),n.connectSocket(r).then(function(){return r})}).then(function(t){return n.core.log("Transloadit: Created assembly"),t}).catch(function(t){throw n.core.info(n.i18n("creatingAssemblyFailed"),"error",0),t})},e.prototype.shouldWait=function(){return this.opts.waitForEncoding||this.opts.waitForMetadata},e.prototype.reserveFiles=function(t,e){var r=this;return Promise.all(e.map(function(e){var n=r.core.getFile(e);return r.client.reserveFile(t,n)}))},e.prototype.onFileUploadURLAvailable=function(t){var e=this,r=this.core.getFile(t);if(r&&r.transloadit&&r.transloadit.assembly){var n=this.getPluginState().assemblies[r.transloadit.assembly];this.client.addFile(n,r).catch(function(t){e.core.log(t),e.core.emit("transloadit:import-error",n,r.id,t)})}},e.prototype.findFile=function(t){var e=this.core.state.files;for(var r in e)if(e.hasOwnProperty(r)&&e[r].uploadURL===t.tus_upload_url)return e[r]},e.prototype.onFileUploadComplete=function(t,e){var r,n=this.getPluginState(),o=this.findFile(e);this.setPluginState({files:ac({},n.files,(r={},r[e.id]={id:o.id,uploadedFile:e},r))}),this.core.emit("transloadit:upload",e,this.getAssembly(t))},e.prototype.onResult=function(t,e,r){var n=this.getPluginState(),o=n.files[r.original_id];r.localId=o?o.id:null,this.setPluginState({results:n.results.concat(r)}),this.core.emit("transloadit:result",e,r,this.getAssembly(t))},e.prototype.onAssemblyFinished=function(t){var e=this;this.client.getAssemblyStatus(t).then(function(t){var r,n=e.getPluginState();e.setPluginState({assemblies:ac({},n.assemblies,(r={},r[t.assembly_id]=t,r))}),e.core.emit("transloadit:complete",t)})},e.prototype.connectSocket=function(t){var e=this,r=new sc(t.websocket_url,t);return this.sockets[t.assembly_id]=r,r.on("upload",this.onFileUploadComplete.bind(this,t.assembly_id)),r.on("error",function(r){e.core.emit("transloadit:assembly-error",t,r)}),this.opts.waitForEncoding&&r.on("result",this.onResult.bind(this,t.assembly_id)),this.opts.waitForEncoding?r.on("finished",function(){e.onAssemblyFinished(t.assembly_ssl_url)}):this.opts.waitForMetadata&&r.on("metadata",function(){e.onAssemblyFinished(t.assembly_ssl_url),e.core.emit("transloadit:complete",t)}),new cc(function(t,e){r.on("connect",t),r.on("error",e)}).then(function(){e.core.log("Transloadit: Socket is ready")})},e.prototype.prepareUpload=function(t,e){var r,n=this;(t=t.filter(function(t){return!t.error})).forEach(function(t){n.core.emit("core:preprocess-progress",t,{mode:"indeterminate",message:n.i18n("creatingAssembly")})});var o=function(t){var r=t.fileIDs,o=t.options;return n.createAssembly(r,e,o).then(function(t){if(n.opts.importFromUploadURLs)return n.reserveFiles(t,r)}).then(function(){r.forEach(function(t){n.core.emit("core:preprocess-complete",t)})})},i=this.getPluginState(),s=ac({},i.uploadsAssemblies,(r={},r[e]=[],r));this.setPluginState({uploadsAssemblies:s});var a=void 0;if(t.length>0)a=this.getAssemblyOptions(t).then(function(t){return n.dedupeAssemblyOptions(t)});else{if(!this.opts.alwaysRunAssembly)return Promise.resolve();a=Promise.resolve(this.opts.getAssemblyOptions(null,this.opts)).then(function(e){return n.validateParams(e.params),[{fileIDs:t,options:e}]})}return a.then(function(t){return Promise.all(t.map(o))})},e.prototype.afterUpload=function(t,e){var r=this;t=t.filter(function(t){return!t.error});var n=this.getPluginState().uploadsAssemblies[e];if(!this.shouldWait())return n.forEach(function(t){r.sockets[t].close()}),Promise.resolve();if(0===n.length)return Promise.resolve();var o=0;return new cc(function(e,i){t.forEach(function(t){r.core.emit("core:postprocess-progress",t,{mode:"indeterminate",message:r.i18n("encoding")})});var s=function(t){-1!==n.indexOf(t.assembly_id)&&(r.getAssemblyFiles(t.assembly_id).forEach(function(t){r.core.emit("core:postprocess-complete",t.id)}),l())},a=function(t,e){-1!==n.indexOf(t.assembly_id)&&(r.getAssemblyFiles(t.assembly_id).forEach(function(t){r.core.emit("core:upload-error",t.id,e),r.core.emit("core:postprocess-complete",t.id)}),l())},c=function(t,e,r){-1!==n.indexOf(t.assembly_id)&&a(t,r)},l=function(){(o+=1)===n.length&&(u(),e())},u=function(){r.core.off("transloadit:complete",s),r.core.off("transloadit:assembly-error",a),r.core.off("transloadit:import-error",c)};r.core.on("transloadit:complete",s),r.core.on("transloadit:assembly-error",a),r.core.on("transloadit:import-error",c)}).then(function(){var t=r.getPluginState(),n=ac({},t.uploadsAssemblies);delete n[e],r.setPluginState({uploadsAssemblies:n})})},e.prototype.install=function(){this.core.addPreProcessor(this.prepareUpload),this.core.addPostProcessor(this.afterUpload),this.opts.importFromUploadURLs&&this.core.on("core:upload-success",this.onFileUploadURLAvailable),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]})},e.prototype.uninstall=function(){this.core.removePreProcessor(this.prepareUpload),this.core.removePostProcessor(this.afterUpload),this.opts.importFromUploadURLs&&this.core.off("core:upload-success",this.onFileUploadURLAvailable)},e.prototype.getAssembly=function(t){return this.getPluginState().assemblies[t]},e.prototype.getAssemblyFiles=function(t){var e=this;return Object.keys(this.core.state.files).map(function(t){return e.core.getFile(t)}).filter(function(e){return e&&e.transloadit&&e.transloadit.assembly===t})},e}($i),uc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pc="undefined"==typeof Promise?Hn.Promise:Promise,dc=_i.emitSocketProgress,hc=_i.getSocketHost,fc=_i.settle,mc={endpoint:"",resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},gc=function(t){function e(r,n){We(this,e);var o=Ve(this,t.call(this,r,n));return o.type="uploader",o.id="Tus",o.title="Tus",o.opts=uc({},{resume:!0,autoRetry:!0,retryDelays:[0,1e3,3e3,5e3]},n),o.uploaders=Object.create(null),o.uploaderEvents=Object.create(null),o.uploaderSockets=Object.create(null),o.handleResetProgress=o.handleResetProgress.bind(o),o.handleUpload=o.handleUpload.bind(o),o}return Xe(e,t),e.prototype.handleResetProgress=function(){var t=uc({},this.core.state.files);Object.keys(t).forEach(function(e){if(t[e].tus&&t[e].tus.uploadUrl){var r=uc({},t[e].tus);delete r.uploadUrl,t[e]=uc({},t[e],{tus:r})}}),this.core.setState({files:t})},e.prototype.resetUploaderReferences=function(t){this.uploaders[t]&&(this.uploaders[t].abort(),this.uploaders[t]=null),this.uploaderEvents[t]&&(this.uploaderEvents[t].remove(),this.uploaderEvents[t]=null),this.uploaderSockets[t]&&(this.uploaderSockets[t].close(),this.uploaderSockets[t]=null)},e.prototype.upload=function(t,e,r){var n=this;return this.core.log("uploading "+e+" of "+r),this.resetUploaderReferences(t.id),new pc(function(e,r){var o=uc({},mc,n.opts,t.tus||{});o.onError=function(e){n.core.log(e),n.core.emit("core:upload-error",t.id,e),e.message="Failed because: "+e.message,n.resetUploaderReferences(t.id),r(e)},o.onProgress=function(e,r){n.onReceiveUploadUrl(t,i.url),n.core.emit("core:upload-progress",{uploader:n,id:t.id,bytesUploaded:e,bytesTotal:r})},o.onSuccess=function(){n.core.emit("core:upload-success",t.id,i,i.url),i.url&&n.core.log("Download "+i.file.name+" from "+i.url),n.resetUploaderReferences(t.id),e(i)},o.metadata=t.meta;var i=new mi.Upload(t.data,o);n.uploaders[t.id]=i,n.uploaderEvents[t.id]=Ge(n.core),n.onFileRemove(t.id,function(r){n.resetUploaderReferences(t.id),e("upload "+r+" was removed")}),n.onPause(t.id,function(t){t?i.abort():i.start()}),n.onPauseAll(t.id,function(){i.abort()}),n.onCancelAll(t.id,function(){n.resetUploaderReferences(t.id)}),n.onResumeAll(t.id,function(){t.error&&i.abort(),i.start()}),i.start(),n.core.emit("core:upload-started",t.id,i)})},e.prototype.uploadRemote=function(t,e,r){var n=this;return this.resetUploaderReferences(t.id),new pc(function(e,r){if(n.core.log(t.remote.url),t.serverToken)n.connectToServerSocket(t);else{var o=n.opts.endpoint;t.tus&&t.tus.endpoint&&(o=t.tus.endpoint),n.core.emitter.emit("core:upload-started",t.id),fetch(t.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(uc({},t.remote.body,{endpoint:o,protocol:"tus",size:t.data.size,metadata:t.meta}))}).then(function(o){if(o.status<200&&o.status>300)return r(o.statusText);o.json().then(function(r){var o=r.token;(t=n.getFile(t.id)).serverToken=o,n.updateFile(t),n.connectToServerSocket(t),e()})})}})},e.prototype.connectToServerSocket=function(t){var e=this,r=t.serverToken,n=hc(t.remote.host),o=new ki({target:n+"/api/"+r});this.uploaderSockets[t.id]=o,this.uploaderEvents[t.id]=Ge(this.core),this.onFileRemove(t.id,function(){return o.send("pause",{})}),this.onPause(t.id,function(t){t?o.send("pause",{}):o.send("resume",{})}),this.onPauseAll(t.id,function(){return o.send("pause",{})}),this.onCancelAll(t.id,function(){return o.send("pause",{})}),this.onResumeAll(t.id,function(){t.error&&o.send("pause",{}),o.send("resume",{})}),this.onRetry(t.id,function(){o.send("pause",{}),o.send("resume",{})}),this.onRetryAll(t.id,function(){o.send("pause",{}),o.send("resume",{})}),o.on("progress",function(r){return dc(e,r,t)}),o.on("success",function(r){e.core.emitter.emit("core:upload-success",t.id,r,r.url),e.resetUploaderReferences(t.id)})},e.prototype.getFile=function(t){return this.core.state.files[t]},e.prototype.updateFile=function(t){var e,r=uc({},this.core.state.files,(e={},e[t.id]=t,e));this.core.setState({files:r})},e.prototype.onReceiveUploadUrl=function(t,e){var r=this.getFile(t.id);if(r&&(!r.tus||r.tus.uploadUrl!==e)){var n=uc({},r,{tus:uc({},r.tus,{uploadUrl:e})});this.updateFile(n)}},e.prototype.onFileRemove=function(t,e){this.uploaderEvents[t].on("core:file-removed",function(r){t===r&&e(r)})},e.prototype.onPause=function(t,e){this.uploaderEvents[t].on("core:upload-pause",function(r,n){t===r&&e(n)})},e.prototype.onRetry=function(t,e){this.uploaderEvents[t].on("core:upload-retry",function(r){t===r&&e()})},e.prototype.onRetryAll=function(t,e){var r=this;this.uploaderEvents[t].on("core:retry-all",function(n){r.core.getFile(t)&&e()})},e.prototype.onPauseAll=function(t,e){var r=this;this.uploaderEvents[t].on("core:pause-all",function(){r.core.getFile(t)&&e()})},e.prototype.onCancelAll=function(t,e){var r=this;this.uploaderEvents[t].on("core:cancel-all",function(){r.core.getFile(t)&&e()})},e.prototype.onResumeAll=function(t,e){var r=this;this.uploaderEvents[t].on("core:resume-all",function(){r.core.getFile(t)&&e()})},e.prototype.uploadFiles=function(t){var e=this,r=t.map(function(r,n){var o=parseInt(n,10)+1,i=t.length;return r.error?Promise.reject(new Error(r.error)):r.isRemote?e.uploadRemote(r,o,i):e.upload(r,o,i)});return fc(r)},e.prototype.handleUpload=function(t){var e=this;if(0===t.length)return this.core.log("Tus: no files to upload!"),Promise.resolve();this.core.log("Tus is uploading...");var r=t.map(function(t){return e.core.getFile(t)});return this.uploadFiles(r)},e.prototype.addResumableUploadsCapabilityFlag=function(){var t=uc({},this.core.getState().capabilities);t.resumableUploads=!0,this.core.setState({capabilities:t})},e.prototype.install=function(){this.addResumableUploadsCapabilityFlag(),this.core.addUploader(this.handleUpload),this.core.on("core:reset-progress",this.handleResetProgress),this.opts.autoRetry&&this.core.on("back-online",this.core.retryAll)},e.prototype.uninstall=function(){this.core.removeUploader(this.handleUpload),this.opts.autoRetry&&this.core.off("back-online",this.core.retryAll)},e}($i),yc=function(t){var e,r;return(r=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","100"),r.setAttribute("height","100"),r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((e=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","50"),e.setAttribute("cy","50"),e.setAttribute("r","40"),e)," "]),r},bc=function(t){var e,r;return(r=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("aria-hidden","true"),r.setAttribute("width","100"),r.setAttribute("height","100"),r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("class","UppyIcon"),vi(r,[" ",((e=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("x","15"),e.setAttribute("y","15"),e.setAttribute("width","70"),e.setAttribute("height","70"),e)," "]),r},vc=function(t){var e,r=t.recording,n=t.onStartRecording,o=t.onStopRecording;if(r){var i;return(i=document.createElement("button")).setAttribute("type","button"),i.setAttribute("title","Stop Recording"),i.setAttribute("aria-label","Stop Recording"),i.onclick=o,i.setAttribute("class","UppyButton--circular UppyButton--red UppyButton--sizeM UppyWebcam-recordButton"),vi(i,[" ",bc()," "]),i}return(e=document.createElement("button")).setAttribute("type","button"),e.setAttribute("title","Begin Recording"),e.setAttribute("aria-label","Begin Recording"),e.onclick=n,e.setAttribute("class","UppyButton--circular UppyButton--red UppyButton--sizeM UppyWebcam-recordButton"),vi(e,[" ",yc()," "]),e},wc=function(t){var e,r,n;return(n=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("aria-hidden","true"),n.setAttribute("width","100"),n.setAttribute("height","77"),n.setAttribute("viewBox","0 0 100 77"),n.setAttribute("class","UppyIcon"),vi(n,[" ",((e=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M50 32c-7.168 0-13 5.832-13 13s5.832 13 13 13 13-5.832 13-13-5.832-13-13-13z"),e)," ",((r=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M87 13H72c0-7.18-5.82-13-13-13H41c-7.18 0-13 5.82-13 13H13C5.82 13 0 18.82 0 26v38c0 7.18 5.82 13 13 13h74c7.18 0 13-5.82 13-13V26c0-7.18-5.82-13-13-13zM50 68c-12.683 0-23-10.318-23-23s10.317-23 23-23 23 10.318 23 23-10.317 23-23 23z"),r)," "]),n},Ac=function(t){var e,r=t.onSnapshot;return(e=document.createElement("button")).setAttribute("type","button"),e.setAttribute("title","Take a snapshot"),e.setAttribute("aria-label","Take a snapshot"),e.onclick=r,e.setAttribute("class","UppyButton--circular UppyButton--red UppyButton--sizeM UppyWebcam-recordButton"),vi(e,[" ",wc()," "]),e},Sc=function(t){var e,r,n,o,i=t.src||"",s=void 0;if(t.useTheFlash)s=t.getSWFHTML();else{var a;(a=document.createElement("video")).setAttribute("autoplay","autoplay"),a.setAttribute("muted","muted"),a.setAttribute("src",""+String(i)),a.setAttribute("class","UppyWebcam-video"),s=a}var c=t.supportsRecording&&(Je(t.modes,"video-only")||Je(t.modes,"audio-only")||Je(t.modes,"video-audio")),l=Je(t.modes,"picture");return o=document.createElement("div"),Sr(o,function(e){t.onFocus();var r=e.querySelector(".UppyWebcam-recordButton");r&&r.focus()},function(e){t.onStop()},6),o.setAttribute("class","UppyWebcam-container"),vi(o,[" ",((e=document.createElement("div")).setAttribute("class","UppyWebcam-videoContainer"),vi(e,[" ",s," "]),e)," ",((r=document.createElement("div")).setAttribute("class","UppyWebcam-buttonContainer"),vi(r,[" ",c?vc(t):null," ",l?Ac(t):null," "]),r)," ",((n=document.createElement("canvas")).setAttribute("style","display: none;"),n.setAttribute("class","UppyWebcam-canvas"),n)," "]),o},Ec=function(t){var e,r,n;return(n=document.createElement("div")).setAttribute("class","uppy-Webcam-permissons"),vi(n,[" ",(e=document.createElement("h1"),e.textContent="Please allow access to your camera",e)," ",(r=document.createElement("p"),vi(r,["You have been prompted to allow camera access from this site.",document.createElement("br")," In order to take pictures with your camera you must approve this request."]),r)," "]),n},Pc=function(t){var e,r,n;return(n=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("aria-hidden","true"),n.setAttribute("width","18"),n.setAttribute("height","21"),n.setAttribute("viewBox","0 0 18 21"),n.setAttribute("class","UppyIcon"),vi(n,[" ",((e=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M14.8 16.9c1.9-1.7 3.2-4.1 3.2-6.9 0-5-4-9-9-9s-9 4-9 9c0 2.8 1.2 5.2 3.2 6.9C1.9 17.9.5 19.4 0 21h3c1-1.9 11-1.9 12 0h3c-.5-1.6-1.9-3.1-3.2-4.1zM9 4c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6z"),e)," ",((r=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M9 14c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4zM8 8c.6 0 1 .4 1 1s-.4 1-1 1-1-.4-1-1c0-.5.4-1 1-1z"),r)," "]),n},xc=function(){return"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start},kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tc="undefined"==typeof Promise?Hn.Promise:Promise,Cc=_i.getFileTypeExtension,Dc=_i.canvasToBlob,Oc=function(t){function e(r,n){$e(this,e);var o=Ye(this,t.call(this,r,n));o.mediaDevices=Ze(),o.supportsUserMedia=!!o.mediaDevices,o.protocol=location.protocol.match(/https/i)?"https":"http",o.id=o.opts.id||"Webcam",o.title="Webcam",o.type="acquirer",o.icon=Pc,o.focus=o.focus.bind(o);var i={strings:{smile:"Smile!"}},s={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,locale:i,modes:["video-audio","video-only","audio-only","picture"]};return o.opts=Uc({},s,n),o.locale=Uc({},i,o.opts.locale),o.locale.strings=Uc({},i.strings,o.opts.locale.strings),o.translator=new xi({locale:o.locale}),o.i18n=o.translator.translate.bind(o.translator),o.install=o.install.bind(o),o.setPluginState=o.setPluginState.bind(o),o.render=o.render.bind(o),o.start=o.start.bind(o),o.stop=o.stop.bind(o),o.takeSnapshot=o.takeSnapshot.bind(o),o.startRecording=o.startRecording.bind(o),o.stopRecording=o.stopRecording.bind(o),o.oneTwoThreeSmile=o.oneTwoThreeSmile.bind(o),o.webcamActive=!1,o.opts.countdown&&(o.opts.onBeforeSnapshot=o.oneTwoThreeSmile),o}return Ke(e,t),e.prototype.isSupported=function(){return!!this.mediaDevices},e.prototype.getConstraints=function(){return{audio:-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),video:-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")}},e.prototype.start=function(){var t=this;if(!this.isSupported())return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0;var e=this.getConstraints();return this.mediaDevices.getUserMedia(e).then(function(e){t.stream=e,console.log(e),t.streamSrc=URL.createObjectURL(t.stream),t.setPluginState({cameraReady:!0})}).catch(function(e){t.setPluginState({cameraError:e})})},e.prototype.startRecording=function(){var t=this;this.recorder=new MediaRecorder(this.stream),this.recordingChunks=[],this.recorder.addEventListener("dataavailable",function(e){t.recordingChunks.push(e.data)}),this.recorder.start(),this.setPluginState({isRecording:!0})},e.prototype.stopRecording=function(){var t=this;return new Tc(function(e,r){t.recorder.addEventListener("stop",function(){e()}),t.recorder.stop()}).then(function(){return t.setPluginState({isRecording:!1}),t.getVideo()}).then(function(e){return t.core.addFile(e)}).then(function(){t.recordingChunks=null,t.recorder=null},function(e){throw t.recordingChunks=null,t.recorder=null,e})},e.prototype.stop=function(){this.stream.getAudioTracks().forEach(function(t){t.stop()}),this.stream.getVideoTracks().forEach(function(t){t.stop()}),this.webcamActive=!1,this.stream=null,this.streamSrc=null},e.prototype.getVideoElement=function(){return this.el.querySelector(".UppyWebcam-video")},e.prototype.oneTwoThreeSmile=function(){var t=this;return new Tc(function(e,r){var n=t.opts.countdown,o=setInterval(function(){if(!t.webcamActive)return clearInterval(o),t.captureInProgress=!1,r(new Error("Webcam is not active"));n>0?(t.core.info(n+"...","warning",800),n--):(clearInterval(o),t.core.info(t.i18n("smile"),"success",1500),setTimeout(function(){return e()},1500))},1e3)})},e.prototype.takeSnapshot=function(){var t=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(e){var r="object"===(void 0===e?"undefined":kc(e))?e.message:e;return t.core.info(r,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: "+r))}).then(function(){return t.getImage()}).then(function(e){t.captureInProgress=!1,t.core.addFile(e);var r=t.core.getPlugin("Dashboard");r&&r.hideAllPanels()},function(e){throw t.captureInProgress=!1,e}))},e.prototype.getImage=function(){var t=this,e=this.getVideoElement();if(!e)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var r="webcam-"+Date.now()+".jpg",n=document.createElement("canvas");return n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0),Dc(n,"image/jpeg").then(function(e){return{source:t.id,name:r,data:new File([e],r,{type:"image/jpeg"}),type:"image/jpeg"}})},e.prototype.getVideo=function(){var t=this.recordingChunks[0].type,e=Cc(t);if(!e)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'+t+'"'));var r="webcam-"+Date.now()+"."+e,n=new hi(this.recordingChunks,{type:t}),o={source:this.id,name:r,data:new File([n],r,{type:t}),type:t};return Promise.resolve(o)},e.prototype.focus=function(){var t=this;this.opts.countdown||setTimeout(function(){t.core.info(t.i18n("smile"),"success",1500)},1e3)},e.prototype.render=function(t){this.webcamActive||this.start();var e=this.getPluginState();return e.cameraReady?Sc(Uc({},e,{onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onFocus:this.focus,onStop:this.stop,modes:this.opts.modes,supportsRecording:xc(),recording:e.isRecording,src:this.streamSrc})):Ec()},e.prototype.install=function(){this.setPluginState({cameraReady:!1});var t=this.opts.target;t&&this.mount(t,this)},e.prototype.uninstall=function(){this.stream&&this.stop(),this.unmount()},e}($i),_c={};return _c={Core:Fi,Plugin:$i,Dummy:Aa,StatusBar:sa,ProgressBar:tc,Informer:Ls,DragDrop:ma,GoogleDrive:Ga,Dropbox:va,Instagram:Ya,FileInput:Pa,Tus:gc,XHRUpload:rs,Transloadit:lc,AwsS3:os,Dashboard:pa,MetaData:Za,Webcam:Oc,GoldenRetriever:Wa,ReduxDevTools:nc,ReduxStore:ec},Object.defineProperty(_c,"RestoreFiles",{enumerable:!0,configurable:!0,get:function(){return console.warn("Uppy.RestoreFiles is deprecated and will be removed in v0.22. Use Uppy.GoldenRetriever instead."),Object.defineProperty(_c,"RestoreFiles",{enumerable:!0,configurable:!0,writable:!0,value:Wa}),Wa}}),Object.defineProperty(_c,"Tus10",{enumerable:!0,configurable:!0,get:function(){return console.warn("Uppy.Tus10 is deprecated and will be removed in v0.22. Use Uppy.Tus instead."),Object.defineProperty(_c,"Tus10",{enumerable:!0,configurable:!0,writable:!0,value:gc}),gc}}),_c});
//# sourceMappingURL=uppy.min.js.map